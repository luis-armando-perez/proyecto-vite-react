var $k=Object.defineProperty;var Hk=(t,e,n)=>e in t?$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ae=(t,e,n)=>Hk(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Wk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TS={exports:{}},Ch={},ES={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=Symbol.for("react.element"),Kk=Symbol.for("react.portal"),qk=Symbol.for("react.fragment"),Gk=Symbol.for("react.strict_mode"),Qk=Symbol.for("react.profiler"),Yk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Jk=Symbol.for("react.forward_ref"),Zk=Symbol.for("react.suspense"),eC=Symbol.for("react.memo"),tC=Symbol.for("react.lazy"),E_=Symbol.iterator;function nC(t){return t===null||typeof t!="object"?null:(t=E_&&t[E_]||t["@@iterator"],typeof t=="function"?t:null)}var SS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xS=Object.assign,IS={};function So(t,e,n){this.props=t,this.context=e,this.refs=IS,this.updater=n||SS}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bS(){}bS.prototype=So.prototype;function Gm(t,e,n){this.props=t,this.context=e,this.refs=IS,this.updater=n||SS}var Qm=Gm.prototype=new bS;Qm.constructor=Gm;xS(Qm,So.prototype);Qm.isPureReactComponent=!0;var S_=Array.isArray,PS=Object.prototype.hasOwnProperty,Ym={current:null},AS={key:!0,ref:!0,__self:!0,__source:!0};function kS(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)PS.call(e,i)&&!AS.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Pl,type:t,key:s,ref:o,props:r,_owner:Ym.current}}function iC(t,e){return{$$typeof:Pl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pl}function rC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x_=/\/+/g;function Gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rC(""+t.key):e.toString(36)}function Xc(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pl:case Kk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Gd(o,0):i,S_(r)?(n="",t!=null&&(n=t.replace(x_,"$&/")+"/"),Xc(r,e,n,"",function(c){return c})):r!=null&&(Xm(r)&&(r=iC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(x_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",S_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Gd(s,a);o+=Xc(s,e,n,l,r)}else if(l=nC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Gd(s,a++),o+=Xc(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dc(t,e,n){if(t==null)return t;var i=[],r=0;return Xc(t,i,"","",function(s){return e.call(n,s,r++)}),i}function sC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},Jc={transition:null},oC={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Jc,ReactCurrentOwner:Ym};function CS(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:dc,forEach:function(t,e,n){dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dc(t,function(){e++}),e},toArray:function(t){return dc(t,function(e){return e})||[]},only:function(t){if(!Xm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=So;te.Fragment=qk;te.Profiler=Qk;te.PureComponent=Gm;te.StrictMode=Gk;te.Suspense=Zk;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oC;te.act=CS;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=xS({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ym.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PS.call(e,l)&&!AS.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Pl,type:t.type,key:r,ref:s,props:i,_owner:o}};te.createContext=function(t){return t={$$typeof:Xk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Yk,_context:t},t.Consumer=t};te.createElement=kS;te.createFactory=function(t){var e=kS.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Jk,render:t}};te.isValidElement=Xm;te.lazy=function(t){return{$$typeof:tC,_payload:{_status:-1,_result:t},_init:sC}};te.memo=function(t,e){return{$$typeof:eC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Jc.transition;Jc.transition={};try{t()}finally{Jc.transition=e}};te.unstable_act=CS;te.useCallback=function(t,e){return Rt.current.useCallback(t,e)};te.useContext=function(t){return Rt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};te.useEffect=function(t,e){return Rt.current.useEffect(t,e)};te.useId=function(){return Rt.current.useId()};te.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Rt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};te.useRef=function(t){return Rt.current.useRef(t)};te.useState=function(t){return Rt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Rt.current.useTransition()};te.version="18.3.1";ES.exports=te;var z=ES.exports;const RS=Wk(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC=z,lC=Symbol.for("react.element"),cC=Symbol.for("react.fragment"),uC=Object.prototype.hasOwnProperty,hC=aC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dC={key:!0,ref:!0,__self:!0,__source:!0};function DS(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)uC.call(e,i)&&!dC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:lC,type:t,key:s,ref:o,props:r,_owner:hC.current}}Ch.Fragment=cC;Ch.jsx=DS;Ch.jsxs=DS;TS.exports=Ch;var O=TS.exports,MS={exports:{}},Xt={},OS={exports:{}},VS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var q=B.length;B.push(K);e:for(;0<q;){var ge=q-1>>>1,re=B[ge];if(0<r(re,K))B[ge]=K,B[q]=re,q=ge;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],q=B.pop();if(q!==K){B[0]=q;e:for(var ge=0,re=B.length,ve=re>>>1;ge<ve;){var Ze=2*(ge+1)-1,bt=B[Ze],et=Ze+1,$n=B[et];if(0>r(bt,q))et<re&&0>r($n,bt)?(B[ge]=$n,B[et]=q,ge=et):(B[ge]=bt,B[Ze]=q,ge=Ze);else if(et<re&&0>r($n,q))B[ge]=$n,B[et]=q,ge=et;else break e}}return K}function r(B,K){var q=B.sortIndex-K.sortIndex;return q!==0?q:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var K=n(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=B)i(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function C(B){if(T=!1,S(B),!v)if(n(l)!==null)v=!0,Pe(D);else{var K=n(c);K!==null&&ee(C,K.startTime-B)}}function D(B,K){v=!1,T&&(T=!1,y(_),_=-1),m=!0;var q=f;try{for(S(K),d=n(l);d!==null&&(!(d.expirationTime>K)||B&&!k());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,f=d.priorityLevel;var re=ge(d.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&i(l),S(K)}else i(l);d=n(l)}if(d!==null)var ve=!0;else{var Ze=n(c);Ze!==null&&ee(C,Ze.startTime-K),ve=!1}return ve}finally{d=null,f=q,m=!1}}var V=!1,I=null,_=-1,b=5,P=-1;function k(){return!(t.unstable_now()-P<b)}function R(){if(I!==null){var B=t.unstable_now();P=B;var K=!0;try{K=I(!0,B)}finally{K?A():(V=!1,I=null)}}else V=!1}var A;if(typeof w=="function")A=function(){w(R)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,he=we.port2;we.port1.onmessage=R,A=function(){he.postMessage(null)}}else A=function(){x(R,0)};function Pe(B){I=B,V||(V=!0,A())}function ee(B,K){_=x(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Pe(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var q=f;f=K;try{return B()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=f;f=B;try{return K()}finally{f=q}},t.unstable_scheduleCallback=function(B,K,q){var ge=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ge+q:ge):q=ge,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,B={id:h++,callback:K,priorityLevel:B,startTime:q,expirationTime:re,sortIndex:-1},q>ge?(B.sortIndex=q,e(c,B),n(l)===null&&B===n(c)&&(T?(y(_),_=-1):T=!0,ee(C,q-ge))):(B.sortIndex=re,e(l,B),v||m||(v=!0,Pe(D))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var K=f;return function(){var q=f;f=K;try{return B.apply(this,arguments)}finally{f=q}}}})(VS);OS.exports=VS;var fC=OS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=z,Qt=fC;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NS=new Set,Ka={};function os(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(Ka[t]=e,t=0;t<e.length;t++)NS.add(e[t])}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,mC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I_={},b_={};function gC(t){return op.call(b_,t)?!0:op.call(I_,t)?!1:mC.test(t)?b_[t]=!0:(I_[t]=!0,!1)}function yC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vC(t,e,n,i){if(e===null||typeof e>"u"||yC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jm,Zm);at[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jm,Zm);at[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jm,Zm);at[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function eg(t,e,n,i){var r=at.hasOwnProperty(e)?at[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vC(e,n,r,i)&&(n=null),i||r===null?gC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vi=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),xs=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),tg=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),LS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),ig=Symbol.for("react.memo"),Pi=Symbol.for("react.lazy"),jS=Symbol.for("react.offscreen"),P_=Symbol.iterator;function Yo(t){return t===null||typeof t!="object"?null:(t=P_&&t[P_]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Qd;function ua(t){if(Qd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qd=e&&e[1]||""}return`
`+Qd+t}var Yd=!1;function Xd(t,e){if(!t||Yd)return"";Yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ua(t):""}function _C(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=Xd(t.type,!1),t;case 11:return t=Xd(t.type.render,!1),t;case 1:return t=Xd(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case xs:return"Portal";case ap:return"Profiler";case tg:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FS:return(t.displayName||"Context")+".Consumer";case LS:return(t._context.displayName||"Context")+".Provider";case ng:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ig:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case Pi:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function wC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function BS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TC(t){var e=BS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pc(t){t._valueTracker||(t._valueTracker=TC(t))}function US(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=BS(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hp(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zS(t,e){e=e.checked,e!=null&&eg(t,"checked",e,!1)}function dp(t,e){zS(t,e);var n=rr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||Pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ha=Array.isArray;function $s(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+rr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(ha(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rr(n)}}function $S(t,e){var n=rr(e.value),i=rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function R_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mc,WS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mc=mc||document.createElement("div"),mc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EC=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){EC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function KS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function qS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=KS(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var SC=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(SC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,Hs=null,Ws=null;function D_(t){if(t=Cl(t)){if(typeof _p!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Vh(e),_p(t.stateNode,t.type,e))}}function GS(t){Hs?Ws?Ws.push(t):Ws=[t]:Hs=t}function QS(){if(Hs){var t=Hs,e=Ws;if(Ws=Hs=null,D_(t),e)for(t=0;t<e.length;t++)D_(e[t])}}function YS(t,e){return t(e)}function XS(){}var Jd=!1;function JS(t,e,n){if(Jd)return t(e,n);Jd=!0;try{return YS(t,e,n)}finally{Jd=!1,(Hs!==null||Ws!==null)&&(XS(),QS())}}function Ga(t,e){var n=t.stateNode;if(n===null)return null;var i=Vh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var wp=!1;if(ui)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){wp=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{wp=!1}function xC(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ba=!1,Au=null,ku=!1,Tp=null,IC={onError:function(t){ba=!0,Au=t}};function bC(t,e,n,i,r,s,o,a,l){ba=!1,Au=null,xC.apply(IC,arguments)}function PC(t,e,n,i,r,s,o,a,l){if(bC.apply(this,arguments),ba){if(ba){var c=Au;ba=!1,Au=null}else throw Error(j(198));ku||(ku=!0,Tp=c)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M_(t){if(as(t)!==t)throw Error(j(188))}function AC(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return M_(r),t;if(s===i)return M_(r),e;s=s.sibling}throw Error(j(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function ex(t){return t=AC(t),t!==null?tx(t):null}function tx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tx(t);if(e!==null)return e;t=t.sibling}return null}var nx=Qt.unstable_scheduleCallback,O_=Qt.unstable_cancelCallback,kC=Qt.unstable_shouldYield,CC=Qt.unstable_requestPaint,je=Qt.unstable_now,RC=Qt.unstable_getCurrentPriorityLevel,sg=Qt.unstable_ImmediatePriority,ix=Qt.unstable_UserBlockingPriority,Cu=Qt.unstable_NormalPriority,DC=Qt.unstable_LowPriority,rx=Qt.unstable_IdlePriority,Rh=null,Mn=null;function MC(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Rh,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:NC,OC=Math.log,VC=Math.LN2;function NC(t){return t>>>=0,t===0?32:31-(OC(t)/VC|0)|0}var gc=64,yc=4194304;function da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=da(a):(s&=o,s!==0&&(i=da(s)))}else o=n&~r,o!==0?i=da(o):s!==0&&(i=da(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-wn(e),r=1<<n,i|=t[n],e&=~r;return i}function LC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=LC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ep(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sx(){var t=gc;return gc<<=1,!(gc&4194240)&&(gc=64),t}function Zd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function jC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-wn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function og(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-wn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var me=0;function ox(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ax,ag,lx,cx,ux,Sp=!1,vc=[],Ui=null,zi=null,$i=null,Qa=new Map,Ya=new Map,Ci=[],BC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V_(t,e){switch(t){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Qa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(e.pointerId)}}function Jo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Cl(e),e!==null&&ag(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function UC(t,e,n,i,r){switch(e){case"focusin":return Ui=Jo(Ui,t,e,n,i,r),!0;case"dragenter":return zi=Jo(zi,t,e,n,i,r),!0;case"mouseover":return $i=Jo($i,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Qa.set(s,Jo(Qa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ya.set(s,Jo(Ya.get(s)||null,t,e,n,i,r)),!0}return!1}function hx(t){var e=jr(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=ZS(n),e!==null){t.blockedOn=e,ux(t.priority,function(){lx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);vp=i,n.target.dispatchEvent(i),vp=null}else return e=Cl(n),e!==null&&ag(e),t.blockedOn=n,!1;e.shift()}return!0}function N_(t,e,n){Zc(t)&&n.delete(e)}function zC(){Sp=!1,Ui!==null&&Zc(Ui)&&(Ui=null),zi!==null&&Zc(zi)&&(zi=null),$i!==null&&Zc($i)&&($i=null),Qa.forEach(N_),Ya.forEach(N_)}function Zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Sp||(Sp=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,zC)))}function Xa(t){function e(r){return Zo(r,t)}if(0<vc.length){Zo(vc[0],t);for(var n=1;n<vc.length;n++){var i=vc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ui!==null&&Zo(Ui,t),zi!==null&&Zo(zi,t),$i!==null&&Zo($i,t),Qa.forEach(e),Ya.forEach(e),n=0;n<Ci.length;n++)i=Ci[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)hx(n),n.blockedOn===null&&Ci.shift()}var Ks=vi.ReactCurrentBatchConfig,Du=!0;function $C(t,e,n,i){var r=me,s=Ks.transition;Ks.transition=null;try{me=1,lg(t,e,n,i)}finally{me=r,Ks.transition=s}}function HC(t,e,n,i){var r=me,s=Ks.transition;Ks.transition=null;try{me=4,lg(t,e,n,i)}finally{me=r,Ks.transition=s}}function lg(t,e,n,i){if(Du){var r=xp(t,e,n,i);if(r===null)uf(t,e,i,Mu,n),V_(t,i);else if(UC(r,t,e,n,i))i.stopPropagation();else if(V_(t,i),e&4&&-1<BC.indexOf(t)){for(;r!==null;){var s=Cl(r);if(s!==null&&ax(s),s=xp(t,e,n,i),s===null&&uf(t,e,i,Mu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else uf(t,e,i,null,n)}}var Mu=null;function xp(t,e,n,i){if(Mu=null,t=rg(i),t=jr(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mu=t,null}function dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RC()){case sg:return 1;case ix:return 4;case Cu:case DC:return 16;case rx:return 536870912;default:return 16}default:return 16}}var Ni=null,cg=null,eu=null;function fx(){if(eu)return eu;var t,e=cg,n=e.length,i,r="value"in Ni?Ni.value:Ni.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return eu=r.slice(t,1<i?1-i:void 0)}function tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _c(){return!0}function L_(){return!1}function Jt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_c:L_,this.isPropagationStopped=L_,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ug=Jt(xo),kl=Me({},xo,{view:0,detail:0}),WC=Jt(kl),ef,tf,ea,Dh=Me({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(ef=t.screenX-ea.screenX,tf=t.screenY-ea.screenY):tf=ef=0,ea=t),ef)},movementY:function(t){return"movementY"in t?t.movementY:tf}}),F_=Jt(Dh),KC=Me({},Dh,{dataTransfer:0}),qC=Jt(KC),GC=Me({},kl,{relatedTarget:0}),nf=Jt(GC),QC=Me({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),YC=Jt(QC),XC=Me({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JC=Jt(XC),ZC=Me({},xo,{data:0}),j_=Jt(ZC),eR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nR[t])?!!e[t]:!1}function hg(){return iR}var rR=Me({},kl,{key:function(t){if(t.key){var e=eR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(t){return t.type==="keypress"?tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sR=Jt(rR),oR=Me({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B_=Jt(oR),aR=Me({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),lR=Jt(aR),cR=Me({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),uR=Jt(cR),hR=Me({},Dh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dR=Jt(hR),fR=[9,13,27,32],dg=ui&&"CompositionEvent"in window,Pa=null;ui&&"documentMode"in document&&(Pa=document.documentMode);var pR=ui&&"TextEvent"in window&&!Pa,px=ui&&(!dg||Pa&&8<Pa&&11>=Pa),U_=" ",z_=!1;function mx(t,e){switch(t){case"keyup":return fR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function mR(t,e){switch(t){case"compositionend":return gx(e);case"keypress":return e.which!==32?null:(z_=!0,U_);case"textInput":return t=e.data,t===U_&&z_?null:t;default:return null}}function gR(t,e){if(bs)return t==="compositionend"||!dg&&mx(t,e)?(t=fx(),eu=cg=Ni=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return px&&e.locale!=="ko"?null:e.data;default:return null}}var yR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yR[t.type]:e==="textarea"}function yx(t,e,n,i){GS(i),e=Ou(e,"onChange"),0<e.length&&(n=new ug("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Aa=null,Ja=null;function vR(t){Ax(t,0)}function Mh(t){var e=ks(t);if(US(e))return t}function _R(t,e){if(t==="change")return e}var vx=!1;if(ui){var rf;if(ui){var sf="oninput"in document;if(!sf){var H_=document.createElement("div");H_.setAttribute("oninput","return;"),sf=typeof H_.oninput=="function"}rf=sf}else rf=!1;vx=rf&&(!document.documentMode||9<document.documentMode)}function W_(){Aa&&(Aa.detachEvent("onpropertychange",_x),Ja=Aa=null)}function _x(t){if(t.propertyName==="value"&&Mh(Ja)){var e=[];yx(e,Ja,t,rg(t)),JS(vR,e)}}function wR(t,e,n){t==="focusin"?(W_(),Aa=e,Ja=n,Aa.attachEvent("onpropertychange",_x)):t==="focusout"&&W_()}function TR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mh(Ja)}function ER(t,e){if(t==="click")return Mh(e)}function SR(t,e){if(t==="input"||t==="change")return Mh(e)}function xR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:xR;function Za(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!op.call(e,r)||!Sn(t[r],e[r]))return!1}return!0}function K_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q_(t,e){var n=K_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K_(n)}}function wx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tx(){for(var t=window,e=Pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pu(t.document)}return e}function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IR(t){var e=Tx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wx(n.ownerDocument.documentElement,n)){if(i!==null&&fg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=q_(n,s);var o=q_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bR=ui&&"documentMode"in document&&11>=document.documentMode,Ps=null,Ip=null,ka=null,bp=!1;function G_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bp||Ps==null||Ps!==Pu(i)||(i=Ps,"selectionStart"in i&&fg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ka&&Za(ka,i)||(ka=i,i=Ou(Ip,"onSelect"),0<i.length&&(e=new ug("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ps)))}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},of={},Ex={};ui&&(Ex=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Oh(t){if(of[t])return of[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ex)return of[t]=e[n];return t}var Sx=Oh("animationend"),xx=Oh("animationiteration"),Ix=Oh("animationstart"),bx=Oh("transitionend"),Px=new Map,Q_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){Px.set(t,e),os(e,[t])}for(var af=0;af<Q_.length;af++){var lf=Q_[af],PR=lf.toLowerCase(),AR=lf[0].toUpperCase()+lf.slice(1);gr(PR,"on"+AR)}gr(Sx,"onAnimationEnd");gr(xx,"onAnimationIteration");gr(Ix,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(bx,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kR=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Y_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,PC(i,e,void 0,t),t.currentTarget=null}function Ax(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Y_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Y_(r,a,c),s=l}}}if(ku)throw t=Tp,ku=!1,Tp=null,t}function Se(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var i=t+"__bubble";n.has(i)||(kx(e,t,2,!1),n.add(i))}function cf(t,e,n){var i=0;e&&(i|=4),kx(n,t,i,e)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function el(t){if(!t[Tc]){t[Tc]=!0,NS.forEach(function(n){n!=="selectionchange"&&(kR.has(n)||cf(n,!1,t),cf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tc]||(e[Tc]=!0,cf("selectionchange",!1,e))}}function kx(t,e,n,i){switch(dx(e)){case 1:var r=$C;break;case 4:r=HC;break;default:r=lg}n=r.bind(null,e,n,t),r=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function uf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=jr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}JS(function(){var c=s,h=rg(n),d=[];e:{var f=Px.get(t);if(f!==void 0){var m=ug,v=t;switch(t){case"keypress":if(tu(n)===0)break e;case"keydown":case"keyup":m=sR;break;case"focusin":v="focus",m=nf;break;case"focusout":v="blur",m=nf;break;case"beforeblur":case"afterblur":m=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=lR;break;case Sx:case xx:case Ix:m=YC;break;case bx:m=uR;break;case"scroll":m=WC;break;case"wheel":m=dR;break;case"copy":case"cut":case"paste":m=JC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=B_}var T=(e&4)!==0,x=!T&&t==="scroll",y=T?f!==null?f+"Capture":null:f;T=[];for(var w=c,S;w!==null;){S=w;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,y!==null&&(C=Ga(w,y),C!=null&&T.push(tl(w,C,S)))),x)break;w=w.return}0<T.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==vp&&(v=n.relatedTarget||n.fromElement)&&(jr(v)||v[hi]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?jr(v):null,v!==null&&(x=as(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(T=F_,C="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=B_,C="onPointerLeave",y="onPointerEnter",w="pointer"),x=m==null?f:ks(m),S=v==null?f:ks(v),f=new T(C,w+"leave",m,n,h),f.target=x,f.relatedTarget=S,C=null,jr(h)===c&&(T=new T(y,w+"enter",v,n,h),T.target=S,T.relatedTarget=x,C=T),x=C,m&&v)t:{for(T=m,y=v,w=0,S=T;S;S=ys(S))w++;for(S=0,C=y;C;C=ys(C))S++;for(;0<w-S;)T=ys(T),w--;for(;0<S-w;)y=ys(y),S--;for(;w--;){if(T===y||y!==null&&T===y.alternate)break t;T=ys(T),y=ys(y)}T=null}else T=null;m!==null&&X_(d,f,m,T,!1),v!==null&&x!==null&&X_(d,x,v,T,!0)}}e:{if(f=c?ks(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=_R;else if($_(f))if(vx)D=SR;else{D=TR;var V=wR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=ER);if(D&&(D=D(t,c))){yx(d,D,n,h);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&fp(f,"number",f.value)}switch(V=c?ks(c):window,t){case"focusin":($_(V)||V.contentEditable==="true")&&(Ps=V,Ip=c,ka=null);break;case"focusout":ka=Ip=Ps=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,G_(d,n,h);break;case"selectionchange":if(bR)break;case"keydown":case"keyup":G_(d,n,h)}var I;if(dg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else bs?mx(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(px&&n.locale!=="ko"&&(bs||_!=="onCompositionStart"?_==="onCompositionEnd"&&bs&&(I=fx()):(Ni=h,cg="value"in Ni?Ni.value:Ni.textContent,bs=!0)),V=Ou(c,_),0<V.length&&(_=new j_(_,t,null,n,h),d.push({event:_,listeners:V}),I?_.data=I:(I=gx(n),I!==null&&(_.data=I)))),(I=pR?mR(t,n):gR(t,n))&&(c=Ou(c,"onBeforeInput"),0<c.length&&(h=new j_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}Ax(d,e)})}function tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ou(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ga(t,n),s!=null&&i.unshift(tl(t,s,r)),s=Ga(t,e),s!=null&&i.push(tl(t,s,r))),t=t.return}return i}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function X_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Ga(n,s),l!=null&&o.unshift(tl(n,l,a))):r||(l=Ga(n,s),l!=null&&o.push(tl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CR=/\r\n?/g,RR=/\u0000|\uFFFD/g;function J_(t){return(typeof t=="string"?t:""+t).replace(CR,`
`).replace(RR,"")}function Ec(t,e,n){if(e=J_(e),J_(t)!==e&&n)throw Error(j(425))}function Vu(){}var Pp=null,Ap=null;function kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,DR=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,MR=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(t){return Z_.resolve(null).then(t).catch(OR)}:Cp;function OR(t){setTimeout(function(){throw t})}function hf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Xa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Xa(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Io,nl="__reactProps$"+Io,hi="__reactContainer$"+Io,Rp="__reactEvents$"+Io,VR="__reactListeners$"+Io,NR="__reactHandles$"+Io;function jr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=e0(t);t!==null;){if(n=t[Cn])return n;t=e0(t)}return e}t=n,n=t.parentNode}return null}function Cl(t){return t=t[Cn]||t[hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Vh(t){return t[nl]||null}var Dp=[],Cs=-1;function yr(t){return{current:t}}function be(t){0>Cs||(t.current=Dp[Cs],Dp[Cs]=null,Cs--)}function Te(t,e){Cs++,Dp[Cs]=t.current,t.current=e}var sr={},xt=yr(sr),jt=yr(!1),Yr=sr;function io(t,e){var n=t.type.contextTypes;if(!n)return sr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Bt(t){return t=t.childContextTypes,t!=null}function Nu(){be(jt),be(xt)}function t0(t,e,n){if(xt.current!==sr)throw Error(j(168));Te(xt,e),Te(jt,n)}function Cx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(j(108,wC(t)||"Unknown",r));return Me({},n,i)}function Lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Yr=xt.current,Te(xt,t),Te(jt,jt.current),!0}function n0(t,e,n){var i=t.stateNode;if(!i)throw Error(j(169));n?(t=Cx(t,e,Yr),i.__reactInternalMemoizedMergedChildContext=t,be(jt),be(xt),Te(xt,t)):be(jt),Te(jt,n)}var Yn=null,Nh=!1,df=!1;function Rx(t){Yn===null?Yn=[t]:Yn.push(t)}function LR(t){Nh=!0,Rx(t)}function vr(){if(!df&&Yn!==null){df=!0;var t=0,e=me;try{var n=Yn;for(me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yn=null,Nh=!1}catch(r){throw Yn!==null&&(Yn=Yn.slice(t+1)),nx(sg,vr),r}finally{me=e,df=!1}}return null}var Rs=[],Ds=0,Fu=null,ju=0,rn=[],sn=0,Xr=null,Jn=1,Zn="";function Mr(t,e){Rs[Ds++]=ju,Rs[Ds++]=Fu,Fu=t,ju=e}function Dx(t,e,n){rn[sn++]=Jn,rn[sn++]=Zn,rn[sn++]=Xr,Xr=t;var i=Jn;t=Zn;var r=32-wn(i)-1;i&=~(1<<r),n+=1;var s=32-wn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jn=1<<32-wn(e)+r|n<<r|i,Zn=s+t}else Jn=1<<s|n<<r|i,Zn=t}function pg(t){t.return!==null&&(Mr(t,1),Dx(t,1,0))}function mg(t){for(;t===Fu;)Fu=Rs[--Ds],Rs[Ds]=null,ju=Rs[--Ds],Rs[Ds]=null;for(;t===Xr;)Xr=rn[--sn],rn[sn]=null,Zn=rn[--sn],rn[sn]=null,Jn=rn[--sn],rn[sn]=null}var qt=null,Wt=null,Ae=!1,yn=null;function Mx(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function Mp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Op(t){if(Ae){var e=Wt;if(e){var n=e;if(!i0(t,e)){if(Mp(t))throw Error(j(418));e=Hi(n.nextSibling);var i=qt;e&&i0(t,e)?Mx(i,n):(t.flags=t.flags&-4097|2,Ae=!1,qt=t)}}else{if(Mp(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ae=!1,qt=t}}}function r0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Sc(t){if(t!==qt)return!1;if(!Ae)return r0(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kp(t.type,t.memoizedProps)),e&&(e=Wt)){if(Mp(t))throw Ox(),Error(j(418));for(;e;)Mx(t,e),e=Hi(e.nextSibling)}if(r0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?Hi(t.stateNode.nextSibling):null;return!0}function Ox(){for(var t=Wt;t;)t=Hi(t.nextSibling)}function ro(){Wt=qt=null,Ae=!1}function gg(t){yn===null?yn=[t]:yn.push(t)}var FR=vi.ReactCurrentBatchConfig;function ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var i=n.stateNode}if(!i)throw Error(j(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function xc(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s0(t){var e=t._init;return e(t._payload)}function Vx(t){function e(y,w){if(t){var S=y.deletions;S===null?(y.deletions=[w],y.flags|=16):S.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=Gi(y,w),y.index=0,y.sibling=null,y}function s(y,w,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<w?(y.flags|=2,w):S):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,S,C){return w===null||w.tag!==6?(w=_f(S,y.mode,C),w.return=y,w):(w=r(w,S),w.return=y,w)}function l(y,w,S,C){var D=S.type;return D===Is?h(y,w,S.props.children,C,S.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Pi&&s0(D)===w.type)?(C=r(w,S.props),C.ref=ta(y,w,S),C.return=y,C):(C=lu(S.type,S.key,S.props,null,y.mode,C),C.ref=ta(y,w,S),C.return=y,C)}function c(y,w,S,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=wf(S,y.mode,C),w.return=y,w):(w=r(w,S.children||[]),w.return=y,w)}function h(y,w,S,C,D){return w===null||w.tag!==7?(w=Kr(S,y.mode,C,D),w.return=y,w):(w=r(w,S),w.return=y,w)}function d(y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_f(""+w,y.mode,S),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fc:return S=lu(w.type,w.key,w.props,null,y.mode,S),S.ref=ta(y,null,w),S.return=y,S;case xs:return w=wf(w,y.mode,S),w.return=y,w;case Pi:var C=w._init;return d(y,C(w._payload),S)}if(ha(w)||Yo(w))return w=Kr(w,y.mode,S,null),w.return=y,w;xc(y,w)}return null}function f(y,w,S,C){var D=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(y,w,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fc:return S.key===D?l(y,w,S,C):null;case xs:return S.key===D?c(y,w,S,C):null;case Pi:return D=S._init,f(y,w,D(S._payload),C)}if(ha(S)||Yo(S))return D!==null?null:h(y,w,S,C,null);xc(y,S)}return null}function m(y,w,S,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(S)||null,a(w,y,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case fc:return y=y.get(C.key===null?S:C.key)||null,l(w,y,C,D);case xs:return y=y.get(C.key===null?S:C.key)||null,c(w,y,C,D);case Pi:var V=C._init;return m(y,w,S,V(C._payload),D)}if(ha(C)||Yo(C))return y=y.get(S)||null,h(w,y,C,D,null);xc(w,C)}return null}function v(y,w,S,C){for(var D=null,V=null,I=w,_=w=0,b=null;I!==null&&_<S.length;_++){I.index>_?(b=I,I=null):b=I.sibling;var P=f(y,I,S[_],C);if(P===null){I===null&&(I=b);break}t&&I&&P.alternate===null&&e(y,I),w=s(P,w,_),V===null?D=P:V.sibling=P,V=P,I=b}if(_===S.length)return n(y,I),Ae&&Mr(y,_),D;if(I===null){for(;_<S.length;_++)I=d(y,S[_],C),I!==null&&(w=s(I,w,_),V===null?D=I:V.sibling=I,V=I);return Ae&&Mr(y,_),D}for(I=i(y,I);_<S.length;_++)b=m(I,y,_,S[_],C),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?_:b.key),w=s(b,w,_),V===null?D=b:V.sibling=b,V=b);return t&&I.forEach(function(k){return e(y,k)}),Ae&&Mr(y,_),D}function T(y,w,S,C){var D=Yo(S);if(typeof D!="function")throw Error(j(150));if(S=D.call(S),S==null)throw Error(j(151));for(var V=D=null,I=w,_=w=0,b=null,P=S.next();I!==null&&!P.done;_++,P=S.next()){I.index>_?(b=I,I=null):b=I.sibling;var k=f(y,I,P.value,C);if(k===null){I===null&&(I=b);break}t&&I&&k.alternate===null&&e(y,I),w=s(k,w,_),V===null?D=k:V.sibling=k,V=k,I=b}if(P.done)return n(y,I),Ae&&Mr(y,_),D;if(I===null){for(;!P.done;_++,P=S.next())P=d(y,P.value,C),P!==null&&(w=s(P,w,_),V===null?D=P:V.sibling=P,V=P);return Ae&&Mr(y,_),D}for(I=i(y,I);!P.done;_++,P=S.next())P=m(I,y,_,P.value,C),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?_:P.key),w=s(P,w,_),V===null?D=P:V.sibling=P,V=P);return t&&I.forEach(function(R){return e(y,R)}),Ae&&Mr(y,_),D}function x(y,w,S,C){if(typeof S=="object"&&S!==null&&S.type===Is&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case fc:e:{for(var D=S.key,V=w;V!==null;){if(V.key===D){if(D=S.type,D===Is){if(V.tag===7){n(y,V.sibling),w=r(V,S.props.children),w.return=y,y=w;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Pi&&s0(D)===V.type){n(y,V.sibling),w=r(V,S.props),w.ref=ta(y,V,S),w.return=y,y=w;break e}n(y,V);break}else e(y,V);V=V.sibling}S.type===Is?(w=Kr(S.props.children,y.mode,C,S.key),w.return=y,y=w):(C=lu(S.type,S.key,S.props,null,y.mode,C),C.ref=ta(y,w,S),C.return=y,y=C)}return o(y);case xs:e:{for(V=S.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(y,w.sibling),w=r(w,S.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=wf(S,y.mode,C),w.return=y,y=w}return o(y);case Pi:return V=S._init,x(y,w,V(S._payload),C)}if(ha(S))return v(y,w,S,C);if(Yo(S))return T(y,w,S,C);xc(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(y,w.sibling),w=r(w,S),w.return=y,y=w):(n(y,w),w=_f(S,y.mode,C),w.return=y,y=w),o(y)):n(y,w)}return x}var so=Vx(!0),Nx=Vx(!1),Bu=yr(null),Uu=null,Ms=null,yg=null;function vg(){yg=Ms=Uu=null}function _g(t){var e=Bu.current;be(Bu),t._currentValue=e}function Vp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Uu=t,yg=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(yg!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Uu===null)throw Error(j(308));Ms=t,Uu.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Br=null;function wg(t){Br===null?Br=[t]:Br.push(t)}function Lx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,wg(e)):(n.next=r.next,r.next=n),e.interleaved=n,di(t,i)}function di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ai=!1;function Tg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,di(t,n)}return r=i.interleaved,r===null?(e.next=e,wg(i)):(e.next=r.next,r.next=e),i.interleaved=e,di(t,n)}function nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,og(t,n)}}function o0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,i){var r=t.updateQueue;Ai=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,T=a;switch(f=e,m=n,T.tag){case 1:if(v=T.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Me({},d,f);break e;case 2:Ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Zr|=o,t.lanes=o,t.memoizedState=d}}function a0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(j(191,r));r.call(i)}}}var Rl={},On=yr(Rl),il=yr(Rl),rl=yr(Rl);function Ur(t){if(t===Rl)throw Error(j(174));return t}function Eg(t,e){switch(Te(rl,e),Te(il,t),Te(On,Rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}be(On),Te(On,e)}function oo(){be(On),be(il),be(rl)}function jx(t){Ur(rl.current);var e=Ur(On.current),n=mp(e,t.type);e!==n&&(Te(il,t),Te(On,n))}function Sg(t){il.current===t&&(be(On),be(il))}var Ce=yr(0);function $u(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ff=[];function xg(){for(var t=0;t<ff.length;t++)ff[t]._workInProgressVersionPrimary=null;ff.length=0}var iu=vi.ReactCurrentDispatcher,pf=vi.ReactCurrentBatchConfig,Jr=0,De=null,He=null,Ye=null,Hu=!1,Ca=!1,sl=0,jR=0;function dt(){throw Error(j(321))}function Ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function bg(t,e,n,i,r,s){if(Jr=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?$R:HR,t=n(i,r),Ca){s=0;do{if(Ca=!1,sl=0,25<=s)throw Error(j(301));s+=1,Ye=He=null,e.updateQueue=null,iu.current=WR,t=n(i,r)}while(Ca)}if(iu.current=Wu,e=He!==null&&He.next!==null,Jr=0,Ye=He=De=null,Hu=!1,e)throw Error(j(300));return t}function Pg(){var t=sl!==0;return sl=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function un(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?De.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(j(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function ol(t,e){return typeof e=="function"?e(t):e}function mf(t){var e=un(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Jr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,De.lanes|=h,Zr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Sn(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,De.lanes|=s,Zr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gf(t){var e=un(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Sn(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Bx(){}function Ux(t,e){var n=De,i=un(),r=e(),s=!Sn(i.memoizedState,r);if(s&&(i.memoizedState=r,Ft=!0),i=i.queue,Ag(Hx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,al(9,$x.bind(null,n,i,r,e),void 0,null),Xe===null)throw Error(j(349));Jr&30||zx(n,e,r)}return r}function zx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $x(t,e,n,i){e.value=n,e.getSnapshot=i,Wx(e)&&Kx(t)}function Hx(t,e,n){return n(function(){Wx(e)&&Kx(t)})}function Wx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Kx(t){var e=di(t,1);e!==null&&Tn(e,t,1,-1)}function l0(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:t},e.queue=t,t=t.dispatch=zR.bind(null,De,t),[e.memoizedState,t]}function al(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function qx(){return un().memoizedState}function ru(t,e,n,i){var r=An();De.flags|=t,r.memoizedState=al(1|e,n,void 0,i===void 0?null:i)}function Lh(t,e,n,i){var r=un();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&Ig(i,o.deps)){r.memoizedState=al(e,n,s,i);return}}De.flags|=t,r.memoizedState=al(1|e,n,s,i)}function c0(t,e){return ru(8390656,8,t,e)}function Ag(t,e){return Lh(2048,8,t,e)}function Gx(t,e){return Lh(4,2,t,e)}function Qx(t,e){return Lh(4,4,t,e)}function Yx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xx(t,e,n){return n=n!=null?n.concat([t]):null,Lh(4,4,Yx.bind(null,e,t),n)}function kg(){}function Jx(t,e){var n=un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Zx(t,e){var n=un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function e1(t,e,n){return Jr&21?(Sn(n,e)||(n=sx(),De.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function BR(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var i=pf.transition;pf.transition={};try{t(!1),e()}finally{me=n,pf.transition=i}}function t1(){return un().memoizedState}function UR(t,e,n){var i=qi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},n1(t))i1(e,n);else if(n=Lx(t,e,n,i),n!==null){var r=Ct();Tn(n,t,i,r),r1(n,e,i)}}function zR(t,e,n){var i=qi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(n1(t))i1(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Sn(a,o)){var l=e.interleaved;l===null?(r.next=r,wg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Lx(t,e,r,i),n!==null&&(r=Ct(),Tn(n,t,i,r),r1(n,e,i))}}function n1(t){var e=t.alternate;return t===De||e!==null&&e===De}function i1(t,e){Ca=Hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,og(t,n)}}var Wu={readContext:cn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},$R={readContext:cn,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:c0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ru(4194308,4,Yx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return ru(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=An();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=UR.bind(null,De,t),[i.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:l0,useDebugValue:kg,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=l0(!1),e=t[0];return t=BR.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=De,r=An();if(Ae){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Xe===null)throw Error(j(349));Jr&30||zx(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,c0(Hx.bind(null,i,s,t),[t]),i.flags|=2048,al(9,$x.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=An(),e=Xe.identifierPrefix;if(Ae){var n=Zn,i=Jn;n=(i&~(1<<32-wn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=sl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HR={readContext:cn,useCallback:Jx,useContext:cn,useEffect:Ag,useImperativeHandle:Xx,useInsertionEffect:Gx,useLayoutEffect:Qx,useMemo:Zx,useReducer:mf,useRef:qx,useState:function(){return mf(ol)},useDebugValue:kg,useDeferredValue:function(t){var e=un();return e1(e,He.memoizedState,t)},useTransition:function(){var t=mf(ol)[0],e=un().memoizedState;return[t,e]},useMutableSource:Bx,useSyncExternalStore:Ux,useId:t1,unstable_isNewReconciler:!1},WR={readContext:cn,useCallback:Jx,useContext:cn,useEffect:Ag,useImperativeHandle:Xx,useInsertionEffect:Gx,useLayoutEffect:Qx,useMemo:Zx,useReducer:gf,useRef:qx,useState:function(){return gf(ol)},useDebugValue:kg,useDeferredValue:function(t){var e=un();return He===null?e.memoizedState=t:e1(e,He.memoizedState,t)},useTransition:function(){var t=gf(ol)[0],e=un().memoizedState;return[t,e]},useMutableSource:Bx,useSyncExternalStore:Ux,useId:t1,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Np(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fh={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=qi(t),s=ri(i,r);s.payload=e,n!=null&&(s.callback=n),e=Wi(t,s,r),e!==null&&(Tn(e,t,r,i),nu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=qi(t),s=ri(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wi(t,s,r),e!==null&&(Tn(e,t,r,i),nu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),i=qi(t),r=ri(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wi(t,r,i),e!==null&&(Tn(e,t,i,n),nu(e,t,i))}};function u0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Za(n,i)||!Za(r,s):!0}function s1(t,e,n){var i=!1,r=sr,s=e.contextType;return typeof s=="object"&&s!==null?s=cn(s):(r=Bt(e)?Yr:xt.current,i=e.contextTypes,s=(i=i!=null)?io(t,r):sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function h0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Fh.enqueueReplaceState(e,e.state,null)}function Lp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Tg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=cn(s):(s=Bt(e)?Yr:xt.current,r.context=io(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Np(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Fh.enqueueReplaceState(r,r.state,null),zu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",i=e;do n+=_C(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function yf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KR=typeof WeakMap=="function"?WeakMap:Map;function o1(t,e,n){n=ri(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qu||(qu=!0,Gp=i),Fp(t,e)},n}function a1(t,e,n){n=ri(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Fp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fp(t,e),typeof i!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function d0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new KR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=oD.bind(null,t,e,n),e.then(t,t))}function f0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ri(-1,1),e.tag=2,Wi(n,e,1))),n.lanes|=1),t)}var qR=vi.ReactCurrentOwner,Ft=!1;function kt(t,e,n,i){e.child=t===null?Nx(e,null,n,i):so(e,t.child,n,i)}function m0(t,e,n,i,r){n=n.render;var s=e.ref;return qs(e,r),i=bg(t,e,n,i,s,r),n=Pg(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fi(t,e,r)):(Ae&&n&&pg(e),e.flags|=1,kt(t,e,i,r),e.child)}function g0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Lg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,l1(t,e,s,i,r)):(t=lu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(o,i)&&t.ref===e.ref)return fi(t,e,r)}return e.flags|=1,t=Gi(s,i),t.ref=e.ref,t.return=e,e.child=t}function l1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Za(s,i)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,fi(t,e,r)}return jp(t,e,n,i,r)}function c1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Vs,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Vs,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Te(Vs,Ht),Ht|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Te(Vs,Ht),Ht|=i;return kt(t,e,r,n),e.child}function u1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jp(t,e,n,i,r){var s=Bt(n)?Yr:xt.current;return s=io(e,s),qs(e,r),n=bg(t,e,n,i,s,r),i=Pg(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fi(t,e,r)):(Ae&&i&&pg(e),e.flags|=1,kt(t,e,n,r),e.child)}function y0(t,e,n,i,r){if(Bt(n)){var s=!0;Lu(e)}else s=!1;if(qs(e,r),e.stateNode===null)su(t,e),s1(e,n,i),Lp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=Bt(n)?Yr:xt.current,c=io(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&h0(e,o,i,c),Ai=!1;var f=e.memoizedState;o.state=f,zu(e,i,o,r),l=e.memoizedState,a!==i||f!==l||jt.current||Ai?(typeof h=="function"&&(Np(e,n,h,i),l=e.memoizedState),(a=Ai||u0(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Fx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cn(l):(l=Bt(n)?Yr:xt.current,l=io(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&h0(e,o,i,l),Ai=!1,f=e.memoizedState,o.state=f,zu(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||jt.current||Ai?(typeof m=="function"&&(Np(e,n,m,i),v=e.memoizedState),(c=Ai||u0(e,n,c,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Bp(t,e,n,i,s,r)}function Bp(t,e,n,i,r,s){u1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&n0(e,n,!1),fi(t,e,s);i=e.stateNode,qR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,s),e.child=so(e,null,a,s)):kt(t,e,a,s),e.memoizedState=i.state,r&&n0(e,n,!0),e.child}function h1(t){var e=t.stateNode;e.pendingContext?t0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t0(t,e.context,!1),Eg(t,e.containerInfo)}function v0(t,e,n,i,r){return ro(),gg(r),e.flags|=256,kt(t,e,n,i),e.child}var Up={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function d1(t,e,n){var i=e.pendingProps,r=Ce.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Te(Ce,r&1),t===null)return Op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uh(o,i,0,null),t=Kr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zp(n),e.memoizedState=Up,t):Cg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return GR(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Gi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Gi(a,s):(s=Kr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?zp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Up,i}return s=t.child,t=s.sibling,i=Gi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Cg(t,e){return e=Uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ic(t,e,n,i){return i!==null&&gg(i),so(e,t.child,null,n),t=Cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GR(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=yf(Error(j(422))),Ic(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Uh({mode:"visible",children:i.children},r,0,null),s=Kr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=zp(o),e.memoizedState=Up,s);if(!(e.mode&1))return Ic(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(j(419)),i=yf(s,i,void 0),Ic(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ft||a){if(i=Xe,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,di(t,r),Tn(i,t,r,-1))}return Ng(),i=yf(Error(j(421))),Ic(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=aD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Wt=Hi(r.nextSibling),qt=e,Ae=!0,yn=null,t!==null&&(rn[sn++]=Jn,rn[sn++]=Zn,rn[sn++]=Xr,Jn=t.id,Zn=t.overflow,Xr=e),e=Cg(e,i.children),e.flags|=4096,e)}function _0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Vp(t.return,e,n)}function vf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function f1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(kt(t,e,i.children,n),i=Ce.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_0(t,n,e);else if(t.tag===19)_0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Te(Ce,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&$u(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),vf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&$u(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}vf(e,!0,n,null,s);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QR(t,e,n){switch(e.tag){case 3:h1(e),ro();break;case 5:jx(e);break;case 1:Bt(e.type)&&Lu(e);break;case 4:Eg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Te(Bu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Te(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?d1(t,e,n):(Te(Ce,Ce.current&1),t=fi(t,e,n),t!==null?t.sibling:null);Te(Ce,Ce.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return f1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Te(Ce,Ce.current),i)break;return null;case 22:case 23:return e.lanes=0,c1(t,e,n)}return fi(t,e,n)}var p1,$p,m1,g1;p1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$p=function(){};m1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ur(On.current);var s=null;switch(n){case"input":r=hp(t,r),i=hp(t,i),s=[];break;case"select":r=Me({},r,{value:void 0}),i=Me({},i,{value:void 0}),s=[];break;case"textarea":r=pp(t,r),i=pp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vu)}gp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ka.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};g1=function(t,e,n,i){n!==i&&(e.flags|=4)};function na(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function YR(t,e,n){var i=e.pendingProps;switch(mg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Bt(e.type)&&Nu(),ft(e),null;case 3:return i=e.stateNode,oo(),be(jt),be(xt),xg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(Xp(yn),yn=null))),$p(t,e),ft(e),null;case 5:Sg(e);var r=Ur(rl.current);if(n=e.type,t!==null&&e.stateNode!=null)m1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(j(166));return ft(e),null}if(t=Ur(On.current),Sc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Cn]=e,i[nl]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(r=0;r<fa.length;r++)Se(fa[r],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":A_(i,s),Se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Se("invalid",i);break;case"textarea":C_(i,s),Se("invalid",i)}gp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ec(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ec(i.textContent,a,t),r=["children",""+a]):Ka.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",i)}switch(n){case"input":pc(i),k_(i,s,!0);break;case"textarea":pc(i),R_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Vu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Cn]=e,t[nl]=i,p1(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,i),n){case"dialog":Se("cancel",t),Se("close",t),r=i;break;case"iframe":case"object":case"embed":Se("load",t),r=i;break;case"video":case"audio":for(r=0;r<fa.length;r++)Se(fa[r],t);r=i;break;case"source":Se("error",t),r=i;break;case"img":case"image":case"link":Se("error",t),Se("load",t),r=i;break;case"details":Se("toggle",t),r=i;break;case"input":A_(t,i),r=hp(t,i),Se("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Me({},i,{value:void 0}),Se("invalid",t);break;case"textarea":C_(t,i),r=pp(t,i),Se("invalid",t);break;default:r=i}gp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qa(t,l):typeof l=="number"&&qa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ka.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&eg(t,s,l,o))}switch(n){case"input":pc(t),k_(t,i,!1);break;case"textarea":pc(t),R_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+rr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?$s(t,!!i.multiple,s,!1):i.defaultValue!=null&&$s(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)g1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(j(166));if(n=Ur(rl.current),Ur(On.current),Sc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Cn]=e,(s=i.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Ec(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ec(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Cn]=e,e.stateNode=i}return ft(e),null;case 13:if(be(Ce),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Wt!==null&&e.mode&1&&!(e.flags&128))Ox(),ro(),e.flags|=98560,s=!1;else if(s=Sc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Cn]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),s=!1}else yn!==null&&(Xp(yn),yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?qe===0&&(qe=3):Ng())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return oo(),$p(t,e),t===null&&el(e.stateNode.containerInfo),ft(e),null;case 10:return _g(e.type._context),ft(e),null;case 17:return Bt(e.type)&&Nu(),ft(e),null;case 19:if(be(Ce),s=e.memoizedState,s===null)return ft(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)na(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$u(t),o!==null){for(e.flags|=128,na(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ce,Ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>lo&&(e.flags|=128,i=!0,na(s,!1),e.lanes=4194304)}else{if(!i)if(t=$u(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return ft(e),null}else 2*je()-s.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,i=!0,na(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ce.current,Te(Ce,i?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Vg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ht&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function XR(t,e){switch(mg(e),e.tag){case 1:return Bt(e.type)&&Nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),be(jt),be(xt),xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sg(e),null;case 13:if(be(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ce),null;case 4:return oo(),null;case 10:return _g(e.type._context),null;case 22:case 23:return Vg(),null;case 24:return null;default:return null}}var bc=!1,vt=!1,JR=typeof WeakSet=="function"?WeakSet:Set,H=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ne(t,e,i)}else n.current=null}function Hp(t,e,n){try{n()}catch(i){Ne(t,e,i)}}var w0=!1;function ZR(t,e){if(Pp=Du,t=Tx(),fg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ap={focusedElem:t,selectionRange:n},Du=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,x=v.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?T:mn(e.type,T),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(C){Ne(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=w0,w0=!1,v}function Ra(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Hp(e,n,s)}r=r.next}while(r!==i)}}function jh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Wp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y1(t){var e=t.alternate;e!==null&&(t.alternate=null,y1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[nl],delete e[Rp],delete e[VR],delete e[NR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v1(t){return t.tag===5||t.tag===3||t.tag===4}function T0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(i!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}function qp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}var nt=null,gn=!1;function Si(t,e,n){for(n=n.child;n!==null;)_1(t,e,n),n=n.sibling}function _1(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Rh,n)}catch{}switch(n.tag){case 5:vt||Os(n,e);case 6:var i=nt,r=gn;nt=null,Si(t,e,n),nt=i,gn=r,nt!==null&&(gn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(gn?(t=nt,n=n.stateNode,t.nodeType===8?hf(t.parentNode,n):t.nodeType===1&&hf(t,n),Xa(t)):hf(nt,n.stateNode));break;case 4:i=nt,r=gn,nt=n.stateNode.containerInfo,gn=!0,Si(t,e,n),nt=i,gn=r;break;case 0:case 11:case 14:case 15:if(!vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hp(n,e,o),r=r.next}while(r!==i)}Si(t,e,n);break;case 1:if(!vt&&(Os(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ne(n,e,a)}Si(t,e,n);break;case 21:Si(t,e,n);break;case 22:n.mode&1?(vt=(i=vt)||n.memoizedState!==null,Si(t,e,n),vt=i):Si(t,e,n);break;default:Si(t,e,n)}}function E0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JR),e.forEach(function(i){var r=lD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,gn=!1;break e;case 3:nt=a.stateNode.containerInfo,gn=!0;break e;case 4:nt=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(nt===null)throw Error(j(160));_1(s,o,r),nt=null,gn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ne(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w1(e,t),e=e.sibling}function w1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),In(t),i&4){try{Ra(3,t,t.return),jh(3,t)}catch(T){Ne(t,t.return,T)}try{Ra(5,t,t.return)}catch(T){Ne(t,t.return,T)}}break;case 1:pn(e,t),In(t),i&512&&n!==null&&Os(n,n.return);break;case 5:if(pn(e,t),In(t),i&512&&n!==null&&Os(n,n.return),t.flags&32){var r=t.stateNode;try{qa(r,"")}catch(T){Ne(t,t.return,T)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&zS(r,s),yp(a,o);var c=yp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?qS(r,d):h==="dangerouslySetInnerHTML"?WS(r,d):h==="children"?qa(r,d):eg(r,h,d,c)}switch(a){case"input":dp(r,s);break;case"textarea":$S(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?$s(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?$s(r,!!s.multiple,s.defaultValue,!0):$s(r,!!s.multiple,s.multiple?[]:"",!1))}r[nl]=s}catch(T){Ne(t,t.return,T)}}break;case 6:if(pn(e,t),In(t),i&4){if(t.stateNode===null)throw Error(j(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(T){Ne(t,t.return,T)}}break;case 3:if(pn(e,t),In(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(e.containerInfo)}catch(T){Ne(t,t.return,T)}break;case 4:pn(e,t),In(t);break;case 13:pn(e,t),In(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Mg=je())),i&4&&E0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,pn(e,t),vt=c):pn(e,t),In(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ra(4,f,f.return);break;case 1:Os(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(T){Ne(i,n,T)}}break;case 5:Os(f,f.return);break;case 22:if(f.memoizedState!==null){x0(d);continue}}m!==null?(m.return=f,H=m):x0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=KS("display",o))}catch(T){Ne(t,t.return,T)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(T){Ne(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pn(e,t),In(t),i&4&&E0(t);break;case 21:break;default:pn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v1(n)){var i=n;break e}n=n.return}throw Error(j(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(qa(r,""),i.flags&=-33);var s=T0(t);qp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=T0(t);Kp(t,a,o);break;default:throw Error(j(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eD(t,e,n){H=t,T1(t)}function T1(t,e,n){for(var i=(t.mode&1)!==0;H!==null;){var r=H,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||bc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vt;a=bc;var c=vt;if(bc=o,(vt=l)&&!c)for(H=r;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?I0(r):l!==null?(l.return=o,H=l):I0(r);for(;s!==null;)H=s,T1(s),s=s.sibling;H=r,bc=a,vt=c}S0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,H=s):S0(t)}}function S0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||jh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&a0(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Xa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}vt||e.flags&512&&Wp(e)}catch(f){Ne(e,e.return,f)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function x0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function I0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jh(4,e)}catch(l){Ne(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ne(e,r,l)}}var s=e.return;try{Wp(e)}catch(l){Ne(e,s,l)}break;case 5:var o=e.return;try{Wp(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var tD=Math.ceil,Ku=vi.ReactCurrentDispatcher,Rg=vi.ReactCurrentOwner,ln=vi.ReactCurrentBatchConfig,le=0,Xe=null,$e=null,ot=0,Ht=0,Vs=yr(0),qe=0,ll=null,Zr=0,Bh=0,Dg=0,Da=null,Vt=null,Mg=0,lo=1/0,Qn=null,qu=!1,Gp=null,Ki=null,Pc=!1,Li=null,Gu=0,Ma=0,Qp=null,ou=-1,au=0;function Ct(){return le&6?je():ou!==-1?ou:ou=je()}function qi(t){return t.mode&1?le&2&&ot!==0?ot&-ot:FR.transition!==null?(au===0&&(au=sx()),au):(t=me,t!==0||(t=window.event,t=t===void 0?16:dx(t.type)),t):1}function Tn(t,e,n,i){if(50<Ma)throw Ma=0,Qp=null,Error(j(185));Al(t,n,i),(!(le&2)||t!==Xe)&&(t===Xe&&(!(le&2)&&(Bh|=n),qe===4&&Ri(t,ot)),Ut(t,i),n===1&&le===0&&!(e.mode&1)&&(lo=je()+500,Nh&&vr()))}function Ut(t,e){var n=t.callbackNode;FC(t,e);var i=Ru(t,t===Xe?ot:0);if(i===0)n!==null&&O_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&O_(n),e===1)t.tag===0?LR(b0.bind(null,t)):Rx(b0.bind(null,t)),MR(function(){!(le&6)&&vr()}),n=null;else{switch(ox(i)){case 1:n=sg;break;case 4:n=ix;break;case 16:n=Cu;break;case 536870912:n=rx;break;default:n=Cu}n=k1(n,E1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E1(t,e){if(ou=-1,au=0,le&6)throw Error(j(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var i=Ru(t,t===Xe?ot:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Qu(t,i);else{e=i;var r=le;le|=2;var s=x1();(Xe!==t||ot!==e)&&(Qn=null,lo=je()+500,Wr(t,e));do try{rD();break}catch(a){S1(t,a)}while(!0);vg(),Ku.current=s,le=r,$e!==null?e=0:(Xe=null,ot=0,e=qe)}if(e!==0){if(e===2&&(r=Ep(t),r!==0&&(i=r,e=Yp(t,r))),e===1)throw n=ll,Wr(t,0),Ri(t,i),Ut(t,je()),n;if(e===6)Ri(t,i);else{if(r=t.current.alternate,!(i&30)&&!nD(r)&&(e=Qu(t,i),e===2&&(s=Ep(t),s!==0&&(i=s,e=Yp(t,s))),e===1))throw n=ll,Wr(t,0),Ri(t,i),Ut(t,je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(j(345));case 2:Or(t,Vt,Qn);break;case 3:if(Ri(t,i),(i&130023424)===i&&(e=Mg+500-je(),10<e)){if(Ru(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Cp(Or.bind(null,t,Vt,Qn),e);break}Or(t,Vt,Qn);break;case 4:if(Ri(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-wn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tD(i/1960))-i,10<i){t.timeoutHandle=Cp(Or.bind(null,t,Vt,Qn),i);break}Or(t,Vt,Qn);break;case 5:Or(t,Vt,Qn);break;default:throw Error(j(329))}}}return Ut(t,je()),t.callbackNode===n?E1.bind(null,t):null}function Yp(t,e){var n=Da;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Xp(e)),t}function Xp(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function nD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Sn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ri(t,e){for(e&=~Dg,e&=~Bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),i=1<<n;t[n]=-1,e&=~i}}function b0(t){if(le&6)throw Error(j(327));Gs();var e=Ru(t,0);if(!(e&1))return Ut(t,je()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var i=Ep(t);i!==0&&(e=i,n=Yp(t,i))}if(n===1)throw n=ll,Wr(t,0),Ri(t,e),Ut(t,je()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Or(t,Vt,Qn),Ut(t,je()),null}function Og(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(lo=je()+500,Nh&&vr())}}function es(t){Li!==null&&Li.tag===0&&!(le&6)&&Gs();var e=le;le|=1;var n=ln.transition,i=me;try{if(ln.transition=null,me=1,t)return t()}finally{me=i,ln.transition=n,le=e,!(le&6)&&vr()}}function Vg(){Ht=Vs.current,be(Vs)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DR(n)),$e!==null)for(n=$e.return;n!==null;){var i=n;switch(mg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nu();break;case 3:oo(),be(jt),be(xt),xg();break;case 5:Sg(i);break;case 4:oo();break;case 13:be(Ce);break;case 19:be(Ce);break;case 10:_g(i.type._context);break;case 22:case 23:Vg()}n=n.return}if(Xe=t,$e=t=Gi(t.current,null),ot=Ht=e,qe=0,ll=null,Dg=Bh=Zr=0,Vt=Da=null,Br!==null){for(e=0;e<Br.length;e++)if(n=Br[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Br=null}return t}function S1(t,e){do{var n=$e;try{if(vg(),iu.current=Wu,Hu){for(var i=De.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Hu=!1}if(Jr=0,Ye=He=De=null,Ca=!1,sl=0,Rg.current=null,n===null||n.return===null){qe=1,ll=e,$e=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=f0(o);if(m!==null){m.flags&=-257,p0(m,o,a,s,e),m.mode&1&&d0(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var T=new Set;T.add(l),e.updateQueue=T}else v.add(l);break e}else{if(!(e&1)){d0(s,c,e),Ng();break e}l=Error(j(426))}}else if(Ae&&a.mode&1){var x=f0(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),p0(x,o,a,s,e),gg(ao(l,a));break e}}s=l=ao(l,a),qe!==4&&(qe=2),Da===null?Da=[s]:Da.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=o1(s,l,e);o0(s,y);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ki===null||!Ki.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=a1(s,a,e);o0(s,C);break e}}s=s.return}while(s!==null)}b1(n)}catch(D){e=D,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function x1(){var t=Ku.current;return Ku.current=Wu,t===null?Wu:t}function Ng(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||!(Zr&268435455)&&!(Bh&268435455)||Ri(Xe,ot)}function Qu(t,e){var n=le;le|=2;var i=x1();(Xe!==t||ot!==e)&&(Qn=null,Wr(t,e));do try{iD();break}catch(r){S1(t,r)}while(!0);if(vg(),le=n,Ku.current=i,$e!==null)throw Error(j(261));return Xe=null,ot=0,qe}function iD(){for(;$e!==null;)I1($e)}function rD(){for(;$e!==null&&!kC();)I1($e)}function I1(t){var e=A1(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?b1(t):$e=e,Rg.current=null}function b1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XR(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,$e=null;return}}else if(n=YR(n,e,Ht),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);qe===0&&(qe=5)}function Or(t,e,n){var i=me,r=ln.transition;try{ln.transition=null,me=1,sD(t,e,n,i)}finally{ln.transition=r,me=i}return null}function sD(t,e,n,i){do Gs();while(Li!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jC(t,s),t===Xe&&($e=Xe=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pc||(Pc=!0,k1(Cu,function(){return Gs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ln.transition,ln.transition=null;var o=me;me=1;var a=le;le|=4,Rg.current=null,ZR(t,n),w1(n,t),IR(Ap),Du=!!Pp,Ap=Pp=null,t.current=n,eD(n),CC(),le=a,me=o,ln.transition=s}else t.current=n;if(Pc&&(Pc=!1,Li=t,Gu=r),s=t.pendingLanes,s===0&&(Ki=null),MC(n.stateNode),Ut(t,je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(qu)throw qu=!1,t=Gp,Gp=null,t;return Gu&1&&t.tag!==0&&Gs(),s=t.pendingLanes,s&1?t===Qp?Ma++:(Ma=0,Qp=t):Ma=0,vr(),null}function Gs(){if(Li!==null){var t=ox(Gu),e=ln.transition,n=me;try{if(ln.transition=null,me=16>t?16:t,Li===null)var i=!1;else{if(t=Li,Li=null,Gu=0,le&6)throw Error(j(331));var r=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Ra(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,m=h.return;if(y1(h),h===c){H=null;break}if(f!==null){f.return=m,H=f;break}H=m}}}var v=s.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var x=T.sibling;T.sibling=null,T=x}while(T!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,H=y;break e}H=s.return}}var w=t.current;for(H=w;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=w;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jh(9,a)}}catch(D){Ne(a,a.return,D)}if(a===o){H=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,H=C;break e}H=a.return}}if(le=r,vr(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Rh,t)}catch{}i=!0}return i}finally{me=n,ln.transition=e}}return!1}function P0(t,e,n){e=ao(n,e),e=o1(t,e,1),t=Wi(t,e,1),e=Ct(),t!==null&&(Al(t,1,e),Ut(t,e))}function Ne(t,e,n){if(t.tag===3)P0(t,t,n);else for(;e!==null;){if(e.tag===3){P0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ki===null||!Ki.has(i))){t=ao(n,t),t=a1(e,t,1),e=Wi(e,t,1),t=Ct(),e!==null&&(Al(e,1,t),Ut(e,t));break}}e=e.return}}function oD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(ot&n)===n&&(qe===4||qe===3&&(ot&130023424)===ot&&500>je()-Mg?Wr(t,0):Dg|=n),Ut(t,e)}function P1(t,e){e===0&&(t.mode&1?(e=yc,yc<<=1,!(yc&130023424)&&(yc=4194304)):e=1);var n=Ct();t=di(t,e),t!==null&&(Al(t,e,n),Ut(t,n))}function aD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P1(t,n)}function lD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(j(314))}i!==null&&i.delete(e),P1(t,n)}var A1;A1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,QR(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Ae&&e.flags&1048576&&Dx(e,ju,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;su(t,e),t=e.pendingProps;var r=io(e,xt.current);qs(e,n),r=bg(null,e,i,t,r,n);var s=Pg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(i)?(s=!0,Lu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Tg(e),r.updater=Fh,e.stateNode=r,r._reactInternals=e,Lp(e,i,t,n),e=Bp(null,e,i,!0,s,n)):(e.tag=0,Ae&&s&&pg(e),kt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(su(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=uD(i),t=mn(i,t),r){case 0:e=jp(null,e,i,t,n);break e;case 1:e=y0(null,e,i,t,n);break e;case 11:e=m0(null,e,i,t,n);break e;case 14:e=g0(null,e,i,mn(i.type,t),n);break e}throw Error(j(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),jp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),y0(t,e,i,r,n);case 3:e:{if(h1(e),t===null)throw Error(j(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Fx(t,e),zu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ao(Error(j(423)),e),e=v0(t,e,i,n,r);break e}else if(i!==r){r=ao(Error(j(424)),e),e=v0(t,e,i,n,r);break e}else for(Wt=Hi(e.stateNode.containerInfo.firstChild),qt=e,Ae=!0,yn=null,n=Nx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),i===r){e=fi(t,e,n);break e}kt(t,e,i,n)}e=e.child}return e;case 5:return jx(e),t===null&&Op(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,kp(i,r)?o=null:s!==null&&kp(i,s)&&(e.flags|=32),u1(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Op(e),null;case 13:return d1(t,e,n);case 4:return Eg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=so(e,null,i,n):kt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),m0(t,e,i,r,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Te(Bu,i._currentValue),i._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===r.children&&!jt.current){e=fi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ri(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Vp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,qs(e,n),r=cn(r),i=i(r),e.flags|=1,kt(t,e,i,n),e.child;case 14:return i=e.type,r=mn(i,e.pendingProps),r=mn(i.type,r),g0(t,e,i,r,n);case 15:return l1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),su(t,e),e.tag=1,Bt(i)?(t=!0,Lu(e)):t=!1,qs(e,n),s1(e,i,r),Lp(e,i,r,n),Bp(null,e,i,!0,t,n);case 19:return f1(t,e,n);case 22:return c1(t,e,n)}throw Error(j(156,e.tag))};function k1(t,e){return nx(t,e)}function cD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,i){return new cD(t,e,n,i)}function Lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uD(t){if(typeof t=="function")return Lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ng)return 11;if(t===ig)return 14}return 2}function Gi(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Lg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return Kr(n.children,r,s,e);case tg:o=8,r|=8;break;case ap:return t=on(12,n,e,r|2),t.elementType=ap,t.lanes=s,t;case lp:return t=on(13,n,e,r),t.elementType=lp,t.lanes=s,t;case cp:return t=on(19,n,e,r),t.elementType=cp,t.lanes=s,t;case jS:return Uh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LS:o=10;break e;case FS:o=9;break e;case ng:o=11;break e;case ig:o=14;break e;case Pi:o=16,i=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=on(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Kr(t,e,n,i){return t=on(7,t,i,e),t.lanes=n,t}function Uh(t,e,n,i){return t=on(22,t,i,e),t.elementType=jS,t.lanes=n,t.stateNode={isHidden:!1},t}function _f(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function wf(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zd(0),this.expirationTimes=Zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fg(t,e,n,i,r,s,o,a,l){return t=new hD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=on(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tg(s),t}function dD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function C1(t){if(!t)return sr;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Bt(n))return Cx(t,n,e)}return e}function R1(t,e,n,i,r,s,o,a,l){return t=Fg(n,i,!0,t,r,s,o,a,l),t.context=C1(null),n=t.current,i=Ct(),r=qi(n),s=ri(i,r),s.callback=e??null,Wi(n,s,r),t.current.lanes=r,Al(t,r,i),Ut(t,i),t}function zh(t,e,n,i){var r=e.current,s=Ct(),o=qi(r);return n=C1(n),e.context===null?e.context=n:e.pendingContext=n,e=ri(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wi(r,e,o),t!==null&&(Tn(t,r,o,s),nu(t,r,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function A0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jg(t,e){A0(t,e),(t=t.alternate)&&A0(t,e)}function fD(){return null}var D1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bg(t){this._internalRoot=t}$h.prototype.render=Bg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));zh(t,e,null,null)};$h.prototype.unmount=Bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){zh(null,t,null,null)}),e[hi]=null}};function $h(t){this._internalRoot=t}$h.prototype.unstable_scheduleHydration=function(t){if(t){var e=cx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&hx(t)}};function Ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k0(){}function pD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Yu(o);s.call(c)}}var o=R1(e,i,t,0,null,!1,!1,"",k0);return t._reactRootContainer=o,t[hi]=o.current,el(t.nodeType===8?t.parentNode:t),es(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Yu(l);a.call(c)}}var l=Fg(t,0,!1,null,null,!1,!1,"",k0);return t._reactRootContainer=l,t[hi]=l.current,el(t.nodeType===8?t.parentNode:t),es(function(){zh(e,l,n,i)}),l}function Wh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Yu(o);a.call(l)}}zh(e,o,t,r)}else o=pD(n,e,t,r,i);return Yu(o)}ax=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=da(e.pendingLanes);n!==0&&(og(e,n|1),Ut(e,je()),!(le&6)&&(lo=je()+500,vr()))}break;case 13:es(function(){var i=di(t,1);if(i!==null){var r=Ct();Tn(i,t,1,r)}}),jg(t,1)}};ag=function(t){if(t.tag===13){var e=di(t,134217728);if(e!==null){var n=Ct();Tn(e,t,134217728,n)}jg(t,134217728)}};lx=function(t){if(t.tag===13){var e=qi(t),n=di(t,e);if(n!==null){var i=Ct();Tn(n,t,e,i)}jg(t,e)}};cx=function(){return me};ux=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};_p=function(t,e,n){switch(e){case"input":if(dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Vh(i);if(!r)throw Error(j(90));US(i),dp(i,r)}}}break;case"textarea":$S(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};YS=Og;XS=es;var mD={usingClientEntryPoint:!1,Events:[Cl,ks,Vh,GS,QS,Og]},ia={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gD={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ex(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||fD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Rh=Ac.inject(gD),Mn=Ac}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mD;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ug(e))throw Error(j(200));return dD(t,e,null,n)};Xt.createRoot=function(t,e){if(!Ug(t))throw Error(j(299));var n=!1,i="",r=D1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fg(t,1,!1,null,null,n,!1,i,r),t[hi]=e.current,el(t.nodeType===8?t.parentNode:t),new Bg(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=ex(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return es(t)};Xt.hydrate=function(t,e,n){if(!Hh(e))throw Error(j(200));return Wh(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Ug(t))throw Error(j(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=D1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=R1(e,null,t,1,n??null,r,!1,s,o),t[hi]=e.current,el(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new $h(e)};Xt.render=function(t,e,n){if(!Hh(e))throw Error(j(200));return Wh(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Hh(t))throw Error(j(40));return t._reactRootContainer?(es(function(){Wh(null,null,t,!1,function(){t._reactRootContainer=null,t[hi]=null})}),!0):!1};Xt.unstable_batchedUpdates=Og;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Hh(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Wh(t,e,n,!1,i)};Xt.version="18.3.1-next-f1338f8080-20240426";function M1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M1)}catch(t){console.error(t)}}M1(),MS.exports=Xt;var yD=MS.exports,O1,C0=yD;O1=C0.createRoot,C0.hydrateRoot;var R0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},vD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},N1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(V1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new _D;const f=s<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _D extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wD=function(t){const e=V1(t);return N1.encodeByteArray(e,!0)},Xu=function(t){return wD(t).replace(/\./g,"")},L1=function(t){try{return N1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=()=>TD().__FIREBASE_DEFAULTS__,SD=()=>{if(typeof process>"u"||typeof R0>"u")return;const t=R0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&L1(t[1]);return e&&JSON.parse(e)},Kh=()=>{try{return ED()||SD()||xD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},F1=t=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ID=t=>{const e=F1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},j1=()=>{var t;return(t=Kh())===null||t===void 0?void 0:t.config},B1=t=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xu(JSON.stringify(n)),Xu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function kD(){var t;const e=(t=Kh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MD(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OD(){return!kD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VD(){try{return typeof indexedDB=="object"}catch{return!1}}function ND(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="FirebaseError";class _i extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=LD,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?FD(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _i(r,a,i)}}function FD(t,e){return t.replace(jD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const jD=/\{\$([^}]+)}/g;function BD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ju(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(D0(s)&&D0(o)){if(!Ju(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ma(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UD(t,e){const n=new zD(t,e);return n.subscribe.bind(n)}class zD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$D(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Tf),r.error===void 0&&(r.error=Tf),r.complete===void 0&&(r.complete=Tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $D(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new bD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KD(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WD(t){return t===Vr?void 0:t}function KD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const GD={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},QD=ne.INFO,YD={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},XD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=YD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zg{constructor(e){this.name=e,this._logLevel=QD,this._logHandler=XD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const JD=(t,e)=>e.some(n=>t instanceof n);let M0,O0;function ZD(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eM(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U1=new WeakMap,Jp=new WeakMap,z1=new WeakMap,Ef=new WeakMap,$g=new WeakMap;function tM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&U1.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function nM(t){if(Jp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Jp.set(t,e)}let Zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iM(t){Zp=t(Zp)}function rM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sf(this),e,...n);return z1.set(i,e.sort?e.sort():[e]),Qi(i)}:eM().includes(t)?function(...e){return t.apply(Sf(this),e),Qi(U1.get(this))}:function(...e){return Qi(t.apply(Sf(this),e))}}function sM(t){return typeof t=="function"?rM(t):(t instanceof IDBTransaction&&nM(t),JD(t,ZD())?new Proxy(t,Zp):t)}function Qi(t){if(t instanceof IDBRequest)return tM(t);if(Ef.has(t))return Ef.get(t);const e=sM(t);return e!==t&&(Ef.set(t,e),$g.set(e,t)),e}const Sf=t=>$g.get(t);function oM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Qi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Qi(o.result),l.oldVersion,l.newVersion,Qi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aM=["get","getKey","getAll","getAllKeys","count"],lM=["put","add","delete","clear"],xf=new Map;function V0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=lM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return xf.set(e,s),s}iM(t=>({...t,get:(e,n,i)=>V0(e,n)||t.get(e,n,i),has:(e,n)=>!!V0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function uM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const em="@firebase/app",N0="0.10.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new zg("@firebase/app"),hM="@firebase/app-compat",dM="@firebase/analytics-compat",fM="@firebase/analytics",pM="@firebase/app-check-compat",mM="@firebase/app-check",gM="@firebase/auth",yM="@firebase/auth-compat",vM="@firebase/database",_M="@firebase/data-connect",wM="@firebase/database-compat",TM="@firebase/functions",EM="@firebase/functions-compat",SM="@firebase/installations",xM="@firebase/installations-compat",IM="@firebase/messaging",bM="@firebase/messaging-compat",PM="@firebase/performance",AM="@firebase/performance-compat",kM="@firebase/remote-config",CM="@firebase/remote-config-compat",RM="@firebase/storage",DM="@firebase/storage-compat",MM="@firebase/firestore",OM="@firebase/vertexai",VM="@firebase/firestore-compat",NM="firebase",LM="11.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",FM={[em]:"fire-core",[hM]:"fire-core-compat",[fM]:"fire-analytics",[dM]:"fire-analytics-compat",[mM]:"fire-app-check",[pM]:"fire-app-check-compat",[gM]:"fire-auth",[yM]:"fire-auth-compat",[vM]:"fire-rtdb",[_M]:"fire-data-connect",[wM]:"fire-rtdb-compat",[TM]:"fire-fn",[EM]:"fire-fn-compat",[SM]:"fire-iid",[xM]:"fire-iid-compat",[IM]:"fire-fcm",[bM]:"fire-fcm-compat",[PM]:"fire-perf",[AM]:"fire-perf-compat",[kM]:"fire-rc",[CM]:"fire-rc-compat",[RM]:"fire-gcs",[DM]:"fire-gcs-compat",[MM]:"fire-fst",[VM]:"fire-fst-compat",[OM]:"fire-vertex","fire-js":"fire-js",[NM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,jM=new Map,nm=new Map;function L0(t,e){try{t.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function co(t){const e=t.name;if(nm.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,t);for(const n of Zu.values())L0(n,t);for(const n of jM.values())L0(n,t);return!0}function Hg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Dl("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=LM;function $1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Yi.create("bad-app-name",{appName:String(r)});if(n||(n=j1()),!n)throw Yi.create("no-options");const s=Zu.get(r);if(s){if(Ju(n,s.options)&&Ju(i,s.config))return s;throw Yi.create("duplicate-app",{appName:r})}const o=new qD(r);for(const l of nm.values())o.addComponent(l);const a=new UM(n,i,o);return Zu.set(r,a),a}function H1(t=tm){const e=Zu.get(t);if(!e&&t===tm&&j1())return $1();if(!e)throw Yi.create("no-app",{appName:t});return e}function Xi(t,e,n){var i;let r=(i=FM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(a.join(" "));return}co(new ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="firebase-heartbeat-database",$M=1,cl="firebase-heartbeat-store";let If=null;function W1(){return If||(If=oM(zM,$M,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yi.create("idb-open",{originalErrorMessage:t.message})})),If}async function HM(t){try{const n=(await W1()).transaction(cl),i=await n.objectStore(cl).get(K1(t));return await n.done,i}catch(e){if(e instanceof _i)pi.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(n.message)}}}async function F0(t,e){try{const i=(await W1()).transaction(cl,"readwrite");await i.objectStore(cl).put(e,K1(t)),await i.done}catch(n){if(n instanceof _i)pi.warn(n.message);else{const i=Yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pi.warn(i.message)}}}function K1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1024,KM=30*24*60*60*1e3;class qM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=j0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=KM}),this._storage.overwrite(this._heartbeatsCache))}catch(i){pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j0(),{heartbeatsToSend:i,unsentEntries:r}=GM(this._heartbeatsCache.heartbeats),s=Xu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pi.warn(n),""}}}function j0(){return new Date().toISOString().substring(0,10)}function GM(t,e=WM){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),B0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),B0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class QM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VD()?ND().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B0(t){return Xu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){co(new ts("platform-logger",e=>new cM(e),"PRIVATE")),co(new ts("heartbeat",e=>new qM(e),"PRIVATE")),Xi(em,N0,t),Xi(em,N0,"esm2017"),Xi("fire-js","")}YM("");function Wg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XM=q1,G1=new Dl("auth","Firebase",q1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new zg("@firebase/auth");function JM(t,...e){eh.logLevel<=ne.WARN&&eh.warn(`Auth (${bo}): ${t}`,...e)}function cu(t,...e){eh.logLevel<=ne.ERROR&&eh.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Kg(t,...e)}function Vn(t,...e){return Kg(t,...e)}function Q1(t,e,n){const i=Object.assign(Object.assign({},XM()),{[e]:n});return new Dl("auth","Firebase",i).create(e,{appName:t.name})}function si(t){return Q1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return G1.create(t,...e)}function Y(t,e,...n){if(!t)throw Kg(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cu(e),new Error(e)}function mi(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZM(){return U0()==="http:"||U0()==="https:"}function U0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZM()||RD()||"connection"in navigator)?navigator.onLine:!0}function t2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=AD()||DD()}get(){return e2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new Ol(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wr(t,e,n,i,r={}){return X1(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Ml(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return CD()||(c.referrerPolicy="no-referrer"),Y1.fetch()(J1(t,t.config.apiHost,n,a),c)})}async function X1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},n2),e);try{const r=new s2(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Q1(t,h,c);xn(t,h)}}catch(r){if(r instanceof _i)throw r;xn(t,"network-request-failed",{message:String(r)})}}async function Vl(t,e,n,i,r={}){const s=await wr(t,e,n,i,r);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function J1(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?qg(t.config,r):`${t.config.apiScheme}://${r}`}function r2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),i2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vn(t,e,i);return r.customData._tokenResponse=n,r}function z0(t){return t!==void 0&&t.enterprise!==void 0}class o2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return r2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function a2(t,e){return wr(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return wr(t,"POST","/v1/accounts:delete",e)}async function Z1(t,e){return wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c2(t,e=!1){const n=Ge(t),i=await n.getIdToken(e),r=Gg(i);Y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Oa(bf(r.auth_time)),issuedAtTime:Oa(bf(r.iat)),expirationTime:Oa(bf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bf(t){return Number(t)*1e3}function Gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return cu("JWT malformed, contained fewer than 3 sections"),null;try{const r=L1(n);return r?JSON.parse(r):(cu("Failed to decode base64 JWT payload"),null)}catch(r){return cu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $0(t){const e=Gg(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _i&&u2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function u2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ul(t,Z1(n,{idToken:i}));Y(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eI(s.providerUserInfo):[],a=f2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function d2(t){const e=Ge(t);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f2(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function eI(t){return t.map(e=>{var{providerId:n}=e,i=Wg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){const n=await X1(t,{},async()=>{const i=Ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=J1(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Y1.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m2(t,e){return wr(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=$0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await p2(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Qs;return i&&(Y(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ul(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c2(this,e)}reload(){return d2(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await th(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await ul(this,l2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:C,isAnonymous:D,providerData:V,stsTokenManager:I}=n;Y(S&&I,e,"internal-error");const _=Qs.fromJSON(this.name,I);Y(typeof S=="string",e,"internal-error"),xi(d,e.name),xi(f,e.name),Y(typeof C=="boolean",e,"internal-error"),Y(typeof D=="boolean",e,"internal-error"),xi(m,e.name),xi(v,e.name),xi(T,e.name),xi(x,e.name),xi(y,e.name),xi(w,e.name);const b=new ti({uid:S,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:m,tenantId:T,stsTokenManager:_,createdAt:y,lastLoginAt:w});return V&&Array.isArray(V)&&(b.providerData=V.map(P=>Object.assign({},P))),x&&(b._redirectEventId=x),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Qs;r.updateFromServerResponse(n);const s=new ti({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await th(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Y(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?eI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Qs;a.updateFromIdToken(i);const l=new ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new rm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function ni(t){mi(t instanceof Function,"Expected a class definition");let e=H0.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tI.type="NONE";const W0=tI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=uu(this.userKey,r.apiKey,s),this.fullPersistenceKey=uu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ys(ni(W0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||ni(W0);const o=uu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=ti._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ys(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ys(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aI(e))return"Blackberry";if(lI(e))return"Webos";if(iI(e))return"Safari";if((e.includes("chrome/")||rI(e))&&!e.includes("edge/"))return"Chrome";if(oI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function nI(t=It()){return/firefox\//i.test(t)}function iI(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rI(t=It()){return/crios\//i.test(t)}function sI(t=It()){return/iemobile/i.test(t)}function oI(t=It()){return/android/i.test(t)}function aI(t=It()){return/blackberry/i.test(t)}function lI(t=It()){return/webos/i.test(t)}function Qg(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g2(t=It()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y2(){return MD()&&document.documentMode===10}function cI(t=It()){return Qg(t)||oI(t)||lI(t)||aI(t)||/windows phone/i.test(t)||sI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e=[]){let n;switch(t){case"Browser":n=K0(It());break;case"Worker":n=`${K0(It())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e={}){return wr(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=6;class T2{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:w2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q0(this),this.idTokenSubscription=new q0(this),this.beforeStateQueue=new v2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Z1(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(si(this));const n=e?Ge(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _2(this),n=new T2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await m2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ls(t){return Ge(t)}class q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UD(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S2(t){qh=t}function hI(t){return qh.loadJS(t)}function x2(){return qh.recaptchaEnterpriseScript}function I2(){return qh.gapiScript}function b2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class P2{constructor(){this.enterprise=new A2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class A2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const k2="recaptcha-enterprise",dI="NO_RECAPTCHA";class C2{constructor(e){this.type=k2,this.auth=ls(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{a2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new o2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;z0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(dI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&z0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=x2();l.length!==0&&(l+=a),hI(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function G0(t,e,n,i=!1,r=!1){const s=new C2(t);let o;if(r)o=dI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sm(t,e,n,i,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await G0(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await G0(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e){const n=Hg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ju(s,e??{}))return r;xn(r,"already-initialized")}return n.initialize({options:e})}function D2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function M2(t,e,n){const i=ls(t);Y(i._canInitEmulator,i,"emulator-config-failed"),Y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=fI(e),{host:o,port:a}=O2(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),V2()}function fI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function O2(t){const e=fI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Q0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Q0(o)}}}function Q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function V2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function N2(t,e){return wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e){return Vl(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e){return Vl(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function j2(t,e){return Vl(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Yg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new hl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new hl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",L2);case"emailLink":return F2(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,i,"signUpPassword",N2);case"emailLink":return j2(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return Vl(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="http://localhost";class ns extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Wg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ns(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Xs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:B2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ml(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function z2(t){const e=pa(ma(t)).link,n=e?pa(ma(e)).deep_link_id:null,i=pa(ma(t)).deep_link_id;return(i?pa(ma(i)).link:null)||i||n||e||t}class Xg{constructor(e){var n,i,r,s,o,a;const l=pa(ma(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=U2((r=l.mode)!==null&&r!==void 0?r:null);Y(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=z2(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xg.parseLink(n);return Y(i,"argument-error"),hl._fromEmailAndCode(e,i.code,i.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends pI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Nl{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Nl{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Nl{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e){return Vl(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ti._fromIdTokenResponse(e,i,r),o=Y0(i);return new is({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Y0(i);return new is({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Y0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends _i{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new nh(e,n,i,r)}}function mI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(t,s,e,i):s})}async function H2(t,e,n=!1){const i=await ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e,n=!1){const{auth:i}=t;if(Rn(i.app))return Promise.reject(si(i));const r="reauthenticate";try{const s=await ul(t,mI(i,r,e,t),n);Y(s.idToken,i,"internal-error");const o=Gg(s.idToken);Y(o,i,"internal-error");const{sub:a}=o;return Y(t.uid===a,i,"user-mismatch"),is._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(t,e,n=!1){if(Rn(t.app))return Promise.reject(si(t));const i="signIn",r=await mI(t,i,e),s=await is._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function K2(t,e){return gI(ls(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t){const e=ls(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q2(t,e,n){if(Rn(t.app))return Promise.reject(si(t));const i=ls(t),o=await sm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$2).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&yI(t),l}),a=await is._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function G2(t,e,n){return Rn(t.app)?Promise.reject(si(t)):K2(Ge(t),Po.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&yI(t),i})}function Q2(t,e,n,i){return Ge(t).onIdTokenChanged(e,n,i)}function Y2(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function vI(t,e,n,i){return Ge(t).onAuthStateChanged(e,n,i)}function _I(t){return Ge(t).signOut()}const ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=1e3,J2=10;class TI extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);y2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,J2):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},X2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const Z2=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EI.type="SESSION";const SI=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Gh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await eO(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function nO(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function iO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sO(){return xI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebaseLocalStorageDb",oO=1,rh="firebaseLocalStorage",bI="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qh(t,e){return t.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function aO(){const t=indexedDB.deleteDatabase(II);return new Ll(t).toPromise()}function om(){const t=indexedDB.open(II,oO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(rh,{keyPath:bI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(rh)?e(i):(i.close(),await aO(),e(await om()))})})}async function X0(t,e,n){const i=Qh(t,!0).put({[bI]:e,value:n});return new Ll(i).toPromise()}async function lO(t,e){const n=Qh(t,!1).get(e),i=await new Ll(n).toPromise();return i===void 0?null:i.value}function J0(t,e){const n=Qh(t,!0).delete(e);return new Ll(n).toPromise()}const cO=800,uO=3;class PI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>uO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(sO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iO(),!this.activeServiceWorker)return;this.sender=new tO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await X0(e,ih,"1"),await J0(e,ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>X0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>lO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Qh(r,!1).getAll();return new Ll(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PI.type="LOCAL";const hO=PI;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e){return e?ni(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fO(t){return gI(t.auth,new Zg(t),t.bypassAuthState)}function pO(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),W2(n,new Zg(t),t.bypassAuthState)}async function mO(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),H2(n,new Zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fO;case"linkViaPopup":case"linkViaRedirect":return mO;case"reauthViaPopup":case"reauthViaRedirect":return pO;default:xn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Ol(2e3,1e4);class Ns extends AI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gO.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="pendingRedirect",hu=new Map;class vO extends AI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hu.get(this.auth._key());if(!e){try{const i=await _O(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hu.set(this.auth._key(),e)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _O(t,e){const n=EO(e),i=TO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function wO(t,e){hu.set(t._key(),e)}function TO(t){return ni(t._redirectPersistence)}function EO(t){return uu(yO,t.config.apiKey,t.name)}async function SO(t,e,n=!1){if(Rn(t.app))return Promise.reject(si(t));const i=ls(t),r=dO(i,e),o=await new vO(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=10*60*1e3;class IO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!kI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e={}){return wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kO=/^https?/;async function CO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PO(t);for(const n of e)try{if(RO(n))return}catch{}xn(t,"unauthorized-domain")}function RO(t){const e=im(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!kO.test(n))return!1;if(AO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new Ol(3e4,6e4);function ew(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MO(t){return new Promise((e,n)=>{var i,r,s;function o(){ew(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ew(),n(Vn(t,"network-request-failed"))},timeout:DO.get()})}if(!((r=(i=Nn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Nn().gapi)===null||s===void 0)&&s.load)o();else{const a=b2("iframefcb");return Nn()[a]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},hI(`${I2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw du=null,e})}let du=null;function OO(t){return du=du||MO(t),du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Ol(5e3,15e3),NO="__/auth/iframe",LO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BO(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qg(e,LO):`https://${t.config.authDomain}/${NO}`,i={apiKey:e.apiKey,appName:t.name,v:bo},r=jO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ml(i).slice(1)}`}async function UO(t){const e=await OO(t),n=Nn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:BO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),a=Nn().setTimeout(()=>{s(o)},VO.get());function l(){Nn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$O=500,HO=600,WO="_blank",KO="http://localhost";class tw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qO(t,e,n,i=$O,r=HO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zO),{width:i.toString(),height:r.toString(),top:s,left:o}),c=It().toLowerCase();n&&(a=rI(c)?WO:n),nI(c)&&(e=e||KO,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(g2(c)&&a!=="_self")return GO(e||"",a),new tw(null);const d=window.open(e||"",a,h);Y(d,t,"popup-blocked");try{d.focus()}catch{}return new tw(d)}function GO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="__/auth/handler",YO="emulator/auth/handler",XO=encodeURIComponent("fac");async function nw(t,e,n,i,r,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bo,eventId:r};if(e instanceof pI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Nl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${XO}=${encodeURIComponent(l)}`:"";return`${JO(t)}?${Ml(a).slice(1)}${c}`}function JO({config:t}){return t.emulator?qg(t,YO):`https://${t.authDomain}/${QO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class ZO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SI,this._completeRedirectFn=SO,this._overrideRedirectResult=wO}async _openPopup(e,n,i,r){var s;mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nw(e,n,i,im(),r);return qO(e,o,Jg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await nw(e,n,i,im(),r);return nO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await UO(e),i=new IO(e);return n.register("authEvent",r=>(Y(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Pf];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cI()||iI()||Qg()}}const eV=ZO;var iw="@firebase/auth",rw="1.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iV(t){co(new ts("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uI(t)},c=new E2(i,r,s,l);return D2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),co(new ts("auth-internal",e=>{const n=ls(e.getProvider("auth").getImmediate());return(i=>new tV(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(iw,rw,nV(t)),Xi(iw,rw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=5*60,sV=B1("authIdTokenMaxAge")||rV;let sw=null;const oV=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>sV)return;const r=n==null?void 0:n.token;sw!==r&&(sw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Ao(t=H1()){const e=Hg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R2(t,{popupRedirectResolver:eV,persistence:[hO,Z2,SI]}),i=B1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=oV(s.toString());Y2(n,o,()=>o(n.currentUser)),Q2(n,a=>o(a))}}const r=F1("auth");return r&&M2(n,`http://${r}`),n}function aV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}S2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Vn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",aV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iV("Browser");var ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,CI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function b(){}b.prototype=_.prototype,I.D=_.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(P,k,R){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return _.prototype[k].apply(P,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,b){b||(b=0);var P=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)P[k]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(k=0;16>k;++k)P[k]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=I.g[0],b=I.g[1],k=I.g[2];var R=I.g[3],A=_+(R^b&(k^R))+P[0]+3614090360&4294967295;_=b+(A<<7&4294967295|A>>>25),A=R+(k^_&(b^k))+P[1]+3905402710&4294967295,R=_+(A<<12&4294967295|A>>>20),A=k+(b^R&(_^b))+P[2]+606105819&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(_^k&(R^_))+P[3]+3250441966&4294967295,b=k+(A<<22&4294967295|A>>>10),A=_+(R^b&(k^R))+P[4]+4118548399&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(k^_&(b^k))+P[5]+1200080426&4294967295,R=_+(A<<12&4294967295|A>>>20),A=k+(b^R&(_^b))+P[6]+2821735955&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(_^k&(R^_))+P[7]+4249261313&4294967295,b=k+(A<<22&4294967295|A>>>10),A=_+(R^b&(k^R))+P[8]+1770035416&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(k^_&(b^k))+P[9]+2336552879&4294967295,R=_+(A<<12&4294967295|A>>>20),A=k+(b^R&(_^b))+P[10]+4294925233&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(_^k&(R^_))+P[11]+2304563134&4294967295,b=k+(A<<22&4294967295|A>>>10),A=_+(R^b&(k^R))+P[12]+1804603682&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(k^_&(b^k))+P[13]+4254626195&4294967295,R=_+(A<<12&4294967295|A>>>20),A=k+(b^R&(_^b))+P[14]+2792965006&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(_^k&(R^_))+P[15]+1236535329&4294967295,b=k+(A<<22&4294967295|A>>>10),A=_+(k^R&(b^k))+P[1]+4129170786&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(_^b))+P[6]+3225465664&4294967295,R=_+(A<<9&4294967295|A>>>23),A=k+(_^b&(R^_))+P[11]+643717713&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(k^R))+P[0]+3921069994&4294967295,b=k+(A<<20&4294967295|A>>>12),A=_+(k^R&(b^k))+P[5]+3593408605&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(_^b))+P[10]+38016083&4294967295,R=_+(A<<9&4294967295|A>>>23),A=k+(_^b&(R^_))+P[15]+3634488961&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(k^R))+P[4]+3889429448&4294967295,b=k+(A<<20&4294967295|A>>>12),A=_+(k^R&(b^k))+P[9]+568446438&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(_^b))+P[14]+3275163606&4294967295,R=_+(A<<9&4294967295|A>>>23),A=k+(_^b&(R^_))+P[3]+4107603335&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(k^R))+P[8]+1163531501&4294967295,b=k+(A<<20&4294967295|A>>>12),A=_+(k^R&(b^k))+P[13]+2850285829&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(_^b))+P[2]+4243563512&4294967295,R=_+(A<<9&4294967295|A>>>23),A=k+(_^b&(R^_))+P[7]+1735328473&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(k^R))+P[12]+2368359562&4294967295,b=k+(A<<20&4294967295|A>>>12),A=_+(b^k^R)+P[5]+4294588738&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^k)+P[8]+2272392833&4294967295,R=_+(A<<11&4294967295|A>>>21),A=k+(R^_^b)+P[11]+1839030562&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^_)+P[14]+4259657740&4294967295,b=k+(A<<23&4294967295|A>>>9),A=_+(b^k^R)+P[1]+2763975236&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^k)+P[4]+1272893353&4294967295,R=_+(A<<11&4294967295|A>>>21),A=k+(R^_^b)+P[7]+4139469664&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^_)+P[10]+3200236656&4294967295,b=k+(A<<23&4294967295|A>>>9),A=_+(b^k^R)+P[13]+681279174&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^k)+P[0]+3936430074&4294967295,R=_+(A<<11&4294967295|A>>>21),A=k+(R^_^b)+P[3]+3572445317&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^_)+P[6]+76029189&4294967295,b=k+(A<<23&4294967295|A>>>9),A=_+(b^k^R)+P[9]+3654602809&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^k)+P[12]+3873151461&4294967295,R=_+(A<<11&4294967295|A>>>21),A=k+(R^_^b)+P[15]+530742520&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^_)+P[2]+3299628645&4294967295,b=k+(A<<23&4294967295|A>>>9),A=_+(k^(b|~R))+P[0]+4096336452&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~k))+P[7]+1126891415&4294967295,R=_+(A<<10&4294967295|A>>>22),A=k+(_^(R|~b))+P[14]+2878612391&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~_))+P[5]+4237533241&4294967295,b=k+(A<<21&4294967295|A>>>11),A=_+(k^(b|~R))+P[12]+1700485571&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~k))+P[3]+2399980690&4294967295,R=_+(A<<10&4294967295|A>>>22),A=k+(_^(R|~b))+P[10]+4293915773&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~_))+P[1]+2240044497&4294967295,b=k+(A<<21&4294967295|A>>>11),A=_+(k^(b|~R))+P[8]+1873313359&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~k))+P[15]+4264355552&4294967295,R=_+(A<<10&4294967295|A>>>22),A=k+(_^(R|~b))+P[6]+2734768916&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~_))+P[13]+1309151649&4294967295,b=k+(A<<21&4294967295|A>>>11),A=_+(k^(b|~R))+P[4]+4149444226&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~k))+P[11]+3174756917&4294967295,R=_+(A<<10&4294967295|A>>>22),A=k+(_^(R|~b))+P[2]+718787259&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~_))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+R&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var b=_-this.blockSize,P=this.B,k=this.h,R=0;R<_;){if(k==0)for(;R<=b;)r(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<_;)if(P[k++]=I.charCodeAt(R++),k==this.blockSize){r(this,P),k=0;break}}else for(;R<_;)if(P[k++]=I[R++],k==this.blockSize){r(this,P),k=0;break}}this.h=k,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var b=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=b&255,b/=256;for(this.u(I),I=Array(16),_=b=0;4>_;++_)for(var P=0;32>P;P+=8)I[b++]=this.g[_]>>>P&255;return I};function s(I,_){var b=a;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=_(I)}function o(I,_){this.h=_;for(var b=[],P=!0,k=I.length-1;0<=k;k--){var R=I[k]|0;P&&R==_||(b[k]=R,P=!1)}this.g=b}var a={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return x(c(-I));for(var _=[],b=1,P=0;I>=b;P++)_[P]=I/b|0,b*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return x(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),P=d,k=0;k<I.length;k+=8){var R=Math.min(8,I.length-k),A=parseInt(I.substring(k,k+R),_);8>R?(R=c(Math.pow(_,R)),P=P.j(R).add(c(A))):(P=P.j(b),P=P.add(c(A)))}return P}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-x(this).m();for(var I=0,_=1,b=0;b<this.g.length;b++){var P=this.i(b);I+=(0<=P?P:4294967296+P)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(T(this))return"-"+x(this).toString(I);for(var _=c(Math.pow(I,6)),b=this,P="";;){var k=C(b,_).g;b=y(b,k.j(_));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=k,v(b))return R+P;for(;6>R.length;)R="0"+R;P=R+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=y(this,I),T(I)?-1:v(I)?0:1};function x(I){for(var _=I.g.length,b=[],P=0;P<_;P++)b[P]=~I.g[P];return new o(b,~I.h).add(f)}t.abs=function(){return T(this)?x(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],P=0,k=0;k<=_;k++){var R=P+(this.i(k)&65535)+(I.i(k)&65535),A=(R>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);P=A>>>16,R&=65535,A&=65535,b[k]=A<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function y(I,_){return I.add(x(_))}t.j=function(I){if(v(this)||v(I))return d;if(T(this))return T(I)?x(this).j(x(I)):x(x(this).j(I));if(T(I))return x(this.j(x(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,b=[],P=0;P<2*_;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<I.g.length;k++){var R=this.i(P)>>>16,A=this.i(P)&65535,we=I.i(k)>>>16,he=I.i(k)&65535;b[2*P+2*k]+=A*he,w(b,2*P+2*k),b[2*P+2*k+1]+=R*he,w(b,2*P+2*k+1),b[2*P+2*k+1]+=A*we,w(b,2*P+2*k+1),b[2*P+2*k+2]+=R*we,w(b,2*P+2*k+2)}for(P=0;P<_;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=_;P<2*_;P++)b[P]=0;return new o(b,0)};function w(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function S(I,_){this.g=I,this.h=_}function C(I,_){if(v(_))throw Error("division by zero");if(v(I))return new S(d,d);if(T(I))return _=C(x(I),_),new S(x(_.g),x(_.h));if(T(_))return _=C(I,x(_)),new S(x(_.g),_.h);if(30<I.g.length){if(T(I)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=_;0>=P.l(I);)b=D(b),P=D(P);var k=V(b,1),R=V(P,1);for(P=V(P,2),b=V(b,2);!v(P);){var A=R.add(P);0>=A.l(I)&&(k=k.add(b),R=A),P=V(P,1),b=V(b,1)}return _=y(I,k.j(_)),new S(k,_)}for(k=d;0<=I.l(_);){for(b=Math.max(1,Math.floor(I.m()/_.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),R=c(b),A=R.j(_);T(A)||0<A.l(I);)b-=P,R=c(b),A=R.j(_);v(R)&&(R=f),k=k.add(R),I=y(I,A)}return new S(k,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],P=0;P<_;P++)b[P]=this.i(P)&I.i(P);return new o(b,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],P=0;P<_;P++)b[P]=this.i(P)|I.i(P);return new o(b,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],P=0;P<_;P++)b[P]=this.i(P)^I.i(P);return new o(b,this.h^I.h)};function D(I){for(var _=I.g.length+1,b=[],P=0;P<_;P++)b[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(b,I.h)}function V(I,_){var b=_>>5;_%=32;for(var P=I.g.length-b,k=[],R=0;R<P;R++)k[R]=0<_?I.i(R+b)>>>_|I.i(R+b+1)<<32-_:I.i(R+b);return new o(k,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,qr=o}).apply(typeof ow<"u"?ow:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RI,ga,DI,fu,am,MI,OI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var g=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in g))break e;g=g[M]}u=u[u.length-1],E=g[u],p=p(E),p!=E&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,E=!1,M={next:function(){if(!E&&g<u.length){var N=g++;return{value:p(N,u[N]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function v(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,M,N){for(var U=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)U[_e-2]=arguments[_e];return p.prototype[M].apply(E,U)}}function T(u){const p=u.length;if(0<p){const g=Array(p);for(let E=0;E<p;E++)g[E]=u[E];return g}return[]}function x(u,p){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const M=u.length||0,N=E.length||0;u.length=M+N;for(let U=0;U<N;U++)u[M+U]=E[U]}else u.push(E)}}class y{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(u,p,g){for(const E in u)p.call(g,u[E],E,u)}function I(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function _(u){const p={};for(const g in u)p[g]=u[g];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)u[g]=E[g];for(let N=0;N<b.length;N++)g=b[N],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function k(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function R(u){a.setTimeout(()=>{throw u},0)}function A(){var u=K;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class we{constructor(){this.h=this.g=null}add(p,g){const E=he.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var he=new y(()=>new Pe,u=>u.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,B=!1,K=new we,q=()=>{const u=a.Promise.resolve(void 0);ee=()=>{u.then(ge)}};var ge=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){R(g)}var p=he;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function bt(u,p){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{C(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}v(bt,ve);var et={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $n="closure_listenable_"+(1e6*Math.random()|0),dk=0;function fk(u,p,g,E,M){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=M,this.key=++dk,this.da=this.fa=!1}function Gl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ql(u){this.src=u,this.g={},this.h=0}Ql.prototype.add=function(u,p,g,E,M){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var U=bd(u,p,E,M);return-1<U?(p=u[U],g||(p.fa=!1)):(p=new fk(p,this.src,N,!!E,M),p.fa=g,u.push(p)),p};function Id(u,p){var g=p.type;if(g in u.g){var E=u.g[g],M=Array.prototype.indexOf.call(E,p,void 0),N;(N=0<=M)&&Array.prototype.splice.call(E,M,1),N&&(Gl(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function bd(u,p,g,E){for(var M=0;M<u.length;++M){var N=u[M];if(!N.da&&N.listener==p&&N.capture==!!g&&N.ha==E)return M}return-1}var Pd="closure_lm_"+(1e6*Math.random()|0),Ad={};function Sv(u,p,g,E,M){if(Array.isArray(p)){for(var N=0;N<p.length;N++)Sv(u,p[N],g,E,M);return null}return g=bv(g),u&&u[$n]?u.K(p,g,c(E)?!!E.capture:!!E,M):pk(u,p,g,!1,E,M)}function pk(u,p,g,E,M,N){if(!p)throw Error("Invalid event type");var U=c(M)?!!M.capture:!!M,_e=Cd(u);if(_e||(u[Pd]=_e=new Ql(u)),g=_e.add(p,g,E,U,N),g.proxy)return g;if(E=mk(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)Ze||(M=U),M===void 0&&(M=!1),u.addEventListener(p.toString(),E,M);else if(u.attachEvent)u.attachEvent(Iv(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function mk(){function u(g){return p.call(u.src,u.listener,g)}const p=gk;return u}function xv(u,p,g,E,M){if(Array.isArray(p))for(var N=0;N<p.length;N++)xv(u,p[N],g,E,M);else E=c(E)?!!E.capture:!!E,g=bv(g),u&&u[$n]?(u=u.i,p=String(p).toString(),p in u.g&&(N=u.g[p],g=bd(N,g,E,M),-1<g&&(Gl(N[g]),Array.prototype.splice.call(N,g,1),N.length==0&&(delete u.g[p],u.h--)))):u&&(u=Cd(u))&&(p=u.g[p.toString()],u=-1,p&&(u=bd(p,g,E,M)),(g=-1<u?p[u]:null)&&kd(g))}function kd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[$n])Id(p.i,u);else{var g=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(g,E,u.capture):p.detachEvent?p.detachEvent(Iv(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=Cd(p))?(Id(g,u),g.h==0&&(g.src=null,p[Pd]=null)):Gl(u)}}}function Iv(u){return u in Ad?Ad[u]:Ad[u]="on"+u}function gk(u,p){if(u.da)u=!0;else{p=new bt(p,this);var g=u.listener,E=u.ha||u.src;u.fa&&kd(u),u=g.call(E,p)}return u}function Cd(u){return u=u[Pd],u instanceof Ql?u:null}var Rd="__closure_events_fn_"+(1e9*Math.random()>>>0);function bv(u){return typeof u=="function"?u:(u[Rd]||(u[Rd]=function(p){return u.handleEvent(p)}),u[Rd])}function ct(){re.call(this),this.i=new Ql(this),this.M=this,this.F=null}v(ct,re),ct.prototype[$n]=!0,ct.prototype.removeEventListener=function(u,p,g,E){xv(this,u,p,g,E)};function Pt(u,p){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new ve(p,u);else if(p instanceof ve)p.target=p.target||u;else{var M=p;p=new ve(E,u),P(p,M)}if(M=!0,g)for(var N=g.length-1;0<=N;N--){var U=p.g=g[N];M=Yl(U,E,!0,p)&&M}if(U=p.g=u,M=Yl(U,E,!0,p)&&M,M=Yl(U,E,!1,p)&&M,g)for(N=0;N<g.length;N++)U=p.g=g[N],M=Yl(U,E,!1,p)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],E=0;E<g.length;E++)Gl(g[E]);delete u.g[p],u.h--}}this.F=null},ct.prototype.K=function(u,p,g,E){return this.i.add(String(u),p,!1,g,E)},ct.prototype.L=function(u,p,g,E){return this.i.add(String(u),p,!0,g,E)};function Yl(u,p,g,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,N=0;N<p.length;++N){var U=p[N];if(U&&!U.da&&U.capture==g){var _e=U.listener,tt=U.ha||U.src;U.fa&&Id(u.i,U),M=_e.call(tt,E)!==!1&&M}}return M&&!E.defaultPrevented}function Pv(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Av(u){u.g=Pv(()=>{u.g=null,u.i&&(u.i=!1,Av(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class yk extends re{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Av(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(u){re.call(this),this.h=u,this.g={}}v(Lo,re);var kv=[];function Cv(u){V(u.g,function(p,g){this.g.hasOwnProperty(g)&&kd(p)},u),u.g={}}Lo.prototype.N=function(){Lo.aa.N.call(this),Cv(this)},Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dd=a.JSON.stringify,vk=a.JSON.parse,_k=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Md(){}Md.prototype.h=null;function Rv(u){return u.h||(u.h=u.i())}function Dv(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Od(){ve.call(this,"d")}v(Od,ve);function Vd(){ve.call(this,"c")}v(Vd,ve);var xr={},Mv=null;function Xl(){return Mv=Mv||new ct}xr.La="serverreachability";function Ov(u){ve.call(this,xr.La,u)}v(Ov,ve);function jo(u){const p=Xl();Pt(p,new Ov(p))}xr.STAT_EVENT="statevent";function Vv(u,p){ve.call(this,xr.STAT_EVENT,u),this.stat=p}v(Vv,ve);function At(u){const p=Xl();Pt(p,new Vv(p,u))}xr.Ma="timingevent";function Nv(u,p){ve.call(this,xr.Ma,u),this.size=p}v(Nv,ve);function Bo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Uo(){this.g=!0}Uo.prototype.xa=function(){this.g=!1};function wk(u,p,g,E,M,N){u.info(function(){if(u.g)if(N)for(var U="",_e=N.split("&"),tt=0;tt<_e.length;tt++){var ce=_e[tt].split("=");if(1<ce.length){var ut=ce[0];ce=ce[1];var ht=ut.split("_");U=2<=ht.length&&ht[1]=="type"?U+(ut+"="+ce+"&"):U+(ut+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+g+`
`+U})}function Tk(u,p,g,E,M,N,U){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+g+`
`+N+" "+U})}function fs(u,p,g,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Sk(u,g)+(E?" "+E:"")})}function Ek(u,p){u.info(function(){return"TIMEOUT: "+p})}Uo.prototype.info=function(){};function Sk(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var N=M[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<M.length;U++)M[U]=""}}}}return Dd(g)}catch{return p}}var Jl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nd;function Zl(){}v(Zl,Md),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},Nd=new Zl;function wi(u,p,g,E){this.j=u,this.i=p,this.l=g,this.R=E||1,this.U=new Lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fv}function Fv(){this.i=null,this.g="",this.h=!1}var jv={},Ld={};function Fd(u,p,g){u.L=1,u.v=ic(Hn(p)),u.m=g,u.P=!0,Bv(u,null)}function Bv(u,p){u.F=Date.now(),ec(u),u.A=Hn(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),e_(g.i,"t",E),u.C=0,g=u.j.J,u.h=new Fv,u.g=v_(u.j,g?p:null,!u.m),0<u.O&&(u.M=new yk(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(kv[0]=M.toString()),M=kv);for(var N=0;N<M.length;N++){var U=Sv(g,M[N],E||p.handleEvent,!1,p.h||p);if(!U)break;p.g[U.key]=U}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),jo(),wk(u.i,u.u,u.A,u.l,u.R,u.m)}wi.prototype.ca=function(u){u=u.target;const p=this.M;p&&Wn(u)==3?p.j():this.Y(u)},wi.prototype.Y=function(u){try{if(u==this.g)e:{const ht=Wn(this.g);var p=this.g.Ba();const gs=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||a_(this.g)))){this.J||ht!=4||p==7||(p==8||0>=gs?jo(3):jo(2)),jd(this);var g=this.g.Z();this.X=g;t:if(Uv(this)){var E=a_(this.g);u="";var M=E.length,N=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),zo(this);var U="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(N&&p==M-1)});E.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=g==200,Tk(this.i,this.u,this.A,this.l,this.R,ht,g),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,tt=this.g;if((_e=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(_e)){var ce=_e;break t}}ce=null}if(g=ce)fs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bd(this,g);else{this.o=!1,this.s=3,At(12),Ir(this),zo(this);break e}}if(this.P){g=!0;let fn;for(;!this.J&&this.C<U.length;)if(fn=xk(this,U),fn==Ld){ht==4&&(this.s=4,At(14),g=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==jv){this.s=4,At(15),fs(this.i,this.l,U,"[Invalid Chunk]"),g=!1;break}else fs(this.i,this.l,fn,null),Bd(this,fn);if(Uv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||U.length!=0||this.h.h||(this.s=1,At(16),g=!1),this.o=this.o&&g,!g)fs(this.i,this.l,U,"[Invalid Chunked Response]"),Ir(this),zo(this);else if(0<U.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Kd(ut),ut.M=!0,At(11))}}else fs(this.i,this.l,U,null),Bd(this,U);ht==4&&Ir(this),this.o&&!this.J&&(ht==4?p_(this.j,this):(this.o=!1,ec(this)))}else Uk(this.g),g==400&&0<U.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Ir(this),zo(this)}}}catch{}finally{}};function Uv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xk(u,p){var g=u.C,E=p.indexOf(`
`,g);return E==-1?Ld:(g=Number(p.substring(g,E)),isNaN(g)?jv:(E+=1,E+g>p.length?Ld:(p=p.slice(E,E+g),u.C=E+g,p)))}wi.prototype.cancel=function(){this.J=!0,Ir(this)};function ec(u){u.S=Date.now()+u.I,zv(u,u.I)}function zv(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bo(f(u.ba,u),p)}function jd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}wi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ek(this.i,this.A),this.L!=2&&(jo(),At(17)),Ir(this),this.s=2,zo(this)):zv(this,this.S-u)};function zo(u){u.j.G==0||u.J||p_(u.j,u)}function Ir(u){jd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Cv(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Bd(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Ud(g.h,u))){if(!u.K&&Ud(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)cc(g),ac(g);else break e;Wd(g),At(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=Bo(f(g.Za,g),6e3));if(1>=Wv(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Pr(g,11)}else if((u.K||g.g==u)&&cc(g),!w(p))for(M=g.Da.g.parse(p),p=0;p<M.length;p++){let ce=M[p];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const ut=ce[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ht=ce[4];ht!=null&&(g.Aa=ht,g.j.info("SVER="+g.Aa));const gs=ce[5];gs!=null&&typeof gs=="number"&&0<gs&&(E=1.5*gs,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const fn=u.g;if(fn){const hc=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hc){var N=E.h;N.g||hc.indexOf("spdy")==-1&&hc.indexOf("quic")==-1&&hc.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(zd(N,N.h),N.h=null))}if(E.D){const qd=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(E.ya=qd,Ee(E.I,E.D,qd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var U=u;if(E.qa=y_(E,E.J?E.ia:null,E.W),U.K){Kv(E.h,U);var _e=U,tt=E.L;tt&&(_e.I=tt),_e.B&&(jd(_e),ec(_e)),E.g=U}else d_(E);0<g.i.length&&lc(g)}else ce[0]!="stop"&&ce[0]!="close"||Pr(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Pr(g,7):Hd(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}jo(4)}catch{}}var Ik=class{constructor(u,p){this.g=u,this.map=p}};function $v(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Wv(u){return u.h?1:u.g?u.g.size:0}function Ud(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function zd(u,p){u.g?u.g.add(p):u.h=p}function Kv(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}$v.prototype.cancel=function(){if(this.i=qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return T(u.i)}function bk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,E=0;E<g;E++)p.push(u[E]);return p}p=[],g=0;for(E in u)p[g++]=u[E];return p}function Pk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const E in u)p[g++]=E;return p}}}function Gv(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=Pk(u),E=bk(u),M=E.length,N=0;N<M;N++)p.call(void 0,E[N],g&&g[N],u)}var Qv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ak(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),M=null;if(0<=E){var N=u[g].substring(0,E);M=u[g].substring(E+1)}else N=u[g];p(N,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,tc(this,u.j),this.o=u.o,this.g=u.g,nc(this,u.s),this.l=u.l;var p=u.i,g=new Wo;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Yv(this,g),this.m=u.m}else u&&(p=String(u).match(Qv))?(this.h=!1,tc(this,p[1]||"",!0),this.o=$o(p[2]||""),this.g=$o(p[3]||"",!0),nc(this,p[4]),this.l=$o(p[5]||"",!0),Yv(this,p[6]||"",!0),this.m=$o(p[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}br.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ho(p,Xv,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ho(p,Xv,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ho(g,g.charAt(0)=="/"?Rk:Ck,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ho(g,Mk)),u.join("")};function Hn(u){return new br(u)}function tc(u,p,g){u.j=g?$o(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function nc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Yv(u,p,g){p instanceof Wo?(u.i=p,Ok(u.i,u.h)):(g||(p=Ho(p,Dk)),u.i=new Wo(p,u.h))}function Ee(u,p,g){u.i.set(p,g)}function ic(u){return Ee(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $o(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ho(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,kk),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xv=/[#\/\?@]/g,Ck=/[#\?:]/g,Rk=/[#\?]/g,Dk=/[#\?@]/g,Mk=/#/g;function Wo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ti(u){u.g||(u.g=new Map,u.h=0,u.i&&Ak(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Wo.prototype,t.add=function(u,p){Ti(this),this.i=null,u=ps(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Jv(u,p){Ti(u),p=ps(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Zv(u,p){return Ti(u),p=ps(u,p),u.g.has(p)}t.forEach=function(u,p){Ti(this),this.g.forEach(function(g,E){g.forEach(function(M){u.call(p,M,E,this)},this)},this)},t.na=function(){Ti(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let E=0;E<p.length;E++){const M=u[E];for(let N=0;N<M.length;N++)g.push(p[E])}return g},t.V=function(u){Ti(this);let p=[];if(typeof u=="string")Zv(this,u)&&(p=p.concat(this.g.get(ps(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Ti(this),this.i=null,u=ps(this,u),Zv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function e_(u,p,g){Jv(u,p),0<g.length&&(u.i=null,u.g.set(ps(u,p),T(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var E=p[g];const N=encodeURIComponent(String(E)),U=this.V(E);for(E=0;E<U.length;E++){var M=N;U[E]!==""&&(M+="="+encodeURIComponent(String(U[E]))),u.push(M)}}return this.i=u.join("&")};function ps(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Ok(u,p){p&&!u.j&&(Ti(u),u.i=null,u.g.forEach(function(g,E){var M=E.toLowerCase();E!=M&&(Jv(this,E),e_(this,M,g))},u)),u.j=p}function Vk(u,p){const g=new Uo;if(a.Image){const E=new Image;E.onload=m(Ei,g,"TestLoadImage: loaded",!0,p,E),E.onerror=m(Ei,g,"TestLoadImage: error",!1,p,E),E.onabort=m(Ei,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=m(Ei,g,"TestLoadImage: timeout",!1,p,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function Nk(u,p){const g=new Uo,E=new AbortController,M=setTimeout(()=>{E.abort(),Ei(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(N=>{clearTimeout(M),N.ok?Ei(g,"TestPingServer: ok",!0,p):Ei(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Ei(g,"TestPingServer: error",!1,p)})}function Ei(u,p,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function Lk(){this.g=new _k}function Fk(u,p,g){const E=g||"";try{Gv(u,function(M,N){let U=M;c(M)&&(U=Dd(M)),p.push(E+N+"="+encodeURIComponent(U))})}catch(M){throw p.push(E+"type="+encodeURIComponent("_badmap")),M}}function rc(u){this.l=u.Ub||null,this.j=u.eb||!1}v(rc,Md),rc.prototype.g=function(){return new sc(this.l,this.j)},rc.prototype.i=function(u){return function(){return u}}({});function sc(u,p){ct.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(sc,ct),t=sc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,qo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function t_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ko(this):qo(this),this.readyState==3&&t_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ko(this))},t.Qa=function(u){this.g&&(this.response=u,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qo(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function qo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function n_(u){let p="";return V(u,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function $d(u,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=n_(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ee(u,p,g))}function Ve(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ve,ct);var jk=/^https?$/i,Bk=["POST","PUT"];t=Ve.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nd.g(),this.v=this.o?Rv(this.o):Rv(Nd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(N){i_(this,N);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const N of E.keys())g.set(N,E.get(N));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Bk,p,void 0))||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,U]of g)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{o_(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){i_(this,N)}};function i_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,r_(u),oc(u)}function r_(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),oc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oc(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?s_(this):this.bb())},t.bb=function(){s_(this)};function s_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Wn(u)!=4||u.Z()!=2)){if(u.u&&Wn(u)==4)Pv(u.Ea,0,u);else if(Pt(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=U===0){var M=String(u.D).match(Qv)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),E=!jk.test(M?M.toLowerCase():"")}g=E}if(g)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var N=2<Wn(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",r_(u)}}finally{oc(u)}}}}function oc(u,p){if(u.g){o_(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Pt(u,"ready");try{g.onreadystatechange=E}catch{}}}function o_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),vk(p)}};function a_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(u){const p={};u=(u.g&&2<=Wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(w(u[E]))continue;var g=k(u[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const N=p[M]||[];p[M]=N,N.push(g)}I(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function l_(u){this.Aa=0,this.i=[],this.j=new Uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Go("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Go("baseRetryDelayMs",5e3,u),this.cb=Go("retryDelaySeedMs",1e4,u),this.Wa=Go("forwardChannelMaxRetries",2,u),this.wa=Go("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $v(u&&u.concurrentRequestLimit),this.Da=new Lk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=l_.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,E){At(0),this.W=u,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=y_(this,null,this.W),lc(this)};function Hd(u){if(c_(u),u.G==3){var p=u.U++,g=Hn(u.I);if(Ee(g,"SID",u.K),Ee(g,"RID",p),Ee(g,"TYPE","terminate"),Qo(u,g),p=new wi(u,u.j,p),p.L=2,p.v=ic(Hn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=v_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ec(p)}g_(u)}function ac(u){u.g&&(Kd(u),u.g.cancel(),u.g=null)}function c_(u){ac(u),u.u&&(a.clearTimeout(u.u),u.u=null),cc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function lc(u){if(!Hv(u.h)&&!u.s){u.s=!0;var p=u.Ga;ee||q(),B||(ee(),B=!0),K.add(p,u),u.B=0}}function zk(u,p){return Wv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bo(f(u.Ga,u,p),m_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new wi(this,this.j,u);let N=this.o;if(this.S&&(N?(N=_(N),P(N,this.S)):N=this.S),this.m!==null||this.O||(M.H=N,N=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=h_(this,M,p),g=Hn(this.I),Ee(g,"RID",u),Ee(g,"CVER",22),this.D&&Ee(g,"X-HTTP-Session-Id",this.D),Qo(this,g),N&&(this.O?p="headers="+encodeURIComponent(String(n_(N)))+"&"+p:this.m&&$d(g,this.m,N)),zd(this.h,M),this.Ua&&Ee(g,"TYPE","init"),this.P?(Ee(g,"$req",p),Ee(g,"SID","null"),M.T=!0,Fd(M,g,null)):Fd(M,g,p),this.G=2}}else this.G==3&&(u?u_(this,u):this.i.length==0||Hv(this.h)||u_(this))};function u_(u,p){var g;p?g=p.l:g=u.U++;const E=Hn(u.I);Ee(E,"SID",u.K),Ee(E,"RID",g),Ee(E,"AID",u.T),Qo(u,E),u.m&&u.o&&$d(E,u.m,u.o),g=new wi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=h_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zd(u.h,g),Fd(g,E,p)}function Qo(u,p){u.H&&V(u.H,function(g,E){Ee(p,E,g)}),u.l&&Gv({},function(g,E){Ee(p,E,g)})}function h_(u,p,g){g=Math.min(u.i.length,g);var E=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let N=-1;for(;;){const U=["count="+g];N==-1?0<g?(N=M[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let _e=!0;for(let tt=0;tt<g;tt++){let ce=M[tt].g;const ut=M[tt].map;if(ce-=N,0>ce)N=Math.max(0,M[tt].g-100),_e=!1;else try{Fk(ut,U,"req"+ce+"_")}catch{E&&E(ut)}}if(_e){E=U.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,E}function d_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ee||q(),B||(ee(),B=!0),K.add(p,u),u.v=0}}function Wd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bo(f(u.Fa,u),m_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,f_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ac(this),f_(this))};function Kd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function f_(u){u.g=new wi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Hn(u.qa);Ee(p,"RID","rpc"),Ee(p,"SID",u.K),Ee(p,"AID",u.T),Ee(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ee(p,"TO",u.ja),Ee(p,"TYPE","xmlhttp"),Qo(u,p),u.m&&u.o&&$d(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=ic(Hn(p)),g.m=null,g.P=!0,Bv(g,u)}t.Za=function(){this.C!=null&&(this.C=null,ac(this),Wd(this),At(19))};function cc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function p_(u,p){var g=null;if(u.g==p){cc(u),Kd(u),u.g=null;var E=2}else if(Ud(u.h,p))g=p.D,Kv(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;E=Xl(),Pt(E,new Nv(E,g)),lc(u)}else d_(u);else if(M=p.s,M==3||M==0&&0<p.X||!(E==1&&zk(u,p)||E==2&&Wd(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),M){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function m_(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function Pr(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),E=u.Xa;const M=!E;E=new br(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tc(E,"https"),ic(E),M?Vk(E.toString(),g):Nk(E.toString(),g)}else At(2);u.G=0,u.l&&u.l.sa(p),g_(u),c_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function g_(u){if(u.G=0,u.ka=[],u.l){const p=qv(u.h);(p.length!=0||u.i.length!=0)&&(x(u.ka,p),x(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function y_(u,p,g){var E=g instanceof br?Hn(g):new br(g);if(E.g!="")p&&(E.g=p+"."+E.g),nc(E,E.s);else{var M=a.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var N=new br(null);E&&tc(N,E),p&&(N.g=p),M&&nc(N,M),g&&(N.l=g),E=N}return g=u.D,p=u.ya,g&&p&&Ee(E,g,p),Ee(E,"VER",u.la),Qo(u,E),E}function v_(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ve(new rc({eb:g})):new Ve(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function __(){}t=__.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function uc(){}uc.prototype.g=function(u,p){return new $t(u,p)};function $t(u,p){ct.call(this),this.g=new l_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ms(this)}v($t,ct),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Hd(this.g)},$t.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Dd(u),u=g);p.i.push(new Ik(p.Ya++,u)),p.G==3&&lc(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,Hd(this.g),delete this.g,$t.aa.N.call(this)};function w_(u){Od.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}v(w_,Od);function T_(){Vd.call(this),this.status=1}v(T_,Vd);function ms(u){this.g=u}v(ms,__),ms.prototype.ua=function(){Pt(this.g,"a")},ms.prototype.ta=function(u){Pt(this.g,new w_(u))},ms.prototype.sa=function(u){Pt(this.g,new T_)},ms.prototype.ra=function(){Pt(this.g,"b")},uc.prototype.createWebChannel=uc.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,VI=function(){return new uc},OI=function(){return Xl()},MI=xr,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,fu=Jl,Lv.COMPLETE="complete",DI=Lv,Dv.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",ct.prototype.listen=ct.prototype.K,ga=Dv,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,RI=Ve}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const aw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="11.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new zg("@firebase/firestore");function ws(){return rs.logLevel}function $(t,...e){if(rs.logLevel<=ne.DEBUG){const n=e.map(ey);rs.debug(`Firestore (${ko}): ${t}`,...n)}}function gi(t,...e){if(rs.logLevel<=ne.ERROR){const n=e.map(ey);rs.error(`Firestore (${ko}): ${t}`,...n)}}function uo(t,...e){if(rs.logLevel<=ne.WARN){const n=e.map(ey);rs.warn(`Firestore (${ko}): ${t}`,...n)}}function ey(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw gi(e),new Error(e)}function de(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class cV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uV{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ji,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ji)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string"),new NI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new yt(e)}}class hV{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dV{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new hV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const i=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new fV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=mV(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function oe(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ue(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ue(0,0))}static max(){return new J(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends dl{construct(e,n,i){return new ke(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const gV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends dl{construct(e,n,i){return new st(e,n,i)}static isValidIdentifier(e){return gV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ke.fromString(e))}static fromName(e){return new G(ke.fromString(e).popFirst(5))}static empty(){return new G(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ke(e.slice()))}}function yV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new or(r,G.empty(),e)}function vV(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new or(J.min(),G.empty(),-1)}static max(){return new or(J.max(),G.empty(),-1)}}function _V(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==wV)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,i)=>{n(e)})}static reject(e){return new L((n,i)=>{i(e)})}static waitFor(e){return new L((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=L.resolve(!1);for(const i of e)n=n.next(r=>r?L.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new L((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new L((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function EV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ro(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yh.oe=-1;function Xh(t){return t==null}function sh(t){return t===0&&1/t==-1/0}function SV(t){return typeof t=="number"&&Number.isInteger(t)&&!sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lw(e)),e=IV(t.get(n),e);return lw(e)}function IV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function lw(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??rt.RED,this.left=r??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new rt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,s){return this}insert(e,n,i){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(e){return new uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Je(st.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jI("Invalid base64 string: "+s):s}}(e);return new lt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const bV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(de(!!t),typeof t=="string"){let e=0;const n=bV.exec(t);if(de(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jh(t){const e=t.mapValue.fields.__previous_value__;return ty(e)?Jh(e):e}function fl(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class pl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:kV(t)?9007199254740991:AV(t)?10:11:X()}function Un(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=ar(r.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return lr(r.bytesValue).isEqual(lr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Fe(r.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Fe(r.integerValue)===Fe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Fe(r.doubleValue),a=Fe(s.doubleValue);return o===a?sh(o)===sh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(cw(o)!==cw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function ml(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=cr(t),i=cr(e);if(n!==i)return oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fe(s.integerValue||s.doubleValue),l=Fe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hw(t.timestampValue,e.timestampValue);case 4:return hw(fl(t),fl(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=lr(s),l=lr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=oe(a[c],l[c]);if(h!==0)return h}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Fe(s.latitude),Fe(o.latitude));return a!==0?a:oe(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,T=oe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:dw(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dc.mapValue&&o===Dc.mapValue)return 0;if(s===Dc.mapValue)return 1;if(o===Dc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=oe(l[d],h[d]);if(f!==0)return f;const m=fo(a[l[d]],c[h[d]]);if(m!==0)return m}return oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function hw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=ar(t),i=ar(e),r=oe(n.seconds,i.seconds);return r!==0?r:oe(n.nanos,i.nanos)}function dw(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=fo(n[r],i[r]);if(s)return s}return oe(n.length,i.length)}function po(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ar(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=lm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${lm(n.fields[o])}`;return r+"}"}(t.mapValue):X()}function pu(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(t);return e?16+pu(e):16;case 5:return 2*t.stringValue.length;case 6:return lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+pu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Tr(i.fields,(s,o)=>{r+=s.length+pu(o)}),r}(t.mapValue);default:throw X()}}function cm(t){return!!t&&"integerValue"in t}function ny(t){return!!t&&"arrayValue"in t}function fw(t){return!!t&&"nullValue"in t}function pw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mu(t){return!!t&&"mapValue"in t}function AV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Tr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Va(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(n)}setAll(e){let n=st.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Va(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];mu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Tr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Nt(Va(this.value))}}function BI(t){const e=[];return Tr(t.fields,(n,i)=>{const r=new st([n]);if(mu(i)){const s=BI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,J.min(),J.min(),J.min(),Nt.empty(),0)}static newFoundDocument(e,n,i,r){return new _t(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new _t(e,2,n,J.min(),J.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,J.min(),J.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.position=e,this.inclusive=n}}function mw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(o.referenceValue),n.key):i=fo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function gw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function CV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{}class We extends UI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new DV(e,n,i):n==="array-contains"?new VV(e,i):n==="in"?new NV(e,i):n==="not-in"?new LV(e,i):n==="array-contains-any"?new FV(e,i):new We(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new MV(e,i):new OV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends UI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zn(e,n)}matches(e){return zI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zI(t){return t.op==="and"}function $I(t){return RV(t)&&zI(t)}function RV(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function um(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+po(t.value);if($I(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function HI(t,e){return t instanceof We?function(i,r){return r instanceof We&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(t,e):t instanceof zn?function(i,r){return r instanceof zn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&HI(o,r.filters[a]),!0):!1}(t,e):void X()}function WI(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(WI).join(" ,")+"}"}(t):"Filter"}class DV extends We{constructor(e,n,i){super(e,n,i),this.key=G.fromName(i.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class MV extends We{constructor(e,n){super(e,"in",n),this.keys=KI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OV extends We{constructor(e,n){super(e,"not-in",n),this.keys=KI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class VV extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ny(n)&&ml(n.arrayValue,this.value)}}class NV extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ml(this.value.arrayValue,n)}}class LV extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ml(this.value.arrayValue,n)}}class FV extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ny(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ml(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function yw(t,e=null,n=[],i=[],r=null,s=null,o=null){return new jV(t,e,n,i,r,s,o)}function iy(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>um(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>po(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>po(i)).join(",")),e.ue=n}return e.ue}function ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gw(t.startAt,e.startAt)&&gw(t.endAt,e.endAt)}function hm(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BV(t,e,n,i,r,s,o,a){return new Zh(t,e,n,i,r,s,o,a)}function sy(t){return new Zh(t)}function vw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UV(t){return t.collectionGroup!==null}function Na(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ah(s,i))}),n.has(st.keyField().canonicalString())||e.ce.push(new ah(st.keyField(),i))}return e.ce}function Ln(t){const e=Z(t);return e.le||(e.le=zV(e,Na(t))),e.le}function zV(t,e){if(t.limitType==="F")return yw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ah(r.field,s)});const n=t.endAt?new oh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new oh(t.startAt.position,t.startAt.inclusive):null;return yw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dm(t,e,n){return new Zh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return ry(Ln(t),Ln(e))&&t.limitType===e.limitType}function qI(t){return`${iy(Ln(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>WI(r)).join(", ")}]`),Xh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>po(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>po(r)).join(",")),`Target(${i})`}(Ln(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Na(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=mw(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Na(i),r)||i.endAt&&!function(o,a,l){const c=mw(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Na(i),r))}(t,e)}function $V(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GI(t){return(e,n)=>{let i=!1;for(const r of Na(t)){const s=HV(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function HV(t,e,n){const i=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?fo(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return FI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Oe(G.comparator);function yi(){return WV}const QI=new Oe(G.comparator);function ya(...t){let e=QI;for(const n of t)e=e.insert(n.key,n);return e}function YI(t){let e=QI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zr(){return La()}function XI(){return La()}function La(){return new cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const KV=new Oe(G.comparator),qV=new Je(G.comparator);function ie(...t){let e=qV;for(const n of t)e=e.add(n);return e}const GV=new Je(oe);function QV(){return GV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function JI(t){return{integerValue:""+t}}function YV(t,e){return SV(e)?JI(e):oy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function XV(t,e,n){return t instanceof lh?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ty(s)&&(s=Jh(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof gl?eb(t,e):t instanceof yl?tb(t,e):function(r,s){const o=ZI(r,s),a=_w(o)+_w(r.Pe);return cm(o)&&cm(r.Pe)?JI(a):oy(r.serializer,a)}(t,e)}function JV(t,e,n){return t instanceof gl?eb(t,e):t instanceof yl?tb(t,e):n}function ZI(t,e){return t instanceof ch?function(i){return cm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class lh extends nd{}class gl extends nd{constructor(e){super(),this.elements=e}}function eb(t,e){const n=nb(e);for(const i of t.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class yl extends nd{constructor(e){super(),this.elements=e}}function tb(t,e){let n=nb(e);for(const i of t.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class ch extends nd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _w(t){return Fe(t.integerValue||t.doubleValue)}function nb(t){return ny(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZV(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof gl&&r instanceof gl||i instanceof yl&&r instanceof yl?ho(i.elements,r.elements,Un):i instanceof ch&&r instanceof ch?Un(i.Pe,r.Pe):i instanceof lh&&r instanceof lh}(t.transform,e.transform)}class eN{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class id{}function ib(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rd(t.key,zt.none()):new Fl(t.key,t.data,zt.none());{const n=t.data,i=Nt.empty();let r=new Je(st.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Er(t.key,i,new Kt(r.toArray()),zt.none())}}function tN(t,e,n){t instanceof Fl?function(r,s,o){const a=r.value.clone(),l=Tw(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(r,s,o){if(!gu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Tw(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(rb(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fa(t,e,n,i){return t instanceof Fl?function(s,o,a,l){if(!gu(s.precondition,o))return a;const c=s.value.clone(),h=Ew(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Er?function(s,o,a,l){if(!gu(s.precondition,o))return a;const c=Ew(s.fieldTransforms,l,o),h=o.data;return h.setAll(rb(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return gu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function nN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ZI(i.transform,r||null);s!=null&&(n===null&&(n=Nt.empty()),n.set(i.field,s))}return n||null}function ww(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ho(i,r,(s,o)=>ZV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends id{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends id{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Tw(t,e,n){const i=new Map;de(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,JV(o,a,n[r]))}return i}function Ew(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,XV(s,o,e))}return i}class rd extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iN extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&tN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Fa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Fa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=XI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=ib(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,i)=>ww(n,i))&&ho(this.baseMutations,e.baseMutations,(n,i)=>ww(n,i))}}class ay{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){de(e.mutations.length===i.length);let r=function(){return KV}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new ay(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,se;function aN(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function sb(t){if(t===void 0)return gi("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(se=ze||(ze={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new qr([4294967295,4294967295],0);function Sw(t){const e=lN().encode(t),n=new CI;return n.update(e),new Uint8Array(n.digest())}function xw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qr([n,i],0),new qr([r,s],0)]}class ly{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(i<0)throw new va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(qr.fromNumber(i)));return r.compare(cN)===1&&(r=new qr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Sw(e),[i,r]=xw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ly(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Sw(e),[i,r]=xw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new sd(J.min(),r,new Oe(oe),yi(),ie())}}class jl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new jl(i,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ob{constructor(e,n){this.targetId=e,this.me=n}}class ab{constructor(e,n,i=lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Iw{constructor(){this.fe=0,this.ge=Pw(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),i=ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new jl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Pw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uN{constructor(e){this.Le=e,this.Be=new Map,this.ke=yi(),this.qe=bw(),this.Qe=new Oe(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(hm(s))if(i===0){const o=new G(s.path);this.Ue(n,o,_t.newNoDocument(o,J.min()))}else de(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=lr(i).toUint8Array()}catch(l){if(l instanceof jI)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ly(o,r,s)}catch(l){return uo(l instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hm(a.target)){const l=new G(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,_t.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new sd(e,n,this.Qe,this.ke,i);return this.ke=yi(),this.qe=bw(),this.Qe=new Oe(oe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Iw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Iw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bw(){return new Oe(G.comparator)}function Pw(){return new Oe(G.comparator)}const hN={asc:"ASCENDING",desc:"DESCENDING"},dN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fN={and:"AND",or:"OR"};class pN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fm(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mN(t,e){return uh(t,e.toTimestamp())}function Fn(t){return de(!!t),J.fromTimestamp(function(n){const i=ar(n);return new Ue(i.seconds,i.nanos)}(t))}function cy(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(r){return new ke(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cb(t){const e=ke.fromString(t);return de(pb(e)),e}function mm(t,e){return cy(t.databaseId,e.path)}function Af(t,e){const n=cb(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(hb(n))}function ub(t,e){return cy(t.databaseId,e)}function gN(t){const e=cb(t);return e.length===4?ke.emptyPath():hb(e)}function gm(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hb(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Aw(t,e,n){return{name:mm(t,e),fields:n.value.mapValue.fields}}function yN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(de(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:sb(c.code);return new W(h,c.message||"")}(o);n=new ab(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Af(t,i.document.name),s=Fn(i.document.updateTime),o=i.document.createTime?Fn(i.document.createTime):J.min(),a=new Nt({mapValue:{fields:i.document.fields}}),l=_t.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new yu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Af(t,i.document),s=i.readTime?Fn(i.readTime):J.min(),o=_t.newNoDocument(r,s),a=i.removedTargetIds||[];n=new yu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Af(t,i.document),s=i.removedTargetIds||[];n=new yu([],s,r,null)}else{if(!("filter"in e))return X();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new oN(r,s),a=i.targetId;n=new ob(a,o)}}return n}function vN(t,e){let n;if(e instanceof Fl)n={update:Aw(t,e.key,e.value)};else if(e instanceof rd)n={delete:mm(t,e.key)};else if(e instanceof Er)n={update:Aw(t,e.key,e.data),updateMask:PN(e.fieldMask)};else{if(!(e instanceof iN))return X();n={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof lh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ch)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:mN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function _N(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Fn(r.updateTime):Fn(s);return o.isEqual(J.min())&&(o=Fn(s)),new eN(o,r.transformResults||[])}(n,e))):[]}function wN(t,e){return{documents:[ub(t,e.path)]}}function TN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ub(t,r);const s=function(c){if(c.length!==0)return fb(zn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Es(f.field),direction:xN(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function EN(t){let e=gN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){de(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=db(d);return f instanceof zn&&$I(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new ah(Ss(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Xh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new oh(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new oh(m,f)}(n.endAt)),BV(e,r,o,s,a,"F",l,c)}function SN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function db(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ss(n.unaryFilter.field);return We.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ss(n.unaryFilter.field);return We.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ss(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return We.create(Ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(i=>db(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function xN(t){return hN[t]}function IN(t){return dN[t]}function bN(t){return fN[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Ss(t){return st.fromServerFormat(t.fieldPath)}function fb(t){return t instanceof We?function(n){if(n.op==="=="){if(pw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(fw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(fw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:IN(n.op),value:n.value}}}(t):t instanceof zn?function(n){const i=n.getFilters().map(r=>fb(r));return i.length===1?i[0]:{compositeFilter:{op:bN(n.op),filters:i}}}(t):X()}function PN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,i,r,s=J.min(),o=J.min(),a=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.ct=e}}function kN(t){const e=EN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.un=new RN}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(or.min())}updateCollectionGroup(e,n,i){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class RN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Je(ke.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Je(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ot{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(41943040,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mo(0)}static kn(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw([t,e],[n,i]){const r=oe(t,n);return r===0?oe(e,i):r}class DN{constructor(e){this.Un=e,this.buffer=new Je(Cw),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Cw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ro(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Hn(3e5)})}}class ON{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Yh.oe);const i=new DN(n);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(kw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kw):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,r,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),ws()<=ne.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function VN(t,e){return new ON(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.changes=new cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?L.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Fa(i.mutation,r,Kt.empty(),Ue.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ie()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ie()){const r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ya();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ie()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=yi();const o=La(),a=function(){return La()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Er)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Fa(h.mutation,c,h.mutation.getFieldMask(),Ue.now())):o.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new LN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=La();let r=new Oe((o,a)=>o-a),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Kt.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ie()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=XI();h.forEach(f=>{if(!s.has(f)){const m=ib(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return L.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):L.resolve(zr());let a=-1,l=s;return o.next(c=>L.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ie())).next(h=>({batchId:a,changes:YI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(i=>{let r=ya();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ya();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const c=function(d,f){return new Zh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=ya();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Fa(h.mutation,c,Kt.empty(),Ue.now()),td(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Fn(r.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:kN(r.bundledQuery),readTime:Fn(r.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.overlays=new Oe(G.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zr();return L.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),L.resolve()}getOverlaysForCollection(e,n,i){const r=zr(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return L.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Oe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=zr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=zr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return L.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new sN(n,i));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Tr=new Je(Qe.Er),this.dr=new Je(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Qe(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new G(new ke([])),i=new Qe(n,e),r=new Qe(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new ke([])),i=new Qe(n,e),r=new Qe(n,e+1);let s=ie();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Qe(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Je(Qe.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rN(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qe(n,0),r=new Qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Je(oe);return n.forEach(r=>{const s=new Qe(r,0),o=new Qe(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),L.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new G(s),0);let a=new Je(oe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return L.forEach(n.mutations,r=>{const s=new Qe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Qe(n,0),r=this.br.firstAfterOrEqual(i);return L.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.Mr=e,this.docs=function(){return new Oe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return L.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=yi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():_t.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=yi();const o=n.path,a=new G(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_V(vV(h),i)<=0||(r.has(h.key)||td(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return L.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new HN(this)}getSize(e){return L.resolve(this.size)}}class HN extends NN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.persistence=e,this.Nr=new cs(n=>iy(n),ry),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uy,this.targetCount=0,this.kr=mo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new mo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return L.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),L.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return L.resolve(i)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yh(0),this.Kr=!1,this.Kr=!0,this.$r=new UN,this.referenceDelegate=e(this),this.Ur=new WN(this),this.indexManager=new CN,this.remoteDocumentCache=function(r){return new $N(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new AN(n),this.Gr=new jN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new zN(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){$("MemoryPersistence","Starting transaction:",e);const r=new KN(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return L.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class KN extends TV{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Jr=new uy,this.Yr=null}static Zr(e){return new hy(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),L.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,i=>{const r=G.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class hh{constructor(e,n){this.persistence=e,this.ti=new cs(i=>xV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=VN(this,n)}static Zr(e,n){return new hh(e,n)}zr(){}jr(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}Zn(e,n){return L.forEach(this.ti,(i,r)=>this.nr(e,i,r).next(s=>s?L.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Or(e,o=>this.nr(e,o,n).next(a=>{a||(i++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,n,i){return this.ti.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),L.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pu(e.data.value)),n}nr(e,n,i){return L.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.ti.get(n);return L.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ie(),r=ie();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new dy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return OD()?8:EV(It())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qN;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ws()<=ne.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(ws()<=ne.DEBUG&&$("QueryEngine","Query:",Ts(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ws()<=ne.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):L.resolve())}Yi(e,n){if(vw(n))return L.resolve(null);let i=Ln(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dm(n,null,"F"),i=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,dm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return vw(n)||r.isEqual(J.min())?L.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?L.resolve(null):(ws()<=ne.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ts(n)),this.rs(e,o,n,yV(r,-1)).next(a=>a))})}ts(e,n){let i=new Je(GI(e));return n.forEach((r,s)=>{td(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return ws()<=ne.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Oe(oe),this._s=new cs(s=>iy(s),ry),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YN(t,e,n,i){return new QN(t,e,n,i)}async function gb(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ie();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function XN(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=L.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(T=>{const x=c.docVersions.get(v);de(x!==null),T.version.compareTo(x)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function yb(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function JN(t,e){const n=Z(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(lt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(T,x,y){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=yi(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(ZN(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function ZN(t,e,n){let i=ie(),r=ie();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=yi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function eL(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tL(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,L.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Fi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ym(t,e,n){const i=Z(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ro(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Rw(t,e,n){const i=Z(t);let r=J.min(),s=ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Z(l),f=d._s.get(h);return f!==void 0?L.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,Ln(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:ie())).next(a=>(nL(i,$V(e),a),{documents:a,Ts:s})))}function nL(t,e,n){let i=t.us.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class Dw{constructor(){this.activeTargetIds=QV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iL{constructor(){this.so=new Dw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc=null;function kf(){return Mc===null?Mc=function(){return 268435456+Math.round(2147483648*Math.random())}():Mc++,"0x"+Mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class aL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=kf(),l=this.xo(n,i.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>($("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=sL[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=kf();return new Promise((o,a)=>{const l=new RI;l.setWithCredentials(!0),l.listenOnce(DI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fu.NO_ERROR:const h=l.getResponseJson();$(pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case fu.TIMEOUT:$(pt,`RPC '${e}' ${s} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:const d=l.getStatus();if($(pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(y)>=0?y:F.UNKNOWN}(m.status);a(new W(v,m.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{$(pt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);$(pt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=kf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VI(),a=OI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");$(pt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const v=new oL({Io:x=>{m?$(pt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(f||($(pt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),$(pt,`RPC '${e}' stream ${r} sending:`,x),d.send(x))},To:()=>d.close()}),T=(x,y,w)=>{x.listen(y,S=>{try{w(S)}catch(C){setTimeout(()=>{throw C},0)}})};return T(d,ga.EventType.OPEN,()=>{m||($(pt,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),T(d,ga.EventType.CLOSE,()=>{m||(m=!0,$(pt,`RPC '${e}' stream ${r} transport closed`),v.So())}),T(d,ga.EventType.ERROR,x=>{m||(m=!0,uo(pt,`RPC '${e}' stream ${r} transport errored:`,x),v.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),T(d,ga.EventType.MESSAGE,x=>{var y;if(!m){const w=x.data[0];de(!!w);const S=w,C=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(C){$(pt,`RPC '${e}' stream ${r} received error:`,C);const D=C.status;let V=function(b){const P=ze[b];if(P!==void 0)return sb(P)}(D),I=C.message;V===void 0&&(V=F.INTERNAL,I="Unknown error status: "+D+" with message "+C.message),m=!0,v.So(new W(V,I)),d.close()}else $(pt,`RPC '${e}' stream ${r} received:`,w),v.bo(w)}}),T(a,MI.STAT_EVENT,x=>{x.stat===am.PROXY?$(pt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===am.NOPROXY&&$(pt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return new pN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&$("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new W(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lL extends _b{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yN(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Fn(o.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=hm(l)?{documents:wN(s,l)}:{query:TN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lb(s,o.resumeToken);const c=fm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=uh(s,o.snapshotVersion.toTimestamp());const c=fm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=SN(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.a_(n)}}class cL extends _b{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_N(e.writeResults,e.commitTime),i=Fn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>vN(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,pm(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,pm(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gi(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{us(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await Bl(c),c.q_.set("Unknown"),c.L_.delete(4),await ad(c)}(this))})}),this.q_=new hL(i,r)}}async function ad(t){if(us(t))for(const e of t.B_)await e(!0)}async function Bl(t){for(const e of t.B_)await e(!1)}function wb(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gy(n)?my(n):Do(n).r_()&&py(n,e))}function fy(t,e){const n=Z(t),i=Do(n);n.N_.delete(e),i.r_()&&Tb(n,e),n.N_.size===0&&(i.r_()?i.o_():us(n)&&n.q_.set("Unknown"))}function py(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).A_(e)}function Tb(t,e){t.Q_.xe(e),Do(t).R_(e)}function my(t){t.Q_=new uN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.q_.v_()}function gy(t){return us(t)&&!Do(t).n_()&&t.N_.size>0}function us(t){return Z(t).L_.size===0}function Eb(t){t.Q_=void 0}async function fL(t){t.q_.set("Online")}async function pL(t){t.N_.forEach((e,n)=>{py(t,e)})}async function mL(t,e){Eb(t),gy(t)?(t.q_.M_(e),my(t)):t.q_.set("Unknown")}async function gL(t,e,n){if(t.q_.set("Online"),e instanceof ab&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dh(t,i)}else if(e instanceof yu?t.Q_.Ke(e):e instanceof ob?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await yb(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),Tb(s,l);const d=new Fi(h.target,l,c,h.sequenceNumber);py(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){$("RemoteStore","Failed to raise snapshot:",i),await dh(t,i)}}async function dh(t,e,n){if(!Ro(e))throw e;t.L_.add(1),await Bl(t),t.q_.set("Offline"),n||(n=()=>yb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ad(t)})}function Sb(t,e){return e().catch(n=>dh(t,n,e))}async function ld(t){const e=Z(t),n=ur(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yL(e);)try{const r=await eL(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,vL(e,r)}catch(r){await dh(e,r)}xb(e)&&Ib(e)}function yL(t){return us(t)&&t.O_.length<10}function vL(t,e){t.O_.push(e);const n=ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xb(t){return us(t)&&!ur(t).n_()&&t.O_.length>0}function Ib(t){ur(t).start()}async function _L(t){ur(t).p_()}async function wL(t){const e=ur(t);for(const n of t.O_)e.m_(n.mutations)}async function TL(t,e,n){const i=t.O_.shift(),r=ay.from(i,e,n);await Sb(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ld(t)}async function EL(t,e){e&&ur(t).V_&&await async function(i,r){if(function(o){return aN(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();ur(i).s_(),await Sb(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ld(i)}}(t,e),xb(t)&&Ib(t)}async function Ow(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const i=us(n);n.L_.add(3),await Bl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ad(n)}async function SL(t,e){const n=Z(t);e?(n.L_.delete(2),await ad(n)):e||(n.L_.add(2),await Bl(n),n.q_.set("Unknown"))}function Do(t){return t.K_||(t.K_=function(n,i,r){const s=Z(n);return s.w_(),new lL(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:fL.bind(null,t),Ro:pL.bind(null,t),mo:mL.bind(null,t),d_:gL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gy(t)?my(t):t.q_.set("Unknown")):(await t.K_.stop(),Eb(t))})),t.K_}function ur(t){return t.U_||(t.U_=function(n,i,r){const s=Z(n);return s.w_(),new cL(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_L.bind(null,t),mo:EL.bind(null,t),f_:wL.bind(null,t),g_:TL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ld(t)):(await t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new yy(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(t,e){if(gi("AsyncQueue",`${e}: ${t}`),Ro(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,i)=>e(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=ya(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Js;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.W_=new Oe(G.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class go{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new go(e,n,Js.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IL{constructor(){this.queries=Nw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=Nw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function Nw(){return new cs(t=>qI(t),ed)}async function bb(t,e){const n=Z(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new xL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=vy(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_y(n)}async function Pb(t,e){const n=Z(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function bL(t,e){const n=Z(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&_y(n)}function PL(t,e,n){const i=Z(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function _y(t){t.Y_.forEach(e=>{e.next()})}var vm,Lw;(Lw=vm||(vm={})).ea="default",Lw.Cache="cache";class Ab{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.key=e}}class Cb{constructor(e){this.key=e}}class AL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=GI(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Vw,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=td(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?v!==T&&(i.track({type:3,doc:m}),x=!0):this.ga(f,m)||(i.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),x=!0):f&&!m&&(i.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=T?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,v){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return T(m)-T(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new go(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Cb(i))}),this.da.forEach(i=>{e.has(i)||n.push(new kb(i))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class CL{constructor(e){this.key=e,this.va=!1}}class RL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new cs(a=>qI(a),ed),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(G.comparator),this.Na=new Map,this.La=new uy,this.Ba={},this.ka=new Map,this.qa=mo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DL(t,e,n=!0){const i=Nb(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Rb(i,e,n,!0),r}async function ML(t,e){const n=Nb(t);await Rb(n,e,!0,!1)}async function Rb(t,e,n,i){const r=await tL(t.localStore,Ln(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await OL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&wb(t.remoteStore,r),a}async function OL(t,e,n,i,r){t.Ka=(d,f,m)=>async function(T,x,y,w){let S=x.view.ma(y);S.ns&&(S=await Rw(T.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,S)));const C=w&&w.targetChanges.get(x.targetId),D=w&&w.targetMismatches.get(x.targetId)!=null,V=x.view.applyChanges(S,T.isPrimaryClient,C,D);return jw(T,x.targetId,V.wa),V.snapshot}(t,d,f,m);const s=await Rw(t.localStore,e,!0),o=new AL(e,s.Ts),a=o.ma(s.documents),l=jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);jw(t,n,c.wa);const h=new kL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function VL(t,e,n){const i=Z(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ed(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ym(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&fy(i.remoteStore,r.targetId),_m(i,r.targetId)}).catch(Co)):(_m(i,r.targetId),await ym(i.localStore,r.targetId,!0))}async function NL(t,e){const n=Z(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fy(n.remoteStore,i.targetId))}async function LL(t,e,n){const i=HL(t);try{const r=await function(o,a){const l=Z(o),c=Ue.now(),h=a.reduce((m,v)=>m.add(v.key),ie());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=yi(),T=ie();return l.cs.getEntries(m,h).next(x=>{v=x,v.forEach((y,w)=>{w.isValidDocument()||(T=T.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(x=>{d=x;const y=[];for(const w of a){const S=nN(w,d.get(w.key).overlayedDocument);S!=null&&y.push(new Er(w.key,S,BI(S.value.mapValue),zt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(x=>{f=x;const y=x.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(m,x.batchId,y)})}).then(()=>({batchId:f.batchId,changes:YI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Oe(oe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ul(i,r.changes),await ld(i.remoteStore)}catch(r){const s=vy(r,"Failed to persist write");n.reject(s)}}async function Db(t,e){const n=Z(t);try{const i=await JN(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(de(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?de(o.va):r.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await Ul(n,i,e)}catch(i){await Co(i)}}function Fw(t,e,n){const i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&_y(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FL(t,e,n){const i=Z(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Oe(G.comparator);o=o.insert(s,_t.newNoDocument(s,J.min()));const a=ie().add(s),l=new sd(J.min(),new Map,new Oe(oe),o,a);await Db(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),wy(i)}else await ym(i.localStore,e,!1).then(()=>_m(i,e,n)).catch(Co)}async function jL(t,e){const n=Z(t),i=e.batch.batchId;try{const r=await XN(n.localStore,e);Ob(n,i,null),Mb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ul(n,r)}catch(r){await Co(r)}}async function BL(t,e,n){const i=Z(t);try{const r=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(de(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);Ob(i,e,n),Mb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ul(i,r)}catch(r){await Co(r)}}function Mb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ob(t,e,n){const i=Z(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Vb(t,i)})}function Vb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wy(t))}function jw(t,e,n){for(const i of n)i instanceof kb?(t.La.addReference(i.key,e),UL(t,i)):i instanceof Cb?($("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Vb(t,i.key)):X()}function UL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||($("SyncEngine","New document in limbo: "+n),t.xa.add(i),wy(t))}function wy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(ke.fromString(e)),i=t.qa.next();t.Na.set(i,new CL(n)),t.Oa=t.Oa.insert(n,i),wb(t.remoteStore,new Fi(Ln(sy(n.path)),i,"TargetPurposeLimboResolution",Yh.oe))}}async function Ul(t,e,n){const i=Z(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=dy.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(c,f=>L.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>L.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ro(d))throw d;$("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),v=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,T)}}}(i.localStore,s))}async function zL(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const i=await gb(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ul(n,i.hs)}}function $L(t,e){const n=Z(t),i=n.Na.get(e);if(i&&i.va)return ie().add(i.key);{let r=ie();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Nb(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Db.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FL.bind(null,e),e.Ca.d_=bL.bind(null,e.eventManager),e.Ca.$a=PL.bind(null,e.eventManager),e}function HL(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BL.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YN(this.persistence,new GN,e.initialUser,this.serializer)}Ga(e){return new mb(hy.Zr,this.serializer)}Wa(e){return new iL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class WL extends fh{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){de(this.persistence.referenceDelegate instanceof hh);const i=this.persistence.referenceDelegate.garbageCollector;return new MN(i,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new mb(i=>hh.Zr(i,n),this.serializer)}}class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zL.bind(null,this.syncEngine),await SL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IL}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),i=function(s){return new aL(s)}(e.databaseInfo);return function(s,o,a,l){return new uL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new dL(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Fw(this.syncEngine,n,0),function(){return Mw.D()?new Mw:new rL}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new RL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Z(r);$("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Bl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=LI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{$("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=vy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Rf(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await gb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Bw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Ow(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Ow(e.remoteStore,r)),t._onlineComponents=e}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Rf(t,new fh)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await Rf(t,new WL(void 0));return t._offlineComponents}async function Fb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await Bw(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await Bw(t,new wm))),t._onlineComponents}function GL(t){return Fb(t).then(e=>e.syncEngine)}async function Tm(t){const e=await Fb(t),n=e.eventManager;return n.onListen=DL.bind(null,e.syncEngine),n.onUnlisten=VL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ML.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NL.bind(null,e.syncEngine),n}function QL(t,e,n={}){const i=new Ji;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Lb({next:f=>{h.Za(),o.enqueueAndForget(()=>Pb(s,d)),f.fromCache&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Ab(a,h,{includeMetadataChanges:!0,_a:!0});return bb(s,d)}(await Tm(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YL(t,e,n,i){if(e===!0&&i===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zw(t){if(!G.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $w(t){if(G.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ty(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ty(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lV;switch(i.type){case"firstParty":return new dV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Uw.get(n);i&&($("ComponentProvider","Removing Datastore"),Uw.delete(n),i.terminate())}(this),Promise.resolve()}}function XL(t,e,n,i={}){var r;const s=(t=En(t,cd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=yt.MOCK_USER;else{a=PD(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}t._authCredentials=new cV(new NI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new zl(this.firestore,e,this._query)}}class Gt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class Zi extends zl{constructor(e,n,i){super(e,n,sy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new G(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function Dn(t,e,...n){if(t=Ge(t),Bb("collection","path",e),t instanceof cd){const i=ke.fromString(e,...n);return $w(i),new Zi(t,null,i)}{if(!(t instanceof Gt||t instanceof Zi))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ke.fromString(e,...n));return $w(i),new Zi(t.firestore,null,i)}}function er(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=LI.newId()),Bb("doc","path",e),t instanceof cd){const i=ke.fromString(e,...n);return zw(i),new Gt(t,null,new G(i))}{if(!(t instanceof Gt||t instanceof Zi))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ke.fromString(e,...n));return zw(i),new Gt(t.firestore,t instanceof Zi?t.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vb(this,"async_queue_retry"),this.Vu=()=>{const i=Cf();i&&$("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Cf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ji;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ro(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw gi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=yy.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Kw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class hr extends cd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Ww,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ww(e),this._firestoreClient=void 0,await e}}}function hs(t,e){const n=typeof t=="object"?t:H1(),i=typeof t=="string"?t:"(default)",r=Hg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=ID("firestore");s&&XL(r,...s)}return r}function ud(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JL(t),t._firestoreClient}function JL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new PV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jb(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new KL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(lt.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yo(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=/^__.*__$/;class eF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}class Ub{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Iy{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Iy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zb(this.Cu)&&ZL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||od(e)}Qu(e,n,i,r=!1){return new Iy({Cu:e,methodName:n,qu:i,path:st.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(t){const e=t._freezeSettings(),n=od(t._databaseId);return new tF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Py(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Ay("Data must be an object, but it was:",o,i);const a=$b(i,o);let l,c;if(s.merge)l=new Kt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Em(e,d,n);if(!o.contains(f))throw new W(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Wb(h,f)||h.push(f)}l=new Kt(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new eF(new Nt(a),l,c)}class dd extends Ey{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function nF(t,e,n,i){const r=t.Qu(1,e,n);Ay("Data must be an object, but it was:",r,i);const s=[],o=Nt.empty();Tr(i,(l,c)=>{const h=ky(e,l,n);c=Ge(c);const d=r.Nu(h);if(c instanceof dd)s.push(h);else{const f=fd(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Kt(s);return new Ub(o,a,r.fieldTransforms)}function iF(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Em(e,i,n)],l=[r];if(s.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Em(e,s[f])),l.push(s[f+1]);const c=[],h=Nt.empty();for(let f=a.length-1;f>=0;--f)if(!Wb(c,a[f])){const m=a[f];let v=l[f];v=Ge(v);const T=o.Nu(m);if(v instanceof dd)c.push(m);else{const x=fd(v,T);x!=null&&(c.push(m),h.set(m,x))}}const d=new Kt(c);return new Ub(h,d,o.fieldTransforms)}function fd(t,e){if(Hb(t=Ge(t)))return Ay("Unsupported field value:",e,t),$b(t,e);if(t instanceof Ey)return function(i,r){if(!zb(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=fd(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ge(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ue.fromDate(i);return{timestampValue:uh(r.serializer,s)}}if(i instanceof Ue){const s=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uh(r.serializer,s)}}if(i instanceof Sy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yo)return{bytesValue:lb(r.serializer,i._byteString)};if(i instanceof Gt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return oy(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Ty(i)}`)}(t,e)}function $b(t,e){const n={};return FI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(t,(i,r)=>{const s=fd(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Hb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Sy||t instanceof yo||t instanceof Gt||t instanceof Ey||t instanceof xy)}function Ay(t,e,n){if(!Hb(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Ty(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Em(t,e,n){if((e=Ge(e))instanceof hd)return e._internalPath;if(typeof e=="string")return ky(t,e);throw ph("Field path arguments must be of type string or ",t,!1,void 0,n)}const rF=new RegExp("[~\\*/\\[\\]]");function ky(t,e,n){if(e.search(rF)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ph(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function Wb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sF extends Kb{data(){return super.data()}}function qb(t,e){return typeof e=="string"?ky(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oF{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Tr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Fe(o.doubleValue));return new xy(s)}convertGeoPoint(e){return new Sy(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Jh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=ar(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ke.fromString(e);de(pb(i));const r=new pl(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||gi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qb extends Kb{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(qb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vu extends Qb{data(e={}){return super.data(e)}}class Yb{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new _a(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vu(this._firestore,this._userDataWriter,i.key,i,new _a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new vu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _a(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _a(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:aF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Ry extends oF{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function qw(t){t=En(t,zl);const e=En(t.firestore,hr),n=ud(e),i=new Ry(e);return Gb(t._query),QL(n,t._query).then(r=>new Yb(e,i,t,r))}function Zs(t,e,n){t=En(t,Gt);const i=En(t.firestore,hr),r=Cy(t.converter,e,n);return md(i,[Py(by(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,zt.none())])}function lF(t){return md(En(t.firestore,hr),[new rd(t._key,zt.none())])}function Xb(t,e){const n=En(t.firestore,hr),i=er(t),r=Cy(t.converter,e);return md(n,[Py(by(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,zt.exists(!1))]).then(()=>i)}function pd(t,...e){var n,i,r;t=Ge(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Kw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Gt)c=En(t.firestore,hr),h=sy(t._key.path),l={next:d=>{e[o]&&e[o](cF(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=En(t,zl);c=En(d.firestore,hr),h=d._query;const f=new Ry(c);l={next:m=>{e[o]&&e[o](new Yb(c,f,d,m))},error:e[o+1],complete:e[o+2]},Gb(t._query)}return function(f,m,v,T){const x=new Lb(T),y=new Ab(m,x,v);return f.asyncQueue.enqueueAndForget(async()=>bb(await Tm(f),y)),()=>{x.Za(),f.asyncQueue.enqueueAndForget(async()=>Pb(await Tm(f),y))}}(ud(c),h,a,l)}function md(t,e){return function(i,r){const s=new Ji;return i.asyncQueue.enqueueAndForget(async()=>LL(await GL(i),r,s)),s.promise}(ud(t),e)}function cF(t,e,n){const i=n.docs.get(e._key),r=new Ry(t);return new Qb(t,r,e._key,i,new _a(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=by(e)}set(e,n,i){this._verifyNotCommitted();const r=Df(e,this._firestore),s=Cy(r.converter,n,i),o=Py(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,zt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Df(e,this._firestore);let o;return o=typeof(n=Ge(n))=="string"||n instanceof hd?iF(this._dataReader,"WriteBatch.update",s._key,n,i,r):nF(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Df(e,this._firestore);return this._mutations=this._mutations.concat(new rd(n._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Df(t,e){if((t=Ge(t)).firestore!==e)throw new W(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){return ud(t=En(t,hr)),new uF(t,e=>md(t,e))}(function(e,n=!0){(function(r){ko=r})(bo),co(new ts("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new hr(new uV(i.getProvider("auth-internal")),new pV(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xi(aw,"4.7.4",e),Xi(aw,"4.7.4","esm2017")})();var dF="firebase",fF="11.0.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(dF,fF,"app");const pF={apiKey:"AIzaSyC5-5G-Vjf9b0dAwTak65OIENSVEUtWX7w",authDomain:"gestorreact.firebaseapp.com",projectId:"gestorreact",storageBucket:"gestorreact.appspot.com",messagingSenderId:"433890268148",appId:"1:433890268148:web:6dfe1456444dae12799fa1"},Zt=$1(pF),vs=hs(Zt);function Gw({uidUsuario:t,tipo:e}){const[n,i]=z.useState([]),r=n.reduce((a,l)=>a+l.cantidad,0);z.useEffect(()=>{if(t&&e){const a=Dn(vs,`users/${t}/${e}`),l=pd(a,c=>{const h=c.docs.map(d=>({id:d.id,...d.data()}));i(h)});return()=>l()}},[t,e]);const s=async a=>{try{await lF(er(vs,`users/${t}/${e}`,a)),i(n.filter(l=>l.id!==a))}catch{}},o=async()=>{const a=new Date;try{const l=await qw(Dn(vs,`users/${t}/ingresos`)),c=await qw(Dn(vs,`users/${t}/egresos`));if(l.empty||c.empty){alert("Debe ingresar a menos un ingreso y un egreso para archivar.");return}const h=l.docs.reduce((m,v)=>m+v.data().cantidad,0),d=c.docs.reduce((m,v)=>m+v.data().cantidad,0);await Xb(Dn(vs,`users/${t}/archivos`),{totalIngresos:h,totalEgresos:d,fecha:a});const f=hF(vs);l.docs.forEach(m=>{f.delete(m.ref)}),c.docs.forEach(m=>{f.delete(m.ref)}),await f.commit(),i([])}catch{}};return O.jsxs("div",{className:"rounded overflow-hidden font-semibold h-full flex flex-col",children:[O.jsx("div",{className:"overflow-y-auto flex-grow",children:O.jsxs("table",{className:"w-full text-xs text-left rtl:text-right text-black font-bold",style:{tableLayout:"auto"},children:[O.jsx("thead",{className:"text-xs font-semibold bg-gray-50 dark:text-gray-400",children:O.jsxs("tr",{className:"font-bold",children:[O.jsx("th",{scope:"col",className:"px-2 py-1 text-black",children:"Nombre"}),O.jsx("th",{scope:"col",className:"px-2 py-1 text-black",children:"Descripcin"}),O.jsx("th",{scope:"col",className:"px-6 py-1 text-black",children:"Cantidad"}),O.jsx("th",{scope:"col",className:"px-6 py-1 text-black"})]})}),O.jsx("tbody",{className:"font-bold",children:n.length>0?n.map(a=>O.jsxs("tr",{className:"bg-white dark:border-gray-700 hover:bg-[#E8EAED]",children:[O.jsx("th",{scope:"row",className:"px-2 py-1 font-medium whitespace-nowrap text-black",children:a.nombre}),O.jsx("td",{className:"px-6 py-1",children:a.descripcion}),O.jsx("td",{className:"px-6 py-1",children:a.cantidad}),O.jsx("td",{className:"px-6 py-1 text-right",children:O.jsx("button",{type:"button",onClick:()=>s(a.id),className:"bg-[#854DFF] text-white font-bold py-2 px-4 rounded hover:bg-[#CA9EFF] transition duration-200",children:"Eliminar"})})]},a.id)):O.jsx("tr",{children:O.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles."})},"no-data")})]})}),O.jsx("div",{className:"sticky bottom-0 bg-gray-100 pb-6",children:O.jsx("table",{className:"w-full text-xs text-left rtl:text-right text-black font-bold",children:O.jsx("tfoot",{children:O.jsxs("tr",{className:"font-bold bg-gray-100",children:[O.jsx("td",{colSpan:"2",className:"px-2 py-1 text-right",children:"Total:"}),O.jsx("td",{className:"px-6 py-1 text-black",children:r}),O.jsx("td",{children:O.jsx("button",{type:"button",onClick:o,className:"bg-green-500 relative left-6 text-white font-bold py-2 px-4 rounded hover:bg-green-600 transition duration-200",children:"Archivar"})})]})})})})]})}const mF=hs(Zt),gF=Ao(Zt);function Qw({action:t,setOpen:e}){const[n,i]=z.useState({nombre:"",descripcion:"",cantidad:""}),r=o=>{const{id:a,value:l}=o.target;i(c=>({...c,[a]:l}))},s=async o=>{o.preventDefault();try{const a=gF.currentUser;if(!a){alert("Debes iniciar sesin para agregar ingresos o egresos.");return}const l=a.uid,c=er(mF,"users",l);await Zs(c,{createdAt:new Date},{merge:!0});const d=Dn(c,t==="ingreso"?"ingresos":"egresos");await Xb(d,{nombre:n.nombre,descripcion:n.descripcion,cantidad:parseFloat(n.cantidad),fecha:new Date}),console.log(`${t==="ingreso"?"Ingreso":"Egreso"} guardado exitosamente`),i({nombre:"",descripcion:"",cantidad:""}),e(!1)}catch{}};return O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center",children:O.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96 flex flex-col items-center",children:[O.jsx("h1",{className:"text-2xl font-semibold mb-4 text-gray-700 text-center",children:t==="ingreso"?"Agregar Ingreso":"Agregar Egreso"}),O.jsxs("form",{onSubmit:s,className:"flex flex-col gap-4 w-full",children:[O.jsxs("div",{className:"flex flex-col",children:[O.jsx("label",{htmlFor:"nombre",className:"text-gray-600 font-medium mb-1",children:"Nombre"}),O.jsx("input",{type:"text",id:"nombre",value:n.nombre,onChange:r,placeholder:"Nombre",required:!0,className:"px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#854EFF]"})]}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("label",{htmlFor:"descripcion",className:"text-gray-600 font-medium mb-1",children:"Descripcin"}),O.jsx("input",{type:"text",id:"descripcion",value:n.descripcion,onChange:r,placeholder:"Ingresa una descripcin",className:"px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#854EFF]"})]}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("label",{htmlFor:"cantidad",className:"text-gray-600 font-medium mb-1",children:"Cantidad"}),O.jsx("input",{type:"number",id:"cantidad",value:n.cantidad,onChange:r,placeholder:"Ingresa el Monto en N",required:!0,className:"px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#854EFF]"})]}),O.jsxs("button",{type:"submit",className:"mt-4 bg-[#854DFF] py-2 px-6 rounded text-white font-bold hover:bg-[#CA9EFF] transition duration-200",children:["Guardar ",t==="ingreso"?"Ingreso":"Egreso"]})]}),O.jsx("button",{className:"mt-6 bg-red-500 py-2 px-6 rounded text-white font-bold hover:bg-red-600 transition duration-200",onClick:()=>e(!1),children:"Cerrar"})]})})}const Yw=hs(Zt),yF=Ao(Zt);function vF({setOpen:t,onPresupuestoAdded:e}){const[n,i]=z.useState({cantidad:""}),r=o=>{const{id:a,value:l}=o.target;i(c=>({...c,[a]:l}))},s=async o=>{o.preventDefault();try{const a=yF.currentUser;if(!a){alert("Debes iniciar sesin para agregar un presupuesto.");return}const l=a.uid,c=er(Yw,"users",l);await Zs(c,{createdAt:new Date},{merge:!0});const h=er(Yw,`users/${l}/presupuestos/presupuesto`);await Zs(h,{cantidad:parseFloat(n.cantidad),fecha:new Date}),console.log("Presupuesto guardado exitosamente"),i({cantidad:""}),e(),t(!1)}catch{}};return O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center",children:O.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96 flex flex-col items-center",children:[O.jsx("h1",{className:"text-2xl font-semibold mb-4 text-gray-700 text-center",children:"Agregar Presupuesto"}),O.jsxs("form",{onSubmit:s,className:"flex flex-col gap-4 w-full",children:[O.jsxs("div",{className:"flex flex-col",children:[O.jsx("label",{htmlFor:"cantidad",className:"text-gray-600 font-medium mb-1",children:"Cantidad"}),O.jsx("input",{type:"number",id:"cantidad",value:n.cantidad,onChange:r,placeholder:"Ingresa el Monto en N",required:!0,className:"px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#854EFF]"})]}),O.jsx("button",{type:"submit",className:"mt-4 bg-[#854DFF] py-2 px-6 rounded text-white font-bold hover:bg-[#CA9EFF] transition duration-200",children:"Guardar Presupuesto"})]}),O.jsx("button",{className:"mt-6 bg-red-500 py-2 px-6 rounded text-white font-bold hover:bg-red-600 transition duration-200",onClick:()=>t(!1),children:"Cerrar"})]})})}function _F(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}function gd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sm=t=>Array.isArray(t);function Jb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function vl(t){return typeof t=="string"||Array.isArray(t)}function Xw(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Dy(t,e,n,i){if(typeof e=="function"){const[r,s]=Xw(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=Xw(i);e=e(n!==void 0?n:t.custom,r,s)}return e}function yd(t,e,n){const i=t.getProps();return Dy(i,e,n!==void 0?n:i.custom,t)}const My=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Oy=["initial",...My],$l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ds=new Set($l),oi=t=>t*1e3,ai=t=>t/1e3,wF={type:"spring",stiffness:500,damping:25,restSpeed:10},TF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),EF={type:"keyframes",duration:.8},SF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xF=(t,{keyframes:e})=>e.length>2?EF:ds.has(t)?t.startsWith("scale")?TF(e[1]):wF:SF;function Vy(t,e){return t?t[e]||t.default||t:void 0}const IF={skipAnimations:!1,useManualTiming:!1},bF=t=>t!==null;function vd(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(bF),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const Et=t=>t;function PF(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,d=!1)=>{const m=d&&i?e:n;return h&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,n]=[n,e],n.clear(),e.forEach(a),i=!1,r&&(r=!1,l.process(c))}};return l}const Oc=["read","resolveKeyframes","update","preRender","render","postRender"],AF=40;function Zb(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Oc.reduce((y,w)=>(y[w]=PF(s),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=o,m=()=>{const y=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(y-r.timestamp,AF),1),r.timestamp=y,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(m))},v=()=>{n=!0,i=!0,r.isProcessing||t(m)};return{schedule:Oc.reduce((y,w)=>{const S=o[w];return y[w]=(C,D=!1,V=!1)=>(n||v(),S.schedule(C,D,V)),y},{}),cancel:y=>{for(let w=0;w<Oc.length;w++)o[Oc[w]].cancel(y)},state:r,steps:o}}const{schedule:ye,cancel:dr,state:it,steps:Mf}=Zb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Et,!0),eP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kF=1e-7,CF=12;function RF(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=eP(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>kF&&++a<CF);return o}function Hl(t,e,n,i){if(t===e&&n===i)return Et;const r=s=>RF(s,0,1,t,n);return s=>s===0||s===1?s:eP(r(s),e,i)}const tP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nP=t=>e=>1-t(1-e),iP=Hl(.33,1.53,.69,.99),Ny=nP(iP),rP=tP(Ny),sP=t=>(t*=2)<1?.5*Ny(t):.5*(2-Math.pow(2,-10*(t-1))),Ly=t=>1-Math.sin(Math.acos(t)),oP=nP(Ly),aP=tP(Ly),lP=t=>/^0[^.\s]+$/u.test(t);function DF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lP(t):!0}let xm=Et;const cP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),uP=t=>e=>typeof e=="string"&&e.startsWith(t),hP=uP("--"),MF=uP("var(--"),Fy=t=>MF(t)?OF.test(t.split("/*")[0].trim()):!1,OF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,VF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NF(t){const e=VF.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function dP(t,e,n=1){const[i,r]=NF(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return cP(o)?parseFloat(o):o}return Fy(r)?dP(r,e,n+1):r}const fr=(t,e,n)=>n>e?e:n<t?t:n,Mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},_l={...Mo,transform:t=>fr(0,1,t)},Vc={...Mo,default:1},Wl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bi=Wl("deg"),jn=Wl("%"),Q=Wl("px"),LF=Wl("vh"),FF=Wl("vw"),Jw={...jn,parse:t=>jn.parse(t)/100,transform:t=>jn.transform(t*100)},jF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Zw=t=>t===Mo||t===Q,eT=(t,e)=>parseFloat(t.split(", ")[e]),tT=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return eT(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?eT(s[1],t):0}},BF=new Set(["x","y","z"]),UF=$l.filter(t=>!BF.has(t));function zF(t){const e=[];return UF.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const vo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:tT(4,13),y:tT(5,14)};vo.translateX=vo.x;vo.translateY=vo.y;const fP=t=>e=>e.test(t),$F={test:t=>t==="auto",parse:t=>t},pP=[Mo,Q,jn,bi,FF,LF,$F],nT=t=>pP.find(fP(t)),Gr=new Set;let Im=!1,bm=!1;function mP(){if(bm){const t=Array.from(Gr).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=zF(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}bm=!1,Im=!1,Gr.forEach(t=>t.complete()),Gr.clear()}function gP(){Gr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bm=!0)})}function HF(){gP(),mP()}class jy{constructor(e,n,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gr.add(this),Im||(Im=!0,ye.read(gP),ye.resolveKeyframes(mP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const l=i.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ja=t=>Math.round(t*1e5)/1e5,By=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WF(t){return t==null}const KF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uy=(t,e)=>n=>!!(typeof n=="string"&&KF.test(n)&&n.startsWith(t)||e&&!WF(n)&&Object.prototype.hasOwnProperty.call(n,e)),yP=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(By);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qF=t=>fr(0,255,t),Of={...Mo,transform:t=>Math.round(qF(t))},$r={test:Uy("rgb","red"),parse:yP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Of.transform(t)+", "+Of.transform(e)+", "+Of.transform(n)+", "+ja(_l.transform(i))+")"};function GF(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Pm={test:Uy("#"),parse:GF,transform:$r.transform},Ls={test:Uy("hsl","hue"),parse:yP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+jn.transform(ja(e))+", "+jn.transform(ja(n))+", "+ja(_l.transform(i))+")"},gt={test:t=>$r.test(t)||Pm.test(t)||Ls.test(t),parse:t=>$r.test(t)?$r.parse(t):Ls.test(t)?Ls.parse(t):Pm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$r.transform(t):Ls.transform(t)},QF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YF(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(By))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(QF))===null||n===void 0?void 0:n.length)||0)>0}const vP="number",_P="color",XF="var",JF="var(",iT="${}",ZF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(ZF,l=>(gt.test(l)?(i.color.push(s),r.push(_P),n.push(gt.parse(l))):l.startsWith(JF)?(i.var.push(s),r.push(XF),n.push(l)):(i.number.push(s),r.push(vP),n.push(parseFloat(l))),++s,iT)).split(iT);return{values:n,split:a,indexes:i,types:r}}function wP(t){return wl(t).values}function TP(t){const{split:e,types:n}=wl(t),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=n[o];a===vP?s+=ja(r[o]):a===_P?s+=gt.transform(r[o]):s+=r[o]}return s}}const e4=t=>typeof t=="number"?0:t;function t4(t){const e=wP(t);return TP(t)(e.map(e4))}const pr={test:YF,parse:wP,createTransformer:TP,getAnimatableNone:t4},n4=new Set(["brightness","contrast","saturate","opacity"]);function i4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(By)||[];if(!i)return t;const r=n.replace(i,"");let s=n4.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const r4=/\b([a-z-]*)\(.*?\)/gu,Am={...pr,getAnimatableNone:t=>{const e=t.match(r4);return e?e.map(i4).join(" "):t}},s4={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q},o4={rotate:bi,rotateX:bi,rotateY:bi,rotateZ:bi,scale:Vc,scaleX:Vc,scaleY:Vc,scaleZ:Vc,skew:bi,skewX:bi,skewY:bi,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:_l,originX:Jw,originY:Jw,originZ:Q},rT={...Mo,transform:Math.round},zy={...s4,...o4,zIndex:rT,size:Q,fillOpacity:_l,strokeOpacity:_l,numOctaves:rT},a4={...zy,color:gt,backgroundColor:gt,outlineColor:gt,fill:gt,stroke:gt,borderColor:gt,borderTopColor:gt,borderRightColor:gt,borderBottomColor:gt,borderLeftColor:gt,filter:Am,WebkitFilter:Am},$y=t=>a4[t];function EP(t,e){let n=$y(t);return n!==Am&&(n=pr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const l4=new Set(["auto","none","0"]);function c4(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!l4.has(s)&&wl(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=EP(n,r)}class SP extends jy{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Fy(c))){const h=dP(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!jF.has(i)||e.length!==2)return;const[r,s]=e,o=nT(r),a=nT(s);if(o!==a)if(Zw(o)&&Zw(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)DF(e[r])&&i.push(r);i.length&&c4(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=vo[i](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Hy(t){return typeof t=="function"}let _u;function u4(){_u=void 0}const Bn={now:()=>(_u===void 0&&Bn.set(it.isProcessing||IF.useManualTiming?it.timestamp:performance.now()),_u),set:t=>{_u=t,queueMicrotask(u4)}},sT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pr.test(t)||t==="0")&&!t.startsWith("url("));function h4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function d4(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=sT(r,e),a=sT(s,e);return!o||!a?!1:h4(t)||(n==="spring"||Hy(n))&&i}const f4=40;class xP{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Bn.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>f4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&HF(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Bn.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!d4(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(vd(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function IP(t,e){return e?t*(1e3/e):0}const p4=5;function bP(t,e,n){const i=Math.max(e-p4,0);return IP(n-t(i),e-i)}const Vf=.001,m4=.01,g4=10,y4=.05,v4=1;function _4({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s,o=1-e;o=fr(y4,v4,o),t=fr(m4,g4,ai(t)),o<1?(r=c=>{const h=c*o,d=h*t,f=h-n,m=km(c,o),v=Math.exp(-d);return Vf-f/m*v},s=c=>{const d=c*o*t,f=d*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-d),T=km(Math.pow(c,2),o);return(-r(c)+Vf>0?-1:1)*((f-m)*v)/T}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Vf+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=T4(r,s,a);if(t=oi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const w4=12;function T4(t,e,n){let i=n;for(let r=1;r<w4;r++)i=i-t(i)/e(i);return i}function km(t,e){return t*Math.sqrt(1-e*e)}const E4=["duration","bounce"],S4=["stiffness","damping","mass"];function oT(t,e){return e.some(n=>t[n]!==void 0)}function x4(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!oT(t,S4)&&oT(t,E4)){const n=_4(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function PP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=x4({...i,velocity:-ai(i.velocity||0)}),m=d||0,v=l/(2*Math.sqrt(a*c)),T=s-r,x=ai(Math.sqrt(a/c)),y=Math.abs(T)<5;n||(n=y?.01:2),e||(e=y?.005:.5);let w;if(v<1){const S=km(x,v);w=C=>{const D=Math.exp(-v*x*C);return s-D*((m+v*x*T)/S*Math.sin(S*C)+T*Math.cos(S*C))}}else if(v===1)w=S=>s-Math.exp(-x*S)*(T+(m+x*T)*S);else{const S=x*Math.sqrt(v*v-1);w=C=>{const D=Math.exp(-v*x*C),V=Math.min(S*C,300);return s-D*((m+v*x*T)*Math.sinh(V)+S*T*Math.cosh(V))/S}}return{calculatedDuration:f&&h||null,next:S=>{const C=w(S);if(f)o.done=S>=h;else{let D=0;v<1&&(D=S===0?oi(m):bP(w,S,C));const V=Math.abs(D)<=n,I=Math.abs(s-C)<=e;o.done=V&&I}return o.value=o.done?s:C,o}}}function aT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},m=_=>a!==void 0&&_<a||l!==void 0&&_>l,v=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let T=n*e;const x=d+T,y=o===void 0?x:o(x);y!==x&&(T=y-d);const w=_=>-T*Math.exp(-_/i),S=_=>y+w(_),C=_=>{const b=w(_),P=S(_);f.done=Math.abs(b)<=c,f.value=f.done?y:P};let D,V;const I=_=>{m(f.value)&&(D=_,V=PP({keyframes:[f.value,v(f.value)],velocity:bP(S,_,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return I(0),{calculatedDuration:null,next:_=>{let b=!1;return!V&&D===void 0&&(b=!0,C(_),I(_)),D!==void 0&&_>=D?V.next(_-D):(!b&&C(_),f)}}}const I4=Hl(.42,0,1,1),b4=Hl(0,0,.58,1),AP=Hl(.42,0,.58,1),P4=t=>Array.isArray(t)&&typeof t[0]!="number",Wy=t=>Array.isArray(t)&&typeof t[0]=="number",lT={linear:Et,easeIn:I4,easeInOut:AP,easeOut:b4,circIn:Ly,circInOut:aP,circOut:oP,backIn:Ny,backInOut:rP,backOut:iP,anticipate:sP},cT=t=>{if(Wy(t)){xm(t.length===4);const[e,n,i,r]=t;return Hl(e,n,i,r)}else if(typeof t=="string")return xm(lT[t]!==void 0),lT[t];return t},A4=(t,e)=>n=>e(t(n)),li=(...t)=>t.reduce(A4),_o=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Re=(t,e,n)=>t+(e-t)*n;function Nf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function k4({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=Nf(l,a,t+1/3),s=Nf(l,a,t),o=Nf(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function mh(t,e){return n=>n>0?e:t}const Lf=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},C4=[Pm,$r,Ls],R4=t=>C4.find(e=>e.test(t));function uT(t){const e=R4(t);if(!e)return!1;let n=e.parse(t);return e===Ls&&(n=k4(n)),n}const hT=(t,e)=>{const n=uT(t),i=uT(e);if(!n||!i)return mh(t,e);const r={...n};return s=>(r.red=Lf(n.red,i.red,s),r.green=Lf(n.green,i.green,s),r.blue=Lf(n.blue,i.blue,s),r.alpha=Re(n.alpha,i.alpha,s),$r.transform(r))},Cm=new Set(["none","hidden"]);function D4(t,e){return Cm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function M4(t,e){return n=>Re(t,e,n)}function Ky(t){return typeof t=="number"?M4:typeof t=="string"?Fy(t)?mh:gt.test(t)?hT:N4:Array.isArray(t)?kP:typeof t=="object"?gt.test(t)?hT:O4:mh}function kP(t,e){const n=[...t],i=n.length,r=t.map((s,o)=>Ky(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}}function O4(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=Ky(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function V4(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][r[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;i[s]=l,r[o]++}return i}const N4=(t,e)=>{const n=pr.createTransformer(e),i=wl(t),r=wl(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Cm.has(t)&&!r.values.length||Cm.has(e)&&!i.values.length?D4(t,e):li(kP(V4(i,r),r.values),n):mh(t,e)};function CP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Re(t,e,n):Ky(t)(t,e)}function L4(t,e,n){const i=[],r=n||CP,s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Et:e;a=li(l,a)}i.push(a)}return i}function F4(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(xm(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=L4(e,i,r),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=_o(t[h],t[h+1],c);return o[h](d)};return n?c=>l(fr(t[0],t[s-1],c)):l}function j4(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=_o(0,e,i);t.push(Re(n,1,r))}}function B4(t){const e=[0];return j4(e,t.length-1),e}function U4(t,e){return t.map(n=>n*e)}function z4(t,e){return t.map(()=>e||AP).splice(0,t.length-1)}function gh({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=P4(i)?i.map(cT):cT(i),s={done:!1,value:e[0]},o=U4(n&&n.length===e.length?n:B4(e),t),a=F4(o,e,{ease:Array.isArray(r)?r:z4(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const dT=2e4;function $4(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<dT;)e+=n,i=t.next(e);return e>=dT?1/0:e}const H4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ye.update(e,!0),stop:()=>dr(e),now:()=>it.isProcessing?it.timestamp:Bn.now()}},W4={decay:aT,inertia:aT,tween:gh,keyframes:gh,spring:PP},K4=t=>t/100;class qy extends xP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||jy,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=Hy(n)?n:W4[n]||gh;let l,c;a!==gh&&typeof e[0]!="number"&&(l=li(K4,CP(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=$4(h));const{calculatedDuration:d}=h,f=d+r,m=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:T,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?y<0:y>h;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let S=this.currentTime,C=s;if(m){const _=Math.min(this.currentTime,h)/d;let b=Math.floor(_),P=_%1;!P&&_>=1&&(P=1),P===1&&b--,b=Math.min(b,m+1),!!(b%2)&&(v==="reverse"?(P=1-P,T&&(P-=T/d)):v==="mirror"&&(C=o)),S=fr(0,1,P)*d}const D=w?{done:!1,value:l[0]}:C.next(S);a&&(D.value=a(D.value));let{done:V}=D;!w&&c!==null&&(V=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return I&&r!==void 0&&(D.value=vd(l,this.options,r)),x&&x(D.value),I&&this.finish(),D}get duration(){const{resolved:e}=this;return e?ai(e.calculatedDuration):0}get time(){return ai(this.currentTime)}set time(e){e=oi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ai(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=H4,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const q4=new Set(["opacity","clipPath","filter","transform"]),G4=10,Q4=(t,e)=>{let n="";const i=Math.max(Math.round(e/G4),2);for(let r=0;r<i;r++)n+=t(_o(0,i-1,r))+", ";return`linear(${n.substring(0,n.length-2)})`};function Gy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Y4={linearEasing:void 0};function X4(t,e){const n=Gy(t);return()=>{var i;return(i=Y4[e])!==null&&i!==void 0?i:n()}}const yh=X4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function RP(t){return!!(typeof t=="function"&&yh()||!t||typeof t=="string"&&(t in Rm||yh())||Wy(t)||Array.isArray(t)&&t.every(RP))}const wa=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Rm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wa([0,.65,.55,1]),circOut:wa([.55,0,1,.45]),backIn:wa([.31,.01,.66,-.59]),backOut:wa([.33,1.53,.69,.99])};function DP(t,e){if(t)return typeof t=="function"&&yh()?Q4(t,e):Wy(t)?wa(t):Array.isArray(t)?t.map(n=>DP(n,e)||Rm.easeOut):Rm[t]}function J4(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=DP(a,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function fT(t,e){t.timeline=e,t.onfinish=null}const Z4=Gy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vh=10,ej=2e4;function tj(t){return Hy(t.type)||t.type==="spring"||!RP(t.ease)}function nj(t,e){const n=new qy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<ej;)i=n.sample(s),r.push(i.value),s+=vh;return{times:void 0,keyframes:r,duration:s-vh,ease:"linear"}}const MP={anticipate:sP,backInOut:rP,circInOut:aP};function ij(t){return t in MP}class pT extends xP{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new SP(s,(o,a)=>this.onKeyframesResolved(o,a),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:h}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(typeof o=="string"&&yh()&&ij(o)&&(o=MP[o]),tj(this.options)){const{onComplete:f,onUpdate:m,motionValue:v,element:T,...x}=this.options,y=nj(e,x);e=y.keyframes,e.length===1&&(e[1]=e[0]),r=y.duration,s=y.times,o=y.ease,a="keyframes"}const d=J4(l.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(fT(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(vd(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ai(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ai(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=oi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Et;const{animation:i}=n;fT(i,e)}return Et}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...m}=this.options,v=new qy({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),T=oi(this.time);c.setWithVelocity(v.sample(T-vh).value,v.sample(T).value,vh)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return Z4()&&i&&q4.has(i)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const rj=Gy(()=>window.ScrollTimeline!==void 0);class sj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>rj()&&r.attachTimeline?r.attachTimeline(e):n(r));return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function oj({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Qy=(t,e,n,i={},r,s)=>o=>{const a=Vy(i,t)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-oi(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:r};oj(a)||(h={...h,...xF(t,h)}),h.duration&&(h.duration=oi(h.duration)),h.repeatDelay&&(h.repeatDelay=oi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=vd(h.keyframes,a);if(f!==void 0)return ye.update(()=>{h.onUpdate(f),h.onComplete()}),new sj([])}return!s&&pT.supports(h)?new pT(h):new qy(h)},aj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lj=t=>Sm(t)?t[t.length-1]||0:t;function Yy(t,e){t.indexOf(e)===-1&&t.push(e)}function Xy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Jy{constructor(){this.subscriptions=[]}add(e){return Yy(this.subscriptions,e),()=>Xy(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mT=30,cj=t=>!isNaN(parseFloat(t));class uj{constructor(e,n={}){this.version="11.11.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Bn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Jy);const i=this.events[e].add(n);return e==="change"?()=>{i(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mT);return IP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tl(t,e){return new uj(t,e)}function hj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tl(n))}function dj(t,e){const n=yd(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const o in s){const a=lj(s[o]);hj(t,o,a)}}const Zy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fj="framerAppearId",OP="data-"+Zy(fj);function VP(t){return t.props[OP]}const wt=t=>!!(t&&t.getVelocity);function pj(t){return!!(wt(t)&&t.add)}function Dm(t,e){const n=t.getValue("willChange");if(pj(n))return n.add(e)}function mj({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function NP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||h&&mj(h,d))continue;const v={delay:n,...Vy(o||{},d)};let T=!1;if(window.MotionHandoffAnimation){const y=VP(t);if(y){const w=window.MotionHandoffAnimation(y,d,ye);w!==null&&(v.startTime=w,T=!0)}}Dm(t,d),f.start(Qy(d,f,m,t.shouldReduceMotion&&ds.has(d)?{type:!1}:v,t,T));const x=f.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{ye.update(()=>{a&&dj(t,a)})}),c}function Mm(t,e,n={}){var i;const r=yd(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(NP(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return gj(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function gj(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(yj).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Mm(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function yj(t,e){return t.sortNodePosition(e)}function vj(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Mm(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=Mm(t,e,n);else{const r=typeof e=="function"?yd(t,e,n.custom):e;i=Promise.all(NP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const _j=Oy.length;function LP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?LP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_j;n++){const i=Oy[n],r=t.props[i];(vl(r)||r===!1)&&(e[i]=r)}return e}const wj=[...My].reverse(),Tj=My.length;function Ej(t){return e=>Promise.all(e.map(({animation:n,options:i})=>vj(t,n,i)))}function Sj(t){let e=Ej(t),n=gT(),i=!0;const r=l=>(c,h)=>{var d;const f=yd(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:v,...T}=f;c={...c,...T,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=LP(t.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let x=0;x<Tj;x++){const y=wj[x],w=n[y],S=c[y]!==void 0?c[y]:h[y],C=vl(S),D=y===l?w.isActive:null;D===!1&&(v=x);let V=S===h[y]&&S!==c[y]&&C;if(V&&i&&t.manuallyAnimateOnMount&&(V=!1),w.protectedKeys={...m},!w.isActive&&D===null||!S&&!w.prevProp||gd(S)||typeof S=="boolean")continue;const I=xj(w.prevProp,S);let _=I||y===l&&w.isActive&&!V&&C||x>v&&C,b=!1;const P=Array.isArray(S)?S:[S];let k=P.reduce(r(y),{});D===!1&&(k={});const{prevResolvedValues:R={}}=w,A={...R,...k},we=ee=>{_=!0,f.has(ee)&&(b=!0,f.delete(ee)),w.needsAnimating[ee]=!0;const B=t.getValue(ee);B&&(B.liveStyle=!1)};for(const ee in A){const B=k[ee],K=R[ee];if(m.hasOwnProperty(ee))continue;let q=!1;Sm(B)&&Sm(K)?q=!Jb(B,K):q=B!==K,q?B!=null?we(ee):f.add(ee):B!==void 0&&f.has(ee)?we(ee):w.protectedKeys[ee]=!0}w.prevProp=S,w.prevResolvedValues=k,w.isActive&&(m={...m,...k}),i&&t.blockInitialAnimation&&(_=!1),_&&(!(V&&I)||b)&&d.push(...P.map(ee=>({animation:ee,options:{type:y}})))}if(f.size){const x={};f.forEach(y=>{const w=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),x[y]=w??null}),d.push({animation:x})}let T=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(T=!1),i=!1,T?e(d):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=gT(),i=!0}}}function xj(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Jb(e,t):!1}function Ar(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gT(){return{animate:Ar(!0),whileInView:Ar(),whileHover:Ar(),whileTap:Ar(),whileDrag:Ar(),whileFocus:Ar(),exit:Ar()}}class Sr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ij extends Sr{constructor(e){super(e),e.animationState||(e.animationState=Sj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();gd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bj=0;class Pj extends Sr{constructor(){super(...arguments),this.id=bj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Aj={animation:{Feature:Ij},exit:{Feature:Pj}},FP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function _d(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const kj=t=>e=>FP(e)&&t(e,_d(e));function ii(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ci(t,e,n,i){return ii(t,e,kj(n),i)}const yT=(t,e)=>Math.abs(t-e);function Cj(t,e){const n=yT(t.x,e.x),i=yT(t.y,e.y);return Math.sqrt(n**2+i**2)}class jP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=jf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Cj(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=d,{timestamp:T}=it;this.history.push({...v,timestamp:T});const{onStart:x,onMove:y}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ff(f,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=jf(d.type==="pointercancel"?this.lastMoveEventInfo:Ff(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),v&&v(d,x)},!FP(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const o=_d(e),a=Ff(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=it;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,jf(a,this.history)),this.removeListeners=li(ci(this.contextWindow,"pointermove",this.handlePointerMove),ci(this.contextWindow,"pointerup",this.handlePointerUp),ci(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Ff(t,e){return e?{point:e(t.point)}:t}function vT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jf({point:t},e){return{point:t,delta:vT(t,BP(e)),offset:vT(t,Rj(e)),velocity:Dj(e,.1)}}function Rj(t){return t[0]}function BP(t){return t[t.length-1]}function Dj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=BP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>oi(e)));)n--;if(!i)return{x:0,y:0};const s=ai(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function UP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const _T=UP("dragHorizontal"),wT=UP("dragVertical");function zP(t){let e=!1;if(t==="y")e=wT();else if(t==="x")e=_T();else{const n=_T(),i=wT();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function $P(){const t=zP(!0);return t?(t(),!1):!0}function Fs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const HP=1e-4,Mj=1-HP,Oj=1+HP,WP=.01,Vj=0-WP,Nj=0+WP;function Yt(t){return t.max-t.min}function Lj(t,e,n){return Math.abs(t-e)<=n}function TT(t,e,n,i=.5){t.origin=i,t.originPoint=Re(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),t.translate=Re(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Mj&&t.scale<=Oj||isNaN(t.scale))&&(t.scale=1),(t.translate>=Vj&&t.translate<=Nj||isNaN(t.translate))&&(t.translate=0)}function Ba(t,e,n,i){TT(t.x,e.x,n.x,i?i.originX:void 0),TT(t.y,e.y,n.y,i?i.originY:void 0)}function ET(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function Fj(t,e,n){ET(t.x,e.x,n.x),ET(t.y,e.y,n.y)}function ST(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function Ua(t,e,n){ST(t.x,e.x,n.x),ST(t.y,e.y,n.y)}function jj(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Re(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Re(n,t,i.max):Math.min(t,n)),t}function xT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Bj(t,{top:e,left:n,bottom:i,right:r}){return{x:xT(t.x,n,r),y:xT(t.y,e,i)}}function IT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Uj(t,e){return{x:IT(t.x,e.x),y:IT(t.y,e.y)}}function zj(t,e){let n=.5;const i=Yt(t),r=Yt(e);return r>i?n=_o(e.min,e.max-i,t.min):i>r&&(n=_o(t.min,t.max-r,e.min)),fr(0,1,n)}function $j(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Om=.35;function Hj(t=Om){return t===!1?t=0:t===!0&&(t=Om),{x:bT(t,"left","right"),y:bT(t,"top","bottom")}}function bT(t,e,n){return{min:PT(t,e),max:PT(t,n)}}function PT(t,e){return typeof t=="number"?t:t[e]||0}const AT=()=>({translate:0,scale:1,origin:0,originPoint:0}),js=()=>({x:AT(),y:AT()}),kT=()=>({min:0,max:0}),Le=()=>({x:kT(),y:kT()});function nn(t){return[t("x"),t("y")]}function KP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Wj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Kj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Bf(t){return t===void 0||t===1}function Vm({scale:t,scaleX:e,scaleY:n}){return!Bf(t)||!Bf(e)||!Bf(n)}function Nr(t){return Vm(t)||qP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qP(t){return CT(t.x)||CT(t.y)}function CT(t){return t&&t!=="0%"}function _h(t,e,n){const i=t-n,r=e*i;return n+r}function RT(t,e,n,i,r){return r!==void 0&&(t=_h(t,r,i)),_h(t,n,i)+e}function Nm(t,e=0,n=1,i,r){t.min=RT(t.min,e,n,i,r),t.max=RT(t.max,e,n,i,r)}function GP(t,{x:e,y:n}){Nm(t.x,e.translate,e.scale,e.originPoint),Nm(t.y,n.translate,n.scale,n.originPoint)}const DT=.999999999999,MT=1.0000000000001;function qj(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Us(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,GP(t,o)),i&&Nr(s.latestValues)&&Us(t,s.latestValues))}e.x<MT&&e.x>DT&&(e.x=1),e.y<MT&&e.y>DT&&(e.y=1)}function Bs(t,e){t.min=t.min+e,t.max=t.max+e}function OT(t,e,n,i,r=.5){const s=Re(t.min,t.max,r);Nm(t,e,n,s,i)}function Us(t,e){OT(t.x,e.x,e.scaleX,e.scale,e.originX),OT(t.y,e.y,e.scaleY,e.scale,e.originY)}function QP(t,e){return KP(Kj(t.getBoundingClientRect(),e))}function Gj(t,e,n){const i=QP(t,n),{scroll:r}=e;return r&&(Bs(i.x,r.offset.x),Bs(i.y,r.offset.y)),i}const YP=({current:t})=>t?t.ownerDocument.defaultView:null,Qj=new WeakMap;class Yj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(_d(h,"page").point)},s=(h,d)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zP(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(x=>{let y=this.getAxisMotionValue(x).get()||0;if(jn.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[x];S&&(y=Yt(S)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&ye.postRender(()=>v(h,d)),Dm(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:T}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=Xj(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),T&&T(h,d)},a=(h,d)=>this.stop(h,d),l=()=>nn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jP(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:YP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ye.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Nc(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=jj(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Fs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Bj(r.layoutBox,n):this.constraints=!1,this.elastic=Hj(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&nn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$j(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fs(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Gj(i,r.root,this.visualElement.getTransformPagePoint());let o=Uj(r.layout.layoutBox,s);if(n){const a=n(Wj(o));this.hasMutatedConstraints=!!a,a&&(o=KP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nn(h=>{if(!Nc(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Dm(this.visualElement,e),i.start(Qy(e,i,0,n,this.visualElement,!1))}stopAnimation(){nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){nn(n=>{const{drag:i}=this.getProps();if(!Nc(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Fs(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};nn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=zj({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),nn(o=>{if(!Nc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Re(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Qj.set(this.visualElement,this);const e=this.visualElement.current,n=ci(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Fs(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ye.read(i);const o=ii(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Om,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Nc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Xj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Jj extends Sr{constructor(e){super(e),this.removeGroupControls=Et,this.removeListeners=Et,this.controls=new Yj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Et}unmount(){this.removeGroupControls(),this.removeListeners()}}const VT=t=>(e,n)=>{t&&ye.postRender(()=>t(e,n))};class Zj extends Sr{constructor(){super(...arguments),this.removePointerDownListener=Et}onPointerDown(e){this.session=new jP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:VT(e),onStart:VT(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ye.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=ci(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ev=z.createContext(null);function eB(){const t=z.useContext(ev);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=z.useId();z.useEffect(()=>i(r),[]);const s=z.useCallback(()=>n&&n(r),[r,n]);return!e&&n?[!1,s]:[!0]}const XP=z.createContext({}),JP=z.createContext({}),wu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function NT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=NT(t,e.target.x),i=NT(t,e.target.y);return`${n}% ${i}%`}},tB={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=pr.parse(t);if(r.length>5)return i;const s=pr.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Re(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}},wh={};function nB(t){Object.assign(wh,t)}const{schedule:tv,cancel:H9}=Zb(queueMicrotask,!1);class iB extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;nB(rB),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ye.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZP(t){const[e,n]=eB(),i=z.useContext(XP);return O.jsx(iB,{...t,layoutGroup:i,switchLayoutGroup:z.useContext(JP),isPresent:e,safeToRemove:n})}const rB={borderRadius:{...ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ra,borderTopRightRadius:ra,borderBottomLeftRadius:ra,borderBottomRightRadius:ra,boxShadow:tB},eA=["TopLeft","TopRight","BottomLeft","BottomRight"],sB=eA.length,LT=t=>typeof t=="string"?parseFloat(t):t,FT=t=>typeof t=="number"||Q.test(t);function oB(t,e,n,i,r,s){r?(t.opacity=Re(0,n.opacity!==void 0?n.opacity:1,aB(i)),t.opacityExit=Re(e.opacity!==void 0?e.opacity:1,0,lB(i))):s&&(t.opacity=Re(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<sB;o++){const a=`border${eA[o]}Radius`;let l=jT(e,a),c=jT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||FT(l)===FT(c)?(t[a]=Math.max(Re(LT(l),LT(c),i),0),(jn.test(c)||jn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Re(e.rotate||0,n.rotate||0,i))}function jT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aB=tA(0,.5,oP),lB=tA(.5,.95,Et);function tA(t,e,n){return i=>i<t?0:i>e?1:n(_o(t,e,i))}function BT(t,e){t.min=e.min,t.max=e.max}function en(t,e){BT(t.x,e.x),BT(t.y,e.y)}function UT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function zT(t,e,n,i,r){return t-=e,t=_h(t,1/n,i),r!==void 0&&(t=_h(t,1/r,i)),t}function cB(t,e=0,n=1,i=.5,r,s=t,o=t){if(jn.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Re(s.min,s.max,i);t===s&&(a-=e),t.min=zT(t.min,e,n,a,r),t.max=zT(t.max,e,n,a,r)}function $T(t,e,[n,i,r],s,o){cB(t,e[n],e[i],e[r],e.scale,s,o)}const uB=["x","scaleX","originX"],hB=["y","scaleY","originY"];function HT(t,e,n,i){$T(t.x,e,uB,n?n.x:void 0,i?i.x:void 0),$T(t.y,e,hB,n?n.y:void 0,i?i.y:void 0)}function WT(t){return t.translate===0&&t.scale===1}function nA(t){return WT(t.x)&&WT(t.y)}function KT(t,e){return t.min===e.min&&t.max===e.max}function dB(t,e){return KT(t.x,e.x)&&KT(t.y,e.y)}function qT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iA(t,e){return qT(t.x,e.x)&&qT(t.y,e.y)}function GT(t){return Yt(t.x)/Yt(t.y)}function QT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fB{constructor(){this.members=[]}add(e){Yy(this.members,e),e.scheduleRender()}remove(e){if(Xy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pB(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:m,skewY:v}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const mB=(t,e)=>t.depth-e.depth;class gB{constructor(){this.children=[],this.isDirty=!1}add(e){Yy(this.children,e),this.isDirty=!0}remove(e){Xy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mB),this.isDirty=!1,this.children.forEach(e)}}function Tu(t){const e=wt(t)?t.get():t;return aj(e)?e.toValue():e}function yB(t,e){const n=Bn.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(dr(i),t(s-e))};return ye.read(i,!0),()=>dr(i)}function vB(t){return t instanceof SVGElement&&t.tagName!=="svg"}function _B(t,e,n){const i=wt(t)?t:Tl(t);return i.start(Qy("",i,e,n)),i.animation}const Lr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ta=typeof window<"u"&&window.MotionDebug!==void 0,Uf=["","X","Y","Z"],wB={visibility:"hidden"},YT=1e3;let TB=0;function zf(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function rA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ye,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&rA(i)}function sA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=TB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ta&&(Lr.totalNodes=Lr.resolvedTargetDeltas=Lr.recalculatedProjection=0),this.nodes.forEach(xB),this.nodes.forEach(kB),this.nodes.forEach(CB),this.nodes.forEach(IB),Ta&&window.MotionDebug.record(Lr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new gB)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vB(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=yB(f,250),wu.hasAnimatedSinceResize&&(wu.hasAnimatedSinceResize=!1,this.nodes.forEach(JT))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||h.getDefaultTransition()||VB,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=h.getProps(),w=!this.targetLayout||!iA(this.targetLayout,v)||m,S=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const C={...Vy(T,"layout"),onPlay:x,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||JT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XT);return}this.isUpdating||this.nodes.forEach(PB),this.isUpdating=!1,this.nodes.forEach(AB),this.nodes.forEach(EB),this.nodes.forEach(SB),this.clearAllSnapshots();const a=Bn.now();it.delta=fr(0,1e3/60,a-it.timestamp),it.timestamp=a,it.isProcessing=!0,Mf.update.process(it),Mf.preRender.process(it),Mf.render.process(it),it.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bB),this.sharedNodes.forEach(DB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Nr(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),NB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Le();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(LB))){const{scroll:h}=this.root;h&&(Bs(l.x,h.offset.x),Bs(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Le();if(en(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&en(l,o),Bs(l.x,d.offset.x),Bs(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Le();en(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Us(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Nr(h.latestValues)&&Us(l,h.latestValues)}return Nr(this.latestValues)&&Us(l,this.latestValues),l}removeTransform(o){const a=Le();en(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Nr(c.latestValues))continue;Vm(c.latestValues)&&c.updateSnapshot();const h=Le(),d=c.measurePageBox();en(h,d),HT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Nr(this.latestValues)&&HT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==it.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=it.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Ua(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Fj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):en(this.target,this.layout.layoutBox),GP(this.target,this.targetDelta)):en(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Ua(this.relativeTargetOrigin,this.target,m.target),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ta&&Lr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Vm(this.parent.latestValues)||qP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===it.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;en(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;qj(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Le());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UT(this.prevProjectionDelta.x,this.projectionDelta.x),UT(this.prevProjectionDelta.y,this.projectionDelta.y)),Ba(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!QT(this.projectionDelta.x,this.prevProjectionDelta.x)||!QT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Ta&&Lr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=js(),this.projectionDelta=js(),this.projectionDeltaWithTransform=js()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=js();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Le(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,T=m!==v,x=this.getStack(),y=!x||x.members.length<=1,w=!!(T&&!y&&this.options.crossfade===!0&&!this.path.some(OB));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const D=C/1e3;ZT(d.x,o.x,D),ZT(d.y,o.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ua(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MB(this.relativeTarget,this.relativeTargetOrigin,f,D),S&&dB(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Le()),en(S,this.relativeTarget)),T&&(this.animationValues=h,oB(h,c,this.latestValues,D,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{wu.hasAnimatedSinceResize=!0,this.currentAnimation=_B(0,YT,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&oA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Le();const d=Yt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Yt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}en(a,l),Us(a,h),Ba(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new fB),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&zf("z",o,c,this.animationValues);for(let h=0;h<Uf.length;h++)zf(`rotate${Uf[h]}`,o,c,this.animationValues),zf(`skew${Uf[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wB;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Nr(this.latestValues)&&(T.transform=h?h({},""):"none",this.hasProjected=!1),T}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=pB(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const T in wh){if(f[T]===void 0)continue;const{correct:x,applyTo:y}=wh[T],w=c.transform==="none"?f[T]:x(f[T],d);if(y){const S=y.length;for(let C=0;C<S;C++)c[y[C]]=w}else c[T]=w}return this.options.layoutId&&(c.pointerEvents=d===this?Tu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(XT),this.root.sharedNodes.clear()}}}function EB(t){t.updateLayout()}function SB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?nn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Yt(f);f.min=i[d].min,f.max=f.min+m}):oA(s,n.layoutBox,i)&&nn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Yt(i[d]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=js();Ba(a,i,n.layoutBox);const l=js();o?Ba(l,t.applyTransform(r,!0),n.measuredBox):Ba(l,i,n.layoutBox);const c=!nA(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Le();Ua(v,n.layoutBox,f.layoutBox);const T=Le();Ua(T,i,m.layoutBox),iA(v,T)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function xB(t){Ta&&Lr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function IB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bB(t){t.clearSnapshot()}function XT(t){t.clearMeasurements()}function PB(t){t.isLayoutDirty=!1}function AB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function JT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function kB(t){t.resolveTargetDelta()}function CB(t){t.calcProjection()}function RB(t){t.resetSkewAndRotation()}function DB(t){t.removeLeadSnapshot()}function ZT(t,e,n){t.translate=Re(e.translate,0,n),t.scale=Re(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function eE(t,e,n,i){t.min=Re(e.min,n.min,i),t.max=Re(e.max,n.max,i)}function MB(t,e,n,i){eE(t.x,e.x,n.x,i),eE(t.y,e.y,n.y,i)}function OB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const VB={duration:.45,ease:[.4,0,.1,1]},tE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nE=tE("applewebkit/")&&!tE("chrome/")?Math.round:Et;function iE(t){t.min=nE(t.min),t.max=nE(t.max)}function NB(t){iE(t.x),iE(t.y)}function oA(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lj(GT(e),GT(n),.2)}function LB(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const FB=sA({attachResizeListener:(t,e)=>ii(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$f={current:void 0},aA=sA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$f.current){const t=new FB({});t.mount(window),t.setOptions({layoutScroll:!0}),$f.current=t}return $f.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jB={pan:{Feature:Zj},drag:{Feature:Jj,ProjectionNode:aA,MeasureLayout:ZP}};function rE(t,e){const n=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||$P())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[i];l&&ye.postRender(()=>l(s,o))};return ci(t.current,n,r,{passive:!t.getProps()[i]})}class BB extends Sr{mount(){this.unmount=li(rE(this.node,!0),rE(this.node,!1))}unmount(){}}class UB extends Sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=li(ii(this.node.current,"focus",()=>this.onFocus()),ii(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const lA=(t,e)=>e?t===e?!0:lA(t,e.parentElement):!1;function Hf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,_d(n))}class zB extends Sr{constructor(){super(...arguments),this.removeStartListeners=Et,this.removeEndListeners=Et,this.removeAccessibleListeners=Et,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=ci(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps(),f=!d&&!lA(this.node.current,a.target)?h:c;f&&ye.update(()=>f(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=ci(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=li(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Hf("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&ye.postRender(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=ii(this.node.current,"keyup",o),Hf("down",(a,l)=>{this.startPress(a,l)})},n=ii(this.node.current,"keydown",e),i=()=>{this.isPressing&&Hf("cancel",(s,o)=>this.cancelPress(s,o))},r=ii(this.node.current,"blur",i);this.removeAccessibleListeners=li(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ye.postRender(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$P()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ye.postRender(()=>i(e,n))}mount(){const e=this.node.getProps(),n=ci(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ii(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=li(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Lm=new WeakMap,Wf=new WeakMap,$B=t=>{const e=Lm.get(t.target);e&&e(t)},HB=t=>{t.forEach($B)};function WB({root:t,...e}){const n=t||document;Wf.has(n)||Wf.set(n,{});const i=Wf.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(HB,{root:t,...e})),i[r]}function KB(t,e,n){const i=WB(e);return Lm.set(t,n),i.observe(t),()=>{Lm.delete(t),i.unobserve(t)}}const qB={some:0,all:1};class GB extends Sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:qB[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return KB(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(QB(e,n))&&this.startObserver()}unmount(){}}function QB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const YB={inView:{Feature:GB},tap:{Feature:zB},focus:{Feature:UB},hover:{Feature:BB}},XB={layout:{ProjectionNode:aA,MeasureLayout:ZP}},cA=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),wd=z.createContext({}),nv=typeof window<"u",JB=nv?z.useLayoutEffect:z.useEffect,uA=z.createContext({strict:!1});function ZB(t,e,n,i,r){var s,o;const{visualElement:a}=z.useContext(wd),l=z.useContext(uA),c=z.useContext(ev),h=z.useContext(cA).reducedMotion,d=z.useRef();i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,m=z.useContext(JP);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&e5(d.current,n,r,m);const v=z.useRef(!1);z.useInsertionEffect(()=>{f&&v.current&&f.update(n,c)});const T=n[OP],x=z.useRef(!!T&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,T))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,T)));return JB(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),tv.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),z.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,T)}),x.current=!1))}),f}function e5(t,e,n,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hA(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Fs(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function hA(t){if(t)return t.options.allowProjection!==!1?t.projection:hA(t.parent)}function t5(t,e,n){return z.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Fs(n)&&(n.current=i))},[e])}function Td(t){return gd(t.animate)||Oy.some(e=>vl(t[e]))}function dA(t){return!!(Td(t)||t.variants)}function n5(t,e){if(Td(t)){const{initial:n,animate:i}=t;return{initial:n===!1||vl(n)?n:void 0,animate:vl(i)?i:void 0}}return t.inherit!==!1?e:{}}function i5(t){const{initial:e,animate:n}=n5(t,z.useContext(wd));return z.useMemo(()=>({initial:e,animate:n}),[sE(e),sE(n)])}function sE(t){return Array.isArray(t)?t.join(" "):t}const oE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wo={};for(const t in oE)wo[t]={isEnabled:e=>oE[t].some(n=>!!e[n])};function r5(t){for(const e in t)wo[e]={...wo[e],...t[e]}}const s5=Symbol.for("motionComponentSymbol");function o5({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&r5(t);function s(a,l){let c;const h={...z.useContext(cA),...a,layoutId:a5(a)},{isStatic:d}=h,f=i5(a),m=i(a,d);if(!d&&nv){l5();const v=c5(h);c=v.MeasureLayout,f.visualElement=ZB(r,m,h,e,v.ProjectionNode)}return O.jsxs(wd.Provider,{value:f,children:[c&&f.visualElement?O.jsx(c,{visualElement:f.visualElement,...h}):null,n(r,a,t5(m,f.visualElement,l),m,d,f.visualElement)]})}const o=z.forwardRef(s);return o[s5]=r,o}function a5({layoutId:t}){const e=z.useContext(XP).id;return e&&t!==void 0?e+"-"+t:t}function l5(t,e){z.useContext(uA).strict}function c5(t){const{drag:e,layout:n}=wo;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const u5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iv(t){return typeof t!="string"||t.includes("-")?!1:!!(u5.indexOf(t)>-1||/[A-Z]/u.test(t))}function fA(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const pA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mA(t,e,n,i){fA(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(pA.has(r)?r:Zy(r),e.attrs[r])}function gA(t,{layout:e,layoutId:n}){return ds.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wh[t]||t==="opacity")}function rv(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(wt(r[o])||e.style&&wt(e.style[o])||gA(o,t)||((i=n==null?void 0:n.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function yA(t,e,n){const i=rv(t,e,n);for(const r in t)if(wt(t[r])||wt(e[r])){const s=$l.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function h5(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}function d5({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:f5(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const vA=t=>(e,n)=>{const i=z.useContext(wd),r=z.useContext(ev),s=()=>d5(t,e,i,r);return n?s():h5(s)};function f5(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Tu(s[f]);let{initial:o,animate:a}=t;const l=Td(t),c=dA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!gd(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=Dy(t,f[m]);if(v){const{transitionEnd:T,transition:x,...y}=v;for(const w in y){let S=y[w];if(Array.isArray(S)){const C=h?S.length-1:0;S=S[C]}S!==null&&(r[w]=S)}for(const w in T)r[w]=T[w]}}}return r}const sv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),_A=()=>({...sv(),attrs:{}}),wA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,p5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m5=$l.length;function g5(t,e,n){let i="",r=!0;for(let s=0;s<m5;s++){const o=$l[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=wA(a,zy[o]);if(!l){r=!1;const h=p5[o]||o;i+=`${h}(${c}) `}n&&(e[o]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function ov(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ds.has(l)){o=!0;continue}else if(hP(l)){r[l]=c;continue}else{const h=wA(c,zy[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||n?i.transform=g5(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}function aE(t,e,n){return typeof t=="string"?t:Q.transform(e+n*t)}function y5(t,e,n){const i=aE(e,t.x,t.width),r=aE(n,t.y,t.height);return`${i} ${r}`}const v5={offset:"stroke-dashoffset",array:"stroke-dasharray"},_5={offset:"strokeDashoffset",array:"strokeDasharray"};function w5(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?v5:_5;t[s.offset]=Q.transform(-i);const o=Q.transform(e),a=Q.transform(n);t[s.array]=`${o} ${a}`}function av(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d){if(ov(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:v}=t;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=y5(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&w5(f,o,a,l,!1)}const lv=t=>typeof t=="string"&&t.toLowerCase()==="svg",T5={useVisualState:vA({scrapeMotionValuesFromProps:yA,createRenderState:_A,onMount:(t,e,{renderState:n,latestValues:i})=>{ye.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ye.render(()=>{av(n,i,lv(e.tagName),t.transformTemplate),mA(e,n)})}})},E5={useVisualState:vA({scrapeMotionValuesFromProps:rv,createRenderState:sv})};function TA(t,e,n){for(const i in e)!wt(e[i])&&!gA(i,n)&&(t[i]=e[i])}function S5({transformTemplate:t},e){return z.useMemo(()=>{const n=sv();return ov(n,e,t),Object.assign({},n.vars,n.style)},[e])}function x5(t,e){const n=t.style||{},i={};return TA(i,n,t),Object.assign(i,S5(t,e)),i}function I5(t,e){const n={},i=x5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const b5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Th(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||b5.has(t)}let EA=t=>!Th(t);function P5(t){t&&(EA=e=>e.startsWith("on")?!Th(e):t(e))}try{P5(require("@emotion/is-prop-valid").default)}catch{}function A5(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(EA(r)||n===!0&&Th(r)||!e&&!Th(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function k5(t,e,n,i){const r=z.useMemo(()=>{const s=_A();return av(s,e,lv(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};TA(s,t.style,t),r.style={...s,...r.style}}return r}function C5(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(iv(n)?k5:I5)(i,s,o,n),c=A5(i,typeof n=="string",t),h=n!==z.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=z.useMemo(()=>wt(d)?d.get():d,[d]);return z.createElement(n,{...h,children:f})}}function R5(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...iv(i)?T5:E5,preloadedFeatures:t,useRender:C5(r),createVisualElement:e,Component:i};return o5(o)}}const Fm={current:null},SA={current:!1};function D5(){if(SA.current=!0,!!nv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fm.current=t.matches;t.addListener(e),e()}else Fm.current=!1}function M5(t,e,n){for(const i in e){const r=e[i],s=n[i];if(wt(r))t.addValue(i,r);else if(wt(s))t.addValue(i,Tl(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(i);t.addValue(i,Tl(o!==void 0?o:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const lE=new WeakMap,O5=[...pP,gt,pr],V5=t=>O5.find(fP(t)),cE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N5{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ye.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Td(n),this.isVariantNode=dA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&wt(m)&&m.set(l[f],!1)}}mount(e){this.current=e,lE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),SA.current||D5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){lE.delete(this.current),this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ds.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ye.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wo){const n=wo[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<cE.length;i++){const r=cE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=M5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Tl(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(cP(r)||lP(r))?r=parseFloat(r):!V5(r)&&pr.test(n)&&(r=EP(e,n)),this.setBaseTarget(e,wt(r)?r.get():r)),wt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=Dy(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Jy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class xA extends N5{constructor(){super(...arguments),this.KeyframeResolver=SP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}}function L5(t){return window.getComputedStyle(t)}class F5 extends xA{constructor(){super(...arguments),this.type="html",this.renderInstance=fA}readValueFromInstance(e,n){if(ds.has(n)){const i=$y(n);return i&&i.default||0}else{const i=L5(e),r=(hP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return QP(e,n)}build(e,n,i){ov(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return rv(e,n,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class j5 extends xA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ds.has(n)){const i=$y(n);return i&&i.default||0}return n=pA.has(n)?n:Zy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return yA(e,n,i)}build(e,n,i){av(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){mA(e,n,i,r)}mount(e){this.isSVGTag=lv(e.tagName),super.mount(e)}}const B5=(t,e)=>iv(t)?new j5(e):new F5(e,{allowProjection:t!==z.Fragment}),U5=R5({...Aj,...YB,...jB,...XB},B5),ki=_F(U5),Kf=Ao(Zt),z5=({correoUsuario:t})=>{const[e,n]=z.useState(!0),[i,r]=z.useState(!1),[s,o]=z.useState(!1),[a,l]=z.useState(!1),[c,h]=z.useState(null);z.useEffect(()=>{const f=vI(Kf,m=>{h(m?m.uid:null)});return()=>f()},[Kf]);const d=async()=>{try{await _I(Kf),console.log("Sesin cerrada correctamente")}catch{}};return O.jsx("div",{className:"flex",children:O.jsxs("div",{className:`${e?"w-72":"w-20"} bg-white h-screen p-5 pt-8 relative duration-300`,children:[O.jsxs("div",{className:"flex gap-x-4 items-center",children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),O.jsx("h1",{className:"text-black origin-left font-bold text-xl",children:t})]}),O.jsxs("ul",{className:"pt-6 flex flex-col justify-between h-full",children:[O.jsxs("div",{children:[O.jsxs("li",{className:"flex items-center p-2 hover:bg-[#F3F4F6] cursor-pointer mb-2",children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})}),O.jsx("span",{className:"text-black ml-4 font-bold",children:"Dashboard"})]}),O.jsxs("li",{className:"flex items-center p-2 hover:bg-[#F3F4F6] cursor-pointer mb-2",onClick:()=>r(!0),children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),e&&O.jsx("span",{className:"ml-4 text-black font-bold",children:"Agregar Ingreso"})]}),O.jsxs("li",{className:"flex items-center p-2 hover:bg-[#F3F4F6] cursor-pointer mb-2",onClick:()=>o(!0),children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),e&&O.jsx("span",{className:"ml-4 text-black font-bold",children:"Agregar Egreso"})]}),O.jsxs("li",{className:"flex items-center p-2 hover:bg-[#F3F4F6] cursor-pointer mb-2",onClick:()=>l(!0),children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3"})}),e&&O.jsx("span",{className:"ml-4 font-bold",children:"Agregar Presupuesto"})]})]}),O.jsxs("li",{className:"flex items-center mb-14 p-2 hover:bg-[#F3F4F6] cursor-pointer",children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),e&&O.jsx(ki.button,{onClick:d,className:"ml-4 bg-[#ff8066] text-white font-bold py-1 px-2 rounded hover:bg-red-600 transition duration-200",initial:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.5},children:"Salir"})]})]}),a&&c&&O.jsx(vF,{setOpen:l,action:"presupuesto",uid:c}),i&&c&&O.jsx(Qw,{setOpen:r,action:"ingreso",uid:c}),s&&c&&O.jsx(Qw,{setOpen:o,action:"egreso",uid:c})]})})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Kl(t){return t+.5|0}const ji=(t,e,n)=>Math.max(Math.min(t,n),e);function Ea(t){return ji(Kl(t*2.55),0,255)}function tr(t){return ji(Kl(t*255),0,255)}function Xn(t){return ji(Kl(t/2.55)/100,0,1)}function uE(t){return ji(Kl(t*100),0,100)}const tn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jm=[..."0123456789ABCDEF"],$5=t=>jm[t&15],H5=t=>jm[(t&240)>>4]+jm[t&15],Lc=t=>(t&240)>>4===(t&15),W5=t=>Lc(t.r)&&Lc(t.g)&&Lc(t.b)&&Lc(t.a);function K5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&tn[t[1]]*17,g:255&tn[t[2]]*17,b:255&tn[t[3]]*17,a:e===5?tn[t[4]]*17:255}:(e===7||e===9)&&(n={r:tn[t[1]]<<4|tn[t[2]],g:tn[t[3]]<<4|tn[t[4]],b:tn[t[5]]<<4|tn[t[6]],a:e===9?tn[t[7]]<<4|tn[t[8]]:255})),n}const q5=(t,e)=>t<255?e(t):"";function G5(t){var e=W5(t)?$5:H5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+q5(t.a,e):void 0}const Q5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IA(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Y5(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function X5(t,e,n){const i=IA(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function J5(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function cv(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=J5(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function uv(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(tr)}function hv(t,e,n){return uv(IA,t,e,n)}function Z5(t,e,n){return uv(X5,t,e,n)}function eU(t,e,n){return uv(Y5,t,e,n)}function bA(t){return(t%360+360)%360}function tU(t){const e=Q5.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ea(+e[5]):tr(+e[5]));const r=bA(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Z5(r,s,o):e[1]==="hsv"?i=eU(r,s,o):i=hv(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function nU(t,e){var n=cv(t);n[0]=bA(n[0]+e),n=hv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function iU(t){if(!t)return;const e=cv(t),n=e[0],i=uE(e[1]),r=uE(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Xn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const hE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rU(){const t={},e=Object.keys(dE),n=Object.keys(hE);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,hE[s]);s=parseInt(dE[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Fc;function sU(t){Fc||(Fc=rU(),Fc.transparent=[0,0,0,0]);const e=Fc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oU=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function aU(t){const e=oU.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ea(o):ji(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ea(i):ji(i,0,255)),r=255&(e[4]?Ea(r):ji(r,0,255)),s=255&(e[6]?Ea(s):ji(s,0,255)),{r:i,g:r,b:s,a:n}}}function lU(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const qf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_s=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function cU(t,e,n){const i=_s(Xn(t.r)),r=_s(Xn(t.g)),s=_s(Xn(t.b));return{r:tr(qf(i+n*(_s(Xn(e.r))-i))),g:tr(qf(r+n*(_s(Xn(e.g))-r))),b:tr(qf(s+n*(_s(Xn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function jc(t,e,n){if(t){let i=cv(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=hv(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function PA(t,e){return t&&Object.assign(e||{},t)}function fE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tr(t[3]))):(e=PA(t,{r:0,g:0,b:0,a:1}),e.a=tr(e.a)),e}function uU(t){return t.charAt(0)==="r"?aU(t):tU(t)}class El{constructor(e){if(e instanceof El)return e;const n=typeof e;let i;n==="object"?i=fE(e):n==="string"&&(i=K5(e)||sU(e)||uU(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=PA(this._rgb);return e&&(e.a=Xn(e.a)),e}set rgb(e){this._rgb=fE(e)}rgbString(){return this._valid?lU(this._rgb):void 0}hexString(){return this._valid?G5(this._rgb):void 0}hslString(){return this._valid?iU(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=cU(this._rgb,e._rgb,n)),this}clone(){return new El(this.rgb)}alpha(e){return this._rgb.a=tr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Kl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jc(this._rgb,2,e),this}darken(e){return jc(this._rgb,2,-e),this}saturate(e){return jc(this._rgb,1,e),this}desaturate(e){return jc(this._rgb,1,-e),this}rotate(e){return nU(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Kn(){}const hU=(()=>{let t=0;return()=>t++})();function Ie(t){return t===null||typeof t>"u"}function Ke(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ue(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function hn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function bn(t,e){return hn(t)?t:e}function pe(t,e){return typeof t>"u"?e:t}const dU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function xe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function fe(t,e,n,i){let r,s,o;if(Ke(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ue(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Eh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Sh(t){if(Ke(t))return t.map(Sh);if(ue(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Sh(t[n[r]]);return e}return t}function AA(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function fU(t,e,n,i){if(!AA(t))return;const r=e[t],s=n[t];ue(r)&&ue(s)?Sl(r,s,i):e[t]=Sh(s)}function Sl(t,e,n){const i=Ke(e)?e:[e],r=i.length;if(!ue(t))return t;n=n||{};const s=n.merger||fU;let o;for(let a=0;a<r;++a){if(o=i[a],!ue(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function za(t,e){return Sl(t,e,{merger:pU})}function pU(t,e,n){if(!AA(t))return;const i=e[t],r=n[t];ue(i)&&ue(r)?za(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sh(r))}const pE={"":t=>t,x:t=>t.x,y:t=>t.y};function mU(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function gU(t){const e=mU(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function To(t,e){return(pE[e]||(pE[e]=gU(e)))(t)}function dv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const xl=t=>typeof t<"u",mr=t=>typeof t=="function",mE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function yU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const St=Math.PI,nr=2*St,xh=Number.POSITIVE_INFINITY,vU=St/180,vn=St/2,kr=St/4,gE=St*2/3,Bm=Math.log10,ir=Math.sign;function Eu(t,e,n){return Math.abs(t-e)<n}function yE(t){const e=Math.round(t);t=Eu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Bm(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function _U(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function Ih(t){return!isNaN(parseFloat(t))&&isFinite(t)}function wU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function TU(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hr(t){return t*(St/180)}function EU(t){return t*(180/St)}function vE(t){if(!hn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SU(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*St&&(s+=nr),{angle:s,distance:r}}function xU(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Cr(t){return(t%nr+nr)%nr}function IU(t,e,n,i){const r=Cr(t),s=Cr(e),o=Cr(n),a=Cr(s-r),l=Cr(o-r),c=Cr(r-s),h=Cr(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function _n(t,e,n){return Math.max(e,Math.min(n,t))}function bU(t){return _n(t,-32768,32767)}function zs(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function fv(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Um=(t,e,n,i)=>fv(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),PU=(t,e,n)=>fv(t,n,i=>t[i][e]>=n);function AU(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const kA=["push","pop","shift","splice","unshift"];function kU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),kA.forEach(n=>{const i="_onData"+dv(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function _E(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(kA.forEach(s=>{delete t[s]}),delete t._chartjs)}function CA(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const RA=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function DA(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,RA.call(window,()=>{i=!1,t.apply(e,n)}))}}function CU(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const pv=t=>t==="start"?"left":t==="end"?"right":"center",mt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,RU=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,Bc=t=>t===0||t===1,wE=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nr/n)),TE=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nr/n)+1,$a={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*vn)+1,easeOutSine:t=>Math.sin(t*vn),easeInOutSine:t=>-.5*(Math.cos(St*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bc(t)?t:wE(t,.075,.3),easeOutElastic:t=>Bc(t)?t:TE(t,.075,.3),easeInOutElastic(t){return Bc(t)?t:t<.5?.5*wE(t*2,.1125,.45):.5+.5*TE(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$a.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$a.easeInBounce(t*2)*.5:$a.easeOutBounce(t*2-1)*.5+.5};function MA(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function EE(t){return MA(t)?t:new El(t)}function Gf(t){return MA(t)?t:new El(t).saturate(.5).darken(.1).hexString()}const DU=["x","y","borderWidth","radius","tension"],MU=["color","borderColor","backgroundColor"];function OU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:MU},numbers:{type:"number",properties:DU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function VU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const SE=new Map;function NU(t,e){e=e||{};const n=t+JSON.stringify(e);let i=SE.get(n);return i||(i=new Intl.NumberFormat(t,e),SE.set(n,i)),i}function OA(t,e,n){return NU(e,n).format(t)}const VA={values(t){return Ke(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=LU(t,n)}const o=Bm(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),OA(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Bm(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?VA.numeric.call(this,t,e,n):""}};function LU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var NA={formatters:VA};function FU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:NA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ss=Object.create(null),zm=Object.create(null);function Ha(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Qf(t,e,n){return typeof e=="string"?Sl(Ha(t,e),n):Sl(Ha(t,""),e)}class jU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Gf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Gf(r.borderColor),this.hoverColor=(i,r)=>Gf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Qf(this,e,n)}get(e){return Ha(this,e)}describe(e,n){return Qf(zm,e,n)}override(e,n){return Qf(ss,e,n)}route(e,n,i,r){const s=Ha(this,e),o=Ha(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ue(l)?Object.assign({},c,l):pe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Be=new jU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[OU,VU,FU]);function BU(t){return!t||Ie(t.size)||Ie(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function xE(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Rr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function IE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bE(t,e,n,i){LA(t,e,n,i,null)}function LA(t,e,n,i,r){let s,o,a,l,c,h,d,f;const m=e.pointStyle,v=e.rotation,T=e.radius;let x=(v||0)*vU;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(T)||T<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,T,0,0,nr):t.arc(n,i,T,0,nr),t.closePath();break;case"triangle":h=r?r/2:T,t.moveTo(n+Math.sin(x)*h,i-Math.cos(x)*T),x+=gE,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*T),x+=gE,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*T),t.closePath();break;case"rectRounded":c=T*.516,l=T-c,o=Math.cos(x+kr)*l,d=Math.cos(x+kr)*(r?r/2-c:l),a=Math.sin(x+kr)*l,f=Math.sin(x+kr)*(r?r/2-c:l),t.arc(n-d,i-a,c,x-St,x-vn),t.arc(n+f,i-o,c,x-vn,x),t.arc(n+d,i+a,c,x,x+vn),t.arc(n-f,i+o,c,x+vn,x+St),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*T,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}x+=kr;case"rectRot":d=Math.cos(x)*(r?r/2:T),o=Math.cos(x)*T,a=Math.sin(x)*T,f=Math.sin(x)*(r?r/2:T),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":x+=kr;case"cross":d=Math.cos(x)*(r?r/2:T),o=Math.cos(x)*T,a=Math.sin(x)*T,f=Math.sin(x)*(r?r/2:T),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(x)*(r?r/2:T),o=Math.cos(x)*T,a=Math.sin(x)*T,f=Math.sin(x)*(r?r/2:T),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),x+=kr,d=Math.cos(x)*(r?r/2:T),o=Math.cos(x)*T,a=Math.sin(x)*T,f=Math.sin(x)*(r?r/2:T),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(x)*T,a=Math.sin(x)*T,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(r?r/2:T),i+Math.sin(x)*T);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function FA(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function mv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gv(t){t.restore()}function UU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ie(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function zU(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function $U(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Il(t,e,n,i,r,s={}){const o=Ke(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,UU(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&$U(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ie(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),zU(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function bh(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*St,St,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,St,vn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,vn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-vn,!0),t.lineTo(n+o.topLeft,i)}const HU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,WU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KU(t,e){const n=(""+t).match(HU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const qU=t=>+t||0;function jA(t,e){const n={},i=ue(e),r=i?Object.keys(e):e,s=ue(t)?i?o=>pe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=qU(s(o));return n}function BA(t){return jA(t,{top:"y",right:"x",bottom:"y",left:"x"})}function eo(t){return jA(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dn(t){const e=BA(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Tt(t,e){t=t||{},e=e||Be.font;let n=pe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=pe(t.style,e.style);i&&!(""+i).match(WU)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:pe(t.family,e.family),lineHeight:KU(pe(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:pe(t.weight,e.weight),string:""};return r.string=BU(r),r}function Uc(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function GU(t,e,n){const{min:i,max:r}=t,s=dU(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Oo(t,e){return Object.assign(Object.create(t),e)}function yv(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=HA("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>yv([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return zA(a,l,()=>nz(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return AE(a).includes(l)},ownKeys(a){return AE(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Eo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:UA(t,i),setContext:s=>Eo(t,s,n,i),override:s=>Eo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return zA(s,o,()=>YU(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function UA(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:mr(n)?n:()=>n,isIndexable:mr(i)?i:()=>i}}const QU=(t,e)=>t?t+dv(e):e,vv=(t,e)=>ue(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function zA(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function YU(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return mr(a)&&o.isScriptable(e)&&(a=XU(e,a,t,n)),Ke(a)&&a.length&&(a=JU(e,a,t,o.isIndexable)),vv(e,a)&&(a=Eo(a,r,s&&s[e],o)),a}function XU(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),vv(t,l)&&(l=_v(r._scopes,r,t,l)),l}function JU(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ue(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=_v(c,r,t,h);e.push(Eo(d,s,o&&o[t],a))}}return e}function $A(t,e,n){return mr(t)?t(e,n):t}const ZU=(t,e)=>t===!0?e:typeof t=="string"?To(e,t):void 0;function ez(t,e,n,i,r){for(const s of e){const o=ZU(n,s);if(o){t.add(o);const a=$A(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function _v(t,e,n,i){const r=e._rootScopes,s=$A(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=PE(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=PE(a,o,s,l,i),l===null)?!1:yv(Array.from(a),[""],r,s,()=>tz(e,n,i))}function PE(t,e,n,i,r){for(;n;)n=ez(t,e,n,i,r);return n}function tz(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Ke(r)&&ue(n)?n:r||{}}function nz(t,e,n,i){let r;for(const s of e)if(r=HA(QU(s,t),n),typeof r<"u")return vv(t,r)?_v(n,i,t,r):r}function HA(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function AE(t){let e=t._keys;return e||(e=t._keys=iz(t._scopes)),e}function iz(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function wv(){return typeof window<"u"&&typeof document<"u"}function Tv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ph(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Ed=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function rz(t,e){return Ed(t).getPropertyValue(e)}const sz=["top","right","bottom","left"];function Qr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=sz[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const oz=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function az(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(oz(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Fr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Ed(n),s=r.boxSizing==="border-box",o=Qr(r,"padding"),a=Qr(r,"border","width"),{x:l,y:c,box:h}=az(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return s&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-f)/v*n.height/i)}}function lz(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Tv(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ed(s),l=Qr(a,"border","width"),c=Qr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Ph(a.maxWidth,s,"clientWidth"),r=Ph(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||xh,maxHeight:r||xh}}const zc=t=>Math.round(t*10)/10;function cz(t,e,n,i){const r=Ed(t),s=Qr(r,"margin"),o=Ph(r.maxWidth,t,"clientWidth")||xh,a=Ph(r.maxHeight,t,"clientHeight")||xh,l=lz(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=Qr(r,"border","width"),m=Qr(r,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=zc(Math.min(c,o,l.maxWidth)),h=zc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=zc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=zc(Math.floor(h*i))),{width:c,height:h}}function kE(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const uz=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};wv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function CE(t,e){const n=rz(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const hz=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},dz=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function to(t,e,n){return t?hz(e,n):dz()}function WA(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function KA(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class fz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=RA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qn=new fz;const RE="transparent",pz={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=EE(t||RE),r=i.valid&&EE(e||RE);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class mz{constructor(e,n,i,r){const s=n[i];r=Uc([e.to,r,s,e.from]);const o=Uc([e.from,s,r]);this._active=!0,this._fn=e.fn||pz[e.type||typeof o],this._easing=$a[e.easing]||$a.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Uc([e.to,n,r,e.from]),this._from=Uc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class qA{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ue(e))return;const n=Object.keys(Be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const o={};for(const a of n)o[a]=s[a];(Ke(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=yz(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&gz(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new mz(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return qn.add(this._chart,i),!0}}function gz(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function yz(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function DE(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function vz(t,e,n){if(n===!1)return!1;const i=DE(t,n),r=DE(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function _z(t){let e,n,i,r;return ue(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function GA(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function ME(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],hn(c)&&(s||e===0||ir(e)===ir(c))&&(e+=c)}return!h&&!i.all?0:e}function wz(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Yf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Tz(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Ez(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Sz(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function OE(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function VE(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=Tz(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:T,[c]:x}=v,y=v._stacks||(v._stacks={});f=y[c]=Sz(r,h,T),f[a]=x,f._top=OE(f,o,!0,i.type),f._bottom=OE(f,o,!1,i.type);const w=f._visualValues||(f._visualValues={});w[a]=x}}function Xf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function xz(t,e){return Oo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Iz(t,e,n){return Oo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function sa(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Jf=t=>t==="reset"||t==="none",NE=(t,e)=>e?t:Object.assign({},t),bz=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:GA(n,!0),values:null};class Wa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Yf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&sa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,s=n.xAxisID=pe(i.xAxisID,Xf(e,"x")),o=n.yAxisID=pe(i.yAxisID,Xf(e,"y")),a=n.rAxisID=pe(i.rAxisID,Xf(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_E(this._data,this),e._stacked&&sa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ue(n)){const r=this._cachedMeta;this._data=wz(n,r)}else if(i!==n){if(i){_E(i,this);const r=this._cachedMeta;sa(r),r._parsed=[]}n&&Object.isExtensible(n)&&kU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Yf(n.vScale,n),n.stack!==i.stack&&(r=!0,sa(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(VE(this,n._parsed),n._stacked=Yf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{Ke(r[e])?f=this.parseArrayData(i,r,e,n):ue(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&VE(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,m,v;for(f=0,m=r;f<m;++f)v=f+i,d[f]={[a]:h||s.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],c[h]={x:s.parse(To(m,a),f),y:o.parse(To(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:GA(r,!0),values:n._stacks[e.axis]._visualValues};return ME(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=ME(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=bz(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Ez(a);let f,m;function v(){m=r[f];const T=m[a.axis];return!hn(m[e.axis])||h>T||d<T}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],hn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_z(pe(this.options.clip,vz(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Iz(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=xz(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&xl(i);if(a)return NE(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Be.elements[e]),v=()=>this.getContext(i,r,n),T=c.resolveNamedOptions(f,m,v,d);return T.$shared&&(T.$shared=l,s[o]=Object.freeze(NE(T,l))),T}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new qA(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Jf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Jf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Jf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&sa(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ae(Wa,"defaults",{}),ae(Wa,"datasetElementType",null),ae(Wa,"dataElementType",null);function Pz(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=CA(i.sort((r,s)=>r-s))}return t._cache.$bar}function Az(t){const e=t.iScale,n=Pz(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(xl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function kz(t,e,n,i){const r=n.barThickness;let s,o;return Ie(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function Cz(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function Rz(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function QA(t,e,n,i){return Ke(t)?Rz(t,e,n,i):e[n.axis]=n.parse(t,i),e}function LE(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,d,f;for(c=n,h=n+i;c<h;++c)f=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(QA(f,d,s,c));return l}function Zf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Dz(t,e,n){return t!==0?ir(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Mz(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function Oz(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Mz(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[FE(h,o,a,l)]=!0,r=c)),s[FE(r,o,a,l)]=!0,t.borderSkipped=s}function FE(t,e,n,i){return i?(t=Vz(t,e,n),t=jE(t,n,e)):t=jE(t,e,n),t}function Vz(t,e,n){return t===e?n:t===n?e:t}function jE(t,e,n){return t==="start"?e:t==="end"?n:t}function Nz(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Su extends Wa{parsePrimitiveData(e,n,i,r){return LE(e,n,i,r)}parseArrayData(e,n,i,r){return LE(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,m,v,T;for(f=i,m=i+r;f<m;++f)T=n[f],v={},v[s.axis]=s.parse(To(T,c),f),d.push(QA(To(T,h),v,o,f));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Zf(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+i;m++){const v=this.getParsed(m),T=s||Ie(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,h),y=(v._stacks||{})[a.axis],w={horizontal:c,base:T.base,enableBorderRadius:!y||Zf(v._custom)||o===y._top||o===y._bottom,x:c?T.head:x.center,y:c?x.center:T.head,height:c?x.size:Math.abs(T.size),width:c?Math.abs(T.size):x.size};f&&(w.options=d||this.resolveDataElementOptions(m,e[m].active?"active":r));const S=w.options||e[m].options;Oz(w,S,y,o),Nz(w,S,h.ratio),this.updateElement(e[m],m,w,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(m=>m[i.axis]===l),f=d&&d[h.vScale.axis];if(Ie(f)||isNaN(f))return!0};for(const h of r)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||Az(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=Zf(c);let d=l[n.axis],f=0,m=i?this.applyStack(n,l,i):d,v,T;m!==d&&(f=m-d,m=d),h&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&ir(d)!==ir(c.barEnd)&&(f=0),f+=d);const x=!Ie(s)&&!h?s:f;let y=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(f+m):v=y,T=v-y,Math.abs(T)<o){T=Dz(T,n,a)*o,d===a&&(y-=T/2);const w=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),C=Math.min(w,S),D=Math.max(w,S);y=Math.max(Math.min(y,D),C),v=y+T,i&&!h&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const w=ir(T)*n.getLineWidthForValue(a)/2;y+=w,T-=w}return{size:T,base:y,head:v,center:v+T/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=pe(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?Cz(e,n,r,c):kz(e,n,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}ae(Su,"id","bar"),ae(Su,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ae(Su,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Dr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ev{constructor(e){ae(this,"options");this.options=e||{}}static override(e){Object.assign(Ev.prototype,e)}init(){}formats(){return Dr()}parse(){return Dr()}format(){return Dr()}add(){return Dr()}diff(){return Dr()}startOf(){return Dr()}endOf(){return Dr()}}var Lz={_date:Ev};function Fz(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?PU:Um;if(i){if(r._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=l(s,e,n-h),f=l(s,e,n+h);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function ql(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=Fz(s[a],e,o,r);for(let m=d;m<=f;++m){const v=h[m];v.skip||i(v,c,m)}}}function jz(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function ep(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||ql(t,n,e,function(a,l,c){!r&&!FA(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Bz(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=SU(o,{x:e.x,y:e.y});IU(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return ql(t,n,e,s),r}function Uz(t,e,n,i,r,s){let o=[];const a=jz(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!m)return;const x=a(e,v);x<l?(o=[{element:h,datasetIndex:d,index:f}],l=x):x===l&&o.push({element:h,datasetIndex:d,index:f})}return ql(t,n,e,c),o}function tp(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?Bz(t,e,n,r):Uz(t,e,n,i,r,s)}function BE(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ql(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var zz={evaluateInteractionItems:ql,modes:{index(t,e,n,i){const r=Fr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ep(t,r,s,i,o):tp(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ep(t,r,s,i,o):tp(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return ep(t,r,s,i,o)},nearest(t,e,n,i){const r=Fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return tp(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Fr(e,t);return BE(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Fr(e,t);return BE(t,r,"y",n.intersect,i)}}};const YA=["left","top","right","bottom"];function oa(t,e){return t.filter(n=>n.pos===e)}function UE(t,e){return t.filter(n=>YA.indexOf(n.pos)===-1&&n.box.axis===e)}function aa(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function $z(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Hz(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!YA.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Wz(t,e){const n=Hz(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function Kz(t){const e=$z(t),n=aa(e.filter(c=>c.box.fullSize),!0),i=aa(oa(e,"left"),!0),r=aa(oa(e,"right")),s=aa(oa(e,"top"),!0),o=aa(oa(e,"bottom")),a=UE(e,"x"),l=UE(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:oa(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function zE(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function XA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function qz(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ue(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&XA(o,s.getPadding());const a=Math.max(0,e.outerWidth-zE(o,t,"left","right")),l=Math.max(0,e.outerHeight-zE(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function Gz(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Qz(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Sa(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Qz(a.horizontal,e));const{same:d,other:f}=qz(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&Sa(r,e,n,i)||h}function $c(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function $E(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;xl(c.start)&&(o=c.start),l.fullSize?$c(l,r.left,o,n.outerWidth-r.right-r.left,f):$c(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;xl(c.start)&&(s=c.start),l.fullSize?$c(l,s,r.top,f,n.outerHeight-r.bottom-r.top):$c(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var an={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=dn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Kz(t.boxes),l=a.vertical,c=a.horizontal;fe(t.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});const h=l.reduce((T,x)=>x.box.options&&x.box.options.display===!1?T:T+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);XA(f,dn(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),v=Wz(l.concat(c),d);Sa(a.fullSize,m,d,v),Sa(l,m,d,v),Sa(c,m,d,v)&&Sa(l,m,d,v),Gz(m),$E(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,$E(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},fe(a.chartArea,T=>{const x=T.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class JA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Yz extends JA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xu="$chartjs",Xz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},HE=t=>t===null||t==="";function Jz(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[xu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",HE(r)){const s=CE(t,"width");s!==void 0&&(t.width=s)}if(HE(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=CE(t,"height");s!==void 0&&(t.height=s)}return t}const ZA=uz?{passive:!0}:!1;function Zz(t,e,n){t&&t.addEventListener(e,n,ZA)}function e3(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ZA)}function t3(t,e){const n=Xz[t.type]||t.type,{x:i,y:r}=Fr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ah(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function n3(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ah(a.addedNodes,i),o=o&&!Ah(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function i3(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ah(a.removedNodes,i),o=o&&!Ah(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const bl=new Map;let WE=0;function ek(){const t=window.devicePixelRatio;t!==WE&&(WE=t,bl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function r3(t,e){bl.size||window.addEventListener("resize",ek),bl.set(t,e)}function s3(t){bl.delete(t),bl.size||window.removeEventListener("resize",ek)}function o3(t,e,n){const i=t.canvas,r=i&&Tv(i);if(!r)return;const s=DA((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),r3(t,s),o}function np(t,e,n){n&&n.disconnect(),e==="resize"&&s3(t)}function a3(t,e,n){const i=t.canvas,r=DA(s=>{t.ctx!==null&&n(t3(s,t))},t);return Zz(i,e,r),r}class l3 extends JA{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Jz(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[xu])return!1;const i=n[xu].initial;["height","width"].forEach(s=>{const o=i[s];Ie(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[xu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:n3,detach:i3,resize:o3}[n]||a3;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:np,detach:np,resize:np}[n]||e3)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return cz(e,n,i,r)}isAttached(e){const n=e&&Tv(e);return!!(n&&n.isConnected)}}function c3(t){return!wv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Yz:l3}var Yc;let Vo=(Yc=class{constructor(){ae(this,"x");ae(this,"y");ae(this,"active",!1);ae(this,"options");ae(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Ih(this.x)&&Ih(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},ae(Yc,"defaults",{}),ae(Yc,"defaultRoutes"),Yc);function u3(t,e){const n=t.options.ticks,i=h3(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?f3(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return p3(e,c,s,o/r),c;const h=d3(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Hc(e,c,h,Ie(m)?0:a-m,a),d=0,f=o-1;d<f;d++)Hc(e,c,h,s[d],s[d+1]);return Hc(e,c,h,l,Ie(m)?e.length:l+m),c}return Hc(e,c,h),c}function h3(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function d3(t,e,n){const i=m3(t),r=e.length/n;if(!i)return Math.max(r,1);const s=_U(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function f3(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function p3(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Hc(t,e,n,i,r){const s=pe(i,0),o=Math.min(pe(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function m3(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const g3=t=>t==="left"?"right":t==="right"?"left":t,KE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,qE=(t,e)=>Math.min(e||t,t);function GE(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function y3(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function v3(t,e){fe(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function la(t){return t.drawTicks?t.tickLength:0}function QE(t,e){if(!t.display)return 0;const n=Tt(t.font,e),i=dn(t.padding);return(Ke(t.text)?t.text.length:1)*n.lineHeight+i.height}function _3(t,e){return Oo(t,{scale:e,type:"scale"})}function w3(t,e,n){return Oo(t,{tick:n,index:e,type:"tick"})}function T3(t,e,n){let i=pv(t);return(n&&e!=="right"||!n&&e==="right")&&(i=g3(i)),i}function E3(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,v;const T=o-r,x=a-s;if(t.isHorizontal()){if(m=mt(i,s,a),ue(n)){const y=Object.keys(n)[0],w=n[y];v=h[y].getPixelForValue(w)+T-e}else n==="center"?v=(c.bottom+c.top)/2+T-e:v=KE(t,n,e);f=a-s}else{if(ue(n)){const y=Object.keys(n)[0],w=n[y];m=h[y].getPixelForValue(w)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=KE(t,n,e);v=mt(i,o,r),d=n==="left"?-vn:vn}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class No extends Vo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=bn(e,Number.POSITIVE_INFINITY),n=bn(n,Number.NEGATIVE_INFINITY),i=bn(i,Number.POSITIVE_INFINITY),r=bn(r,Number.NEGATIVE_INFINITY),{min:bn(e,i),max:bn(n,r),minDefined:hn(e),maxDefined:hn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:bn(n,bn(i,n)),max:bn(i,bn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=GU(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?GE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=u3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xe(this.options.afterUpdate,[this])}beforeSetDimensions(){xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=xe(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=qE(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=_n(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-la(e.grid)-n.padding-QE(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=EU(Math.min(Math.asin(_n((h.highest.height+6)/a,-1,1)),Math.asin(_n(l/c,-1,1))-Math.asin(_n(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=QE(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=la(s)+l):(e.height=this.maxHeight,e.width=la(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,v=Hr(this.labelRotation),T=Math.cos(v),x=Math.sin(v);if(a){const y=i.mirror?0:x*d.width+T*f.height;e.height=Math.min(this.maxHeight,e.height+y+m)}else{const y=i.mirror?0:T*d.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+y+m)}this._calculatePadding(c,h,x,T)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ie(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=GE(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/qE(n,i));let c=0,h=0,d,f,m,v,T,x,y,w,S,C,D;for(d=0;d<n;d+=l){if(v=e[d].label,T=this._resolveTickFontOptions(d),r.font=x=T.string,y=s[x]=s[x]||{data:{},gc:[]},w=T.lineHeight,S=C=0,!Ie(v)&&!Ke(v))S=xE(r,y.data,y.gc,S,v),C=w;else if(Ke(v))for(f=0,m=v.length;f<m;++f)D=v[f],!Ie(D)&&!Ke(D)&&(S=xE(r,y.data,y.gc,S,D),C+=w);o.push(S),a.push(C),c=Math.max(S,c),h=Math.max(C,h)}v3(s,n);const V=o.indexOf(c),I=a.indexOf(h),_=b=>({width:o[b]||0,height:a[b]||0});return{first:_(0),last:_(n-1),widest:_(V),highest:_(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bU(this._alignToPixels?Rr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=w3(this.getContext(),e,i))}return this.$context||(this.$context=_3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=la(s),m=[],v=a.setContext(this.getContext()),T=v.display?v.width:0,x=T/2,y=function(Pe){return Rr(i,Pe,T)};let w,S,C,D,V,I,_,b,P,k,R,A;if(o==="top")w=y(this.bottom),I=this.bottom-f,b=w-x,k=y(e.top)+x,A=e.bottom;else if(o==="bottom")w=y(this.top),k=e.top,A=y(e.bottom)-x,I=w+x,b=this.top+f;else if(o==="left")w=y(this.right),V=this.right-f,_=w-x,P=y(e.left)+x,R=e.right;else if(o==="right")w=y(this.left),P=e.left,R=y(e.right)-x,V=w+x,_=this.left+f;else if(n==="x"){if(o==="center")w=y((e.top+e.bottom)/2+.5);else if(ue(o)){const Pe=Object.keys(o)[0],ee=o[Pe];w=y(this.chart.scales[Pe].getPixelForValue(ee))}k=e.top,A=e.bottom,I=w+x,b=I+f}else if(n==="y"){if(o==="center")w=y((e.left+e.right)/2);else if(ue(o)){const Pe=Object.keys(o)[0],ee=o[Pe];w=y(this.chart.scales[Pe].getPixelForValue(ee))}V=w-x,_=V-f,P=e.left,R=e.right}const we=pe(r.ticks.maxTicksLimit,d),he=Math.max(1,Math.ceil(d/we));for(S=0;S<d;S+=he){const Pe=this.getContext(S),ee=s.setContext(Pe),B=a.setContext(Pe),K=ee.lineWidth,q=ee.color,ge=B.dash||[],re=B.dashOffset,ve=ee.tickWidth,Ze=ee.tickColor,bt=ee.tickBorderDash||[],et=ee.tickBorderDashOffset;C=y3(this,S,l),C!==void 0&&(D=Rr(i,C,K),c?V=_=P=R=D:I=b=k=A=D,m.push({tx1:V,ty1:I,tx2:_,ty2:b,x1:P,y1:k,x2:R,y2:A,width:K,color:q,borderDash:ge,borderDashOffset:re,tickWidth:ve,tickColor:Ze,tickBorderDash:bt,tickBorderDashOffset:et}))}return this._ticksLength=d,this._borderValue=w,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=la(i.grid),m=f+h,v=d?-h:m,T=-Hr(this.labelRotation),x=[];let y,w,S,C,D,V,I,_,b,P,k,R,A="middle";if(r==="top")V=this.bottom-v,I=this._getXAxisLabelAlignment();else if(r==="bottom")V=this.top+v,I=this._getXAxisLabelAlignment();else if(r==="left"){const he=this._getYAxisLabelAlignment(f);I=he.textAlign,D=he.x}else if(r==="right"){const he=this._getYAxisLabelAlignment(f);I=he.textAlign,D=he.x}else if(n==="x"){if(r==="center")V=(e.top+e.bottom)/2+m;else if(ue(r)){const he=Object.keys(r)[0],Pe=r[he];V=this.chart.scales[he].getPixelForValue(Pe)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-m;else if(ue(r)){const he=Object.keys(r)[0],Pe=r[he];D=this.chart.scales[he].getPixelForValue(Pe)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const we=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){S=a[y],C=S.label;const he=s.setContext(this.getContext(y));_=this.getPixelForTick(y)+s.labelOffset,b=this._resolveTickFontOptions(y),P=b.lineHeight,k=Ke(C)?C.length:1;const Pe=k/2,ee=he.color,B=he.textStrokeColor,K=he.textStrokeWidth;let q=I;o?(D=_,I==="inner"&&(y===w-1?q=this.options.reverse?"left":"right":y===0?q=this.options.reverse?"right":"left":q="center"),r==="top"?c==="near"||T!==0?R=-k*P+P/2:c==="center"?R=-we.highest.height/2-Pe*P+P:R=-we.highest.height+P/2:c==="near"||T!==0?R=P/2:c==="center"?R=we.highest.height/2-Pe*P:R=we.highest.height-k*P,d&&(R*=-1),T!==0&&!he.showLabelBackdrop&&(D+=P/2*Math.sin(T))):(V=_,R=(1-k)*P/2);let ge;if(he.showLabelBackdrop){const re=dn(he.backdropPadding),ve=we.heights[y],Ze=we.widths[y];let bt=R-re.top,et=0-re.left;switch(A){case"middle":bt-=ve/2;break;case"bottom":bt-=ve;break}switch(I){case"center":et-=Ze/2;break;case"right":et-=Ze;break;case"inner":y===w-1?et-=Ze:y>0&&(et-=Ze/2);break}ge={left:et,top:bt,width:Ze+re.width,height:ve+re.height,color:he.backdropColor}}x.push({label:C,font:b,textOffset:R,options:{rotation:T,color:ee,strokeColor:B,strokeWidth:K,textAlign:q,textBaseline:A,translation:[D,V],backdrop:ge}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Rr(e,this.left,o)-o/2,h=Rr(e,this.right,a)+a/2,d=f=l):(d=Rr(e,this.top,o)-o/2,f=Rr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&mv(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Il(i,c,0,h,l,a)}r&&gv(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Tt(i.font),o=dn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ue(n)?(l+=o.bottom,Ke(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=E3(this,l,n,a);Il(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:T3(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=pe(e.grid&&e.grid.z,-1),r=pe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==No.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Tt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;I3(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,S3(e,o,i),this.override&&Be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Be[r]&&(delete Be[r][i],this.override&&delete ss[i])}}function S3(t,e,n){const i=Sl(Object.create(null),[n?Be.get(n):{},Be.get(e),t.defaults]);Be.set(e,i),t.defaultRoutes&&x3(e,t.defaultRoutes),t.descriptors&&Be.describe(e,t.descriptors)}function x3(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Be.route(s,r,l,a)})}function I3(t){return"id"in t&&"defaults"in t}class b3{constructor(){this.controllers=new Wc(Wa,"datasets",!0),this.elements=new Wc(Vo,"elements"),this.plugins=new Wc(Object,"plugins"),this.scales=new Wc(No,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):fe(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=dv(e);xe(i["before"+r],[],i),n[e](i),xe(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var kn=new b3;class P3{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(xe(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=pe(i.options&&i.options.plugins,{}),s=A3(i);return r===!1&&!n?[]:C3(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function A3(t){const e={},n=[],i=Object.keys(kn.plugins.items);for(let s=0;s<i.length;s++)n.push(kn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function k3(t,e){return!e&&t===!1?null:t===!0?{}:t}function C3(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=k3(i[l],r);c!==null&&s.push({plugin:a,options:R3(t.config,{plugin:a,local:n[l]},c,o)})}return s}function R3(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $m(t,e){const n=Be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function D3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function M3(t,e){return t===e?"_index_":"_value_"}function YE(t){if(t==="x"||t==="y"||t==="r")return t}function O3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hm(t,...e){if(YE(t))return t;for(const n of e){const i=n.axis||O3(n.position)||t.length>1&&YE(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function XE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function V3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return XE(t,"x",n[0])||XE(t,"y",n[0])}return{}}function N3(t,e){const n=ss[t.type]||{scales:{}},i=e.scales||{},r=$m(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Hm(o,a,V3(o,t),Be.scales[a.type]),c=M3(l,r),h=n.scales||{};s[o]=za(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||$m(a,e),h=(ss[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=D3(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),za(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];za(a,[Be.scales[a.type],Be.scale])}),s}function tk(t){const e=t.options||(t.options={});e.plugins=pe(e.plugins,{}),e.scales=N3(t,e)}function nk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function L3(t){return t=t||{},t.data=nk(t.data),tk(t),t}const JE=new Map,ik=new Set;function Kc(t,e){let n=JE.get(t);return n||(n=e(),JE.set(t,n),ik.add(n)),n}const ca=(t,e,n)=>{const i=To(e,n);i!==void 0&&t.add(i)};class F3{constructor(e){this._config=L3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Kc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ca(l,e,d))),h.forEach(d=>ca(l,r,d)),h.forEach(d=>ca(l,ss[s]||{},d)),h.forEach(d=>ca(l,Be,d)),h.forEach(d=>ca(l,zm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ik.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ss[n]||{},Be.datasets[n]||{},{type:n},Be,zm]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=ZE(this._resolverCache,e,r);let l=o;if(B3(o,n)){s.$shared=!1,i=mr(i)?i():i;const c=this.createResolver(e,i,a);l=Eo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=ZE(this._resolverCache,e,i);return ue(n)?Eo(s,n,void 0,r):s}}function ZE(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:yv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const j3=t=>ue(t)&&Object.getOwnPropertyNames(t).some(e=>mr(t[e]));function B3(t,e){const{isScriptable:n,isIndexable:i}=UA(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(mr(a)||j3(a))||o&&Ke(a))return!0}return!1}var U3="4.4.6";const z3=["top","bottom","left","right","chartArea"];function eS(t,e){return t==="top"||t==="bottom"||z3.indexOf(t)===-1&&e==="x"}function tS(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function nS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),xe(n&&n.onComplete,[t],e)}function $3(t){const e=t.chart,n=e.options.animation;xe(n&&n.onProgress,[t],e)}function rk(t){return wv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Iu={},iS=t=>{const e=rk(t);return Object.values(Iu).filter(n=>n.canvas===e).pop()};function H3(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function W3(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function qc(t,e,n){return t.options.clip?t[n]:e[n]}function K3(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:qc(n,e,"left"),right:qc(n,e,"right"),top:qc(i,e,"top"),bottom:qc(i,e,"bottom")}:e}var Ii;let Sd=(Ii=class{static register(...e){kn.add(...e),rS()}static unregister(...e){kn.remove(...e),rS()}constructor(e,n){const i=this.config=new F3(n),r=rk(e),s=iS(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||c3(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=hU(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new P3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CU(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Iu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qn.listen(this,"complete",nS),qn.listen(this,"progress",$3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ie(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():kE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return IE(this.canvas,this.ctx),this}stop(){return qn.stop(this),this}resize(e,n){qn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,kE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),xe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};fe(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Hm(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),fe(s,o=>{const a=o.options,l=a.id,c=Hm(l,a),h=pe(a.type,o.dtype);(a.position===void 0||eS(a.position,c)!==eS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=kn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),fe(r,(o,a)=>{o||delete i[a]}),fe(i,o=>{an.configure(this,o,o.options),an.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(tS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||$m(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=kn.getController(a),{datasetElementType:c,dataElementType:h}=Be.datasets[a];Object.assign(l,{dataElementType:kn.getElement(h),datasetElementType:c&&kn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){fe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||fe(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){fe(this.scales,e=>{an.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!mE(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;H3(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!mE(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;an.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],fe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,mr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qn.has(this)?this.attached&&!qn.running(this)&&qn.start(this):(this.draw(),nS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=K3(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&mv(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&gv(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return FA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=zz.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Oo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);xl(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),IE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Iu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};fe(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){fe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},fe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Eh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=yU(e),c=W3(e,this._lastEvent,i,l);i&&(this._lastEvent=null,xe(s.onHover,[e,a,this],this),l&&xe(s.onClick,[e,a,this],this));const h=!Eh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ae(Ii,"defaults",Be),ae(Ii,"instances",Iu),ae(Ii,"overrides",ss),ae(Ii,"registry",kn),ae(Ii,"version",U3),ae(Ii,"getChart",iS),Ii);function rS(){return fe(Sd.instances,t=>t._plugins.invalidate())}function sk(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,h=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function Bi(t,e,n,i){return t?0:_n(e,n,i)}function q3(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=BA(i);return{t:Bi(r.top,s.top,0,n),r:Bi(r.right,s.right,0,e),b:Bi(r.bottom,s.bottom,0,n),l:Bi(r.left,s.left,0,e)}}function G3(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=eo(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ue(r);return{topLeft:Bi(!l||a.top||a.left,s.topLeft,0,o),topRight:Bi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Bi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Bi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Q3(t){const e=sk(t),n=e.right-e.left,i=e.bottom-e.top,r=q3(t,n/2,i/2),s=G3(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function ip(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&sk(t,i);return a&&(r||zs(e,a.left,a.right))&&(s||zs(n,a.top,a.bottom))}function Y3(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function X3(t,e){t.rect(e.x,e.y,e.w,e.h)}function rp(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class bu extends Vo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Q3(this),a=Y3(o.radius)?bh:X3;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,rp(o,n,s)),e.clip(),a(e,rp(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,rp(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return ip(this,e,n,i)}inXRange(e,n){return ip(this,e,null,n)}inYRange(e,n){return ip(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ae(bu,"id","bar"),ae(bu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ae(bu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const sS=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},J3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class oS extends Vo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=xe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Tt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sS(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,T)=>{const x=i+n/2+s.measureText(v.text).width;(T===0||c[c.length-1]+x+2*a>o)&&(d+=h,c[c.length-(T>0?0:1)]=0,m+=h,f++),l[T]={left:0,top:m,row:f,width:x,height:r},c[c.length-1]+=x+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,T=0;return this.legendItems.forEach((x,y)=>{const{itemWidth:w,itemHeight:S}=Z3(i,n,s,x,r);y>0&&m+S+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,T++,f=m=0),l[y]={left:v,top:m,col:T,width:w,height:S},f=Math.max(f,w),m+=S+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=to(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=mt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=mt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=mt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=mt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;mv(e,this),this._draw(),gv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Be.color,l=to(e.rtl,this.left,this.width),c=Tt(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:T,itemHeight:x}=sS(o,d),y=function(V,I,_){if(isNaN(v)||v<=0||isNaN(T)||T<0)return;r.save();const b=pe(_.lineWidth,1);if(r.fillStyle=pe(_.fillStyle,a),r.lineCap=pe(_.lineCap,"butt"),r.lineDashOffset=pe(_.lineDashOffset,0),r.lineJoin=pe(_.lineJoin,"miter"),r.lineWidth=b,r.strokeStyle=pe(_.strokeStyle,a),r.setLineDash(pe(_.lineDash,[])),o.usePointStyle){const P={radius:T*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:b},k=l.xPlus(V,v/2),R=I+f;LA(r,P,k,R,o.pointStyleWidth&&v)}else{const P=I+Math.max((d-T)/2,0),k=l.leftForLtr(V,v),R=eo(_.borderRadius);r.beginPath(),Object.values(R).some(A=>A!==0)?bh(r,{x:k,y:P,w:v,h:T,radius:R}):r.rect(k,P,v,T),r.fill(),b!==0&&r.stroke()}r.restore()},w=function(V,I,_){Il(r,_.text,V,I+x/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?m={x:mt(s,this.left+h,this.right-i[0]),y:this.top+h+C,line:0}:m={x:this.left+h,y:mt(s,this.top+C+h,this.bottom-n[0].height),line:0},WA(this.ctx,e.textDirection);const D=x+h;this.legendItems.forEach((V,I)=>{r.strokeStyle=V.fontColor,r.fillStyle=V.fontColor;const _=r.measureText(V.text).width,b=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),P=v+f+_;let k=m.x,R=m.y;l.setWidth(this.width),S?I>0&&k+P+h>this.right&&(R=m.y+=D,m.line++,k=m.x=mt(s,this.left+h,this.right-i[m.line])):I>0&&R+D>this.bottom&&(k=m.x=k+n[m.line].width+h,m.line++,R=m.y=mt(s,this.top+C+h,this.bottom-n[m.line].height));const A=l.x(k);if(y(A,R,V),k=RU(b,k+v+f,S?k+P:this.right,e.rtl),w(l.x(k),R,V),S)m.x+=P+h;else if(typeof V.text!="string"){const we=c.lineHeight;m.y+=ok(V,we)+h}else m.y+=D}),KA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Tt(n.font),r=dn(n.padding);if(!n.display)return;const s=to(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=mt(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((T,x)=>Math.max(T,x.height),0);h=c+mt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=mt(a,d,d+f);o.textAlign=s.textAlign(pv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Il(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Tt(e.font),i=dn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(zs(e,this.left,this.right)&&zs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],zs(e,r.left,r.left+r.width)&&zs(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!n9(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=J3(r,i);r&&!s&&xe(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&xe(n.onHover,[e,i,this],this)}else i&&xe(n.onClick,[e,i,this],this)}}function Z3(t,e,n,i,r){const s=e9(i,t,e,n),o=t9(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function e9(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function t9(t,e,n){let i=t;return typeof e.text!="string"&&(i=ok(e,n)),i}function ok(t,e){const n=t.text?t.text.length:0;return e*n}function n9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var i9={id:"legend",_element:oS,start(t,e,n){const i=t.legend=new oS({ctx:t.ctx,options:n,chart:t});an.configure(t,i,n),an.addBox(t,i)},stop(t){an.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;an.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=dn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ak extends Vo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Ke(i.text)?i.text.length:1;this._padding=dn(i.padding);const s=r*Tt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=mt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=mt(a,r,n),l=St*-.5):(h=s-e,d=mt(a,n,r),l=St*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Tt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Il(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:pv(n.align),textBaseline:"middle",translation:[o,a]})}}function r9(t,e){const n=new ak({ctx:t.ctx,options:e,chart:t});an.configure(t,n,e),an.addBox(t,n),t.titleBlock=n}var s9={id:"title",_element:ak,start(t,e,n){r9(t,n)},stop(t){const e=t.titleBlock;an.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;an.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=xU(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Pn(t,e){return e&&(Ke(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function o9(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function aS(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Tt(e.bodyFont),c=Tt(e.titleFont),h=Tt(e.footerFont),d=s.length,f=r.length,m=i.length,v=dn(e.padding);let T=v.height,x=0,y=i.reduce((C,D)=>C+D.before.length+D.lines.length+D.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(T+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;T+=m*C+(y-m)*l.lineHeight+(y-1)*e.bodySpacing}f&&(T+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const S=function(C){x=Math.max(x,n.measureText(C).width+w)};return n.save(),n.font=c.string,fe(t.title,S),n.font=l.string,fe(t.beforeBody.concat(t.afterBody),S),w=e.displayColors?o+2+e.boxPadding:0,fe(i,C=>{fe(C.before,S),fe(C.lines,S),fe(C.after,S)}),w=0,n.font=h.string,fe(t.footer,S),n.restore(),x+=v.width,{width:x,height:T}}function a9(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function l9(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function c9(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),l9(c,t,e,n)&&(c="center"),c}function lS(t,e,n){const i=n.yAlign||e.yAlign||a9(t,n);return{xAlign:n.xAlign||e.xAlign||c9(t,e,n,i),yAlign:i}}function u9(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function h9(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function cS(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=eo(o);let v=u9(e,a);const T=h9(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+r:a==="right"&&(v+=Math.max(d,m)+r),{x:_n(v,0,i.width-e.width),y:_n(T,0,i.height-e.height)}}function Gc(t,e,n){const i=dn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function uS(t){return Pn([],Gn(t))}function d9(t,e,n){return Oo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const lk={beforeTitle:Kn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Kn,beforeBody:Kn,beforeLabel:Kn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ie(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Kn,afterBody:Kn,beforeFooter:Kn,footer:Kn,afterFooter:Kn};function Mt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?lk[e].call(n,i):r}class Wm extends Vo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new qA(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=d9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Mt(i,"beforeTitle",this,e),s=Mt(i,"title",this,e),o=Mt(i,"afterTitle",this,e);let a=[];return a=Pn(a,Gn(r)),a=Pn(a,Gn(s)),a=Pn(a,Gn(o)),a}getBeforeBody(e,n){return uS(Mt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return fe(e,s=>{const o={before:[],lines:[],after:[]},a=hS(i,s);Pn(o.before,Gn(Mt(a,"beforeLabel",this,s))),Pn(o.lines,Mt(a,"label",this,s)),Pn(o.after,Gn(Mt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return uS(Mt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Mt(i,"beforeFooter",this,e),s=Mt(i,"footer",this,e),o=Mt(i,"afterFooter",this,e);let a=[];return a=Pn(a,Gn(r)),a=Pn(a,Gn(s)),a=Pn(a,Gn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(o9(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),fe(a,h=>{const d=hS(e.callbacks,h);r.push(Mt(d,"labelColor",this,h)),s.push(Mt(d,"labelPointStyle",this,h)),o.push(Mt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=xa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=aS(this,i),c=Object.assign({},a,l),h=lS(this.chart,i,c),d=cS(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=eo(a),{x:f,y:m}=e,{width:v,height:T}=n;let x,y,w,S,C,D;return s==="center"?(C=m+T/2,r==="left"?(x=f,y=x-o,S=C+o,D=C-o):(x=f+v,y=x+o,S=C-o,D=C+o),w=x):(r==="left"?y=f+Math.max(l,h)+o:r==="right"?y=f+v-Math.max(c,d)-o:y=this.caretX,s==="top"?(S=m,C=S-o,x=y-o,w=y+o):(S=m+T,C=S+o,x=y+o,w=y-o),D=S),{x1:x,x2:y,x3:w,y1:S,y2:C,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=to(i.rtl,this.x,this.width);for(e.x=Gc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Tt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Tt(s.bodyFont),d=Gc(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(s.usePointStyle){const T={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=r.leftForLtr(f,c)+c/2,y=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,bE(e,T,x,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,bE(e,T,x,y)}else{e.lineWidth=ue(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const T=r.leftForLtr(f,c),x=r.leftForLtr(r.xPlus(f,1),c-2),y=eo(o.borderRadius);Object.values(y).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,bh(e,{x:T,y:v,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),bh(e,{x,y:v+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(T,v,c,l),e.strokeRect(T,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Tt(i.bodyFont);let f=d.lineHeight,m=0;const v=to(i.rtl,this.x,this.width),T=function(_){n.fillText(_,v.x(e.x+m),e.y+f/2),e.y+=f+s},x=v.textAlign(o);let y,w,S,C,D,V,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Gc(this,x,i),n.fillStyle=i.bodyColor,fe(this.beforeBody,T),m=a&&x!=="right"?o==="center"?c/2+h:c+2+h:0,C=0,V=r.length;C<V;++C){for(y=r[C],w=this.labelTextColors[C],n.fillStyle=w,fe(y.before,T),S=y.lines,a&&S.length&&(this._drawColorBox(n,e,C,v,i),f=Math.max(d.lineHeight,l)),D=0,I=S.length;D<I;++D)T(S[D]),f=d.lineHeight;fe(y.after,T)}m=0,f=d.lineHeight,fe(this.afterBody,T),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=to(i.rtl,this.x,this.width);for(e.x=Gc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Tt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=eo(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=xa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=aS(this,e),l=Object.assign({},o,this._size),c=lS(n,e,l),h=cS(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=dn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),WA(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),KA(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Eh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Eh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=xa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ae(Wm,"positioners",xa);var f9={id:"tooltip",_element:Wm,positioners:xa,afterInit(t,e,n){n&&(t.tooltip=new Wm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const p9=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function m9(t,e,n,i){const r=t.indexOf(e);if(r===-1)return p9(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const g9=(t,e)=>t===null?null:_n(Math.round(t),0,e);function dS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Km extends No{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ie(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:m9(i,e,pe(n,e),this._addedLabels),g9(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return dS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ae(Km,"id","category"),ae(Km,"defaults",{ticks:{callback:dS}});function y9(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,v=h-1,{min:T,max:x}=e,y=!Ie(o),w=!Ie(a),S=!Ie(c),C=(x-T)/(d+1);let D=yE((x-T)/v/m)*m,V,I,_,b;if(D<1e-14&&!y&&!w)return[{value:T},{value:x}];b=Math.ceil(x/D)-Math.floor(T/D),b>v&&(D=yE(b*D/v/m)*m),Ie(l)||(V=Math.pow(10,l),D=Math.ceil(D*V)/V),r==="ticks"?(I=Math.floor(T/D)*D,_=Math.ceil(x/D)*D):(I=T,_=x),y&&w&&s&&wU((a-o)/s,D/1e3)?(b=Math.round(Math.min((a-o)/D,h)),D=(a-o)/b,I=o,_=a):S?(I=y?o:I,_=w?a:_,b=c-1,D=(_-I)/b):(b=(_-I)/D,Eu(b,Math.round(b),D/1e3)?b=Math.round(b):b=Math.ceil(b));const P=Math.max(vE(D),vE(I));V=Math.pow(10,Ie(l)?P:l),I=Math.round(I*V)/V,_=Math.round(_*V)/V;let k=0;for(y&&(f&&I!==o?(n.push({value:o}),I<o&&k++,Eu(Math.round((I+k*D)*V)/V,o,fS(o,C,t))&&k++):I<o&&k++);k<b;++k){const R=Math.round((I+k*D)*V)/V;if(w&&R>a)break;n.push({value:R})}return w&&f&&_!==a?n.length&&Eu(n[n.length-1].value,a,fS(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!w||_===a)&&n.push({value:_}),n}function fS(t,e,{horizontal:n,minRotation:i}){const r=Hr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class v9 extends No{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ie(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=ir(r),c=ir(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=y9(r,s);return e.bounds==="ticks"&&TU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return OA(e,this.chart.options.locale,this.options.ticks.format)}}class qm extends v9{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=hn(e)?e:0,this.max=hn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Hr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ae(qm,"id","linear"),ae(qm,"defaults",{ticks:{callback:NA.formatters.numeric}});const xd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys(xd);function pS(t,e){return t-e}function mS(t,e){if(Ie(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),hn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Ih(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function gS(t,e,n,i){const r=Lt.length;for(let s=Lt.indexOf(t);s<r-1;++s){const o=xd[Lt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Lt[s]}return Lt[r-1]}function _9(t,e,n,i,r){for(let s=Lt.length-1;s>=Lt.indexOf(n);s--){const o=Lt[s];if(xd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Lt[n?Lt.indexOf(n):0]}function w9(t){for(let e=Lt.indexOf(t)+1,n=Lt.length;e<n;++e)if(xd[Lt[e]].common)return Lt[e]}function yS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=fv(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function T9(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function vS(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:T9(t,i,r,n)}class kh extends No{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Lz._date(e.adapters.date);r.init(n),za(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:mS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=hn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=hn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=AU(r,s,o);return this._unit=n.unit||(i.autoSkip?gS(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):_9(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:w9(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),vS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=_n(n,0,o),i=_n(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||gS(s.minUnit,n,i,this._getLabelCapacity(n)),a=pe(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Ih(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)yS(h,f,v);return(f===i||r.bounds==="ticks"||m===1)&&yS(h,f,v),Object.keys(h).sort(pS).map(T=>+T)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return xe(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],m=c&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Hr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,vS(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(mS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return CA(e.sort(pS))}}ae(kh,"id","time"),ae(kh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qc(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Um(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Um(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class _S extends kh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Qc(n,this.min),this._tableRange=Qc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Qc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Qc(this._table,i*this._tableRange+this._minPos,!0)}}ae(_S,"id","timeseries"),ae(_S,"defaults",kh.defaults);const ck="label";function wS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function E9(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function uk(t,e){t.labels=e}function hk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ck;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function S9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ck;const n={labels:[],datasets:[]};return uk(n,t.labels),hk(n,t.datasets,e),n}function x9(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=z.useRef(null),v=z.useRef(),T=()=>{m.current&&(v.current=new Sd(m.current,{type:o,data:S9(a,s),options:l&&{...l},plugins:c}),wS(e,v.current))},x=()=>{wS(e,null),v.current&&(v.current.destroy(),v.current=null)};return z.useEffect(()=>{!r&&v.current&&l&&E9(v.current,l)},[r,l]),z.useEffect(()=>{!r&&v.current&&uk(v.current.config.data,a.labels)},[r,a.labels]),z.useEffect(()=>{!r&&v.current&&a.datasets&&hk(v.current.config.data,a.datasets,s)},[r,a.datasets]),z.useEffect(()=>{v.current&&(r?(x(),setTimeout(T)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),z.useEffect(()=>{v.current&&(x(),setTimeout(T))},[o]),z.useEffect(()=>(T(),()=>x()),[]),RS.createElement("canvas",Object.assign({ref:m,role:"img",height:n,width:i},f),h)}const I9=z.forwardRef(x9);function b9(t,e){return Sd.register(e),z.forwardRef((n,i)=>RS.createElement(I9,Object.assign({},n,{ref:i,type:t})))}const P9=b9("bar",Su);Sd.register(Km,qm,bu,s9,f9,i9);const A9=hs(Zt);function k9({uidUsuario:t}){const[e,n]=z.useState({labels:[],datasets:[{label:"Ingresos",backgroundColor:"#845ec2",data:[]},{label:"Egresos",backgroundColor:"#ff8066",data:[]}]});return z.useEffect(()=>{if(t){const i=Dn(A9,`users/${t}/archivos`),r=pd(i,s=>{const o=[],a=[],l=[];s.forEach(c=>{const h=c.data(),d=h.fecha instanceof Ue?h.fecha.toDate().toLocaleDateString():new Date(h.fecha).toLocaleDateString();o.push(d),a.push(h.totalIngresos||0),l.push(h.totalEgresos||0)}),n({labels:o,datasets:[{...e.datasets[0],data:a},{...e.datasets[1],data:l}]})});return()=>r()}},[t]),O.jsx("div",{className:"w-full flex justify-center items-center",children:O.jsx("div",{className:"w-2/3 max-w-md h-64",children:O.jsx(P9,{data:e,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})})})}const C9=hs(Zt);function R9({uidUsuario:t}){const[e,n]=z.useState([]),[i,r]=z.useState(!0);return z.useEffect(()=>{if(t){const s=Dn(C9,`users/${t}/archivos`),o=pd(s,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));n(l),r(!1)});return()=>o()}},[t]),O.jsx("div",{className:"rounded",children:O.jsx("div",{className:"relative rounded shadow-md",children:i?O.jsx("p",{className:"text-center",children:"Cargando datos..."}):O.jsxs("table",{className:"w-full h-full text-xs text-left rtl:text-right text-black font-bold",style:{tableLayout:"fixed"},children:[O.jsx("thead",{className:"text-xs font-bold bg-gray-50 dark:text-gray-400",children:O.jsxs("tr",{className:"font-bold",children:[O.jsx("th",{scope:"col",className:"px-2 py-1 text-black",children:"Fecha"}),O.jsx("th",{scope:"col",className:"px-2 py-1 text-black",children:"Total Egresos"}),O.jsx("th",{scope:"col",className:"px-6 py-1 text-black",children:"Total Ingresos"})]})}),O.jsx("tbody",{className:"font-bold",children:e.length>0?e.map(s=>O.jsxs("tr",{className:"bg-white dark:border-gray-700 hover:bg-[#E8EAED]",children:[O.jsx("th",{scope:"row",className:"px-2 py-1 font-medium whitespace-nowrap text-black",children:s.fecha instanceof Ue?s.fecha.toDate().toLocaleDateString():new Date(s.fecha).toLocaleDateString()}),O.jsx("td",{className:"px-6 py-1",children:s.totalEgresos}),O.jsx("td",{className:"px-6 py-1",children:s.totalIngresos})]},s.id)):O.jsx("tr",{children:O.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})})})}const D9=hs(Zt),M9=Ao(Zt);function O9(){const[t,e]=z.useState([]);return z.useEffect(()=>{const i=(()=>{const r=M9.currentUser;if(!r){console.log("Debes iniciar sesin para ver los presupuestos.");return}const s=r.uid,o=Dn(D9,`users/${s}/presupuestos`);return pd(o,l=>{const c=l.docs.map(h=>({id:h.id,...h.data()}));e(c)})})();return()=>i&&i()},[]),O.jsx("div",{className:"overflow-hidden",children:t.length===0?O.jsx("p",{children:"No hay presupuestos guardados."}):t.map(n=>O.jsx("div",{className:"block max-w-sm p-6 bg-[#c4fcef]  rounded-lg shadow mb-4",children:O.jsxs("p",{className:"font-semibold text-gray-700",children:["Cantidad: ",n.cantidad]})},n.id))})}function V9({correoUsuario:t,uidUsuario:e}){const n={initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1}},i={initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:1}},r={initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:1}};return O.jsxs("div",{className:"h-screen bg-[#DEDEE0] grid grid-cols-4 grid-rows-3 gap-6",children:[O.jsx(ki.div,{className:"overflow-hidden text bg-center rounded-lg row-span-3 relative z-50",initial:"initial",animate:"animate",variants:i,children:O.jsx(z5,{correoUsuario:t,uidUsuario:e})}),O.jsx("div",{className:"p-2 col-span-3 row-span-3",children:O.jsxs("div",{className:"h-screen grid grid-cols-5 grid-rows-5 gap-3",children:[O.jsxs(ki.div,{className:"overflow-hidden rounded-lg text-center bg-[#00c9a7] row-span-2",initial:"initial",animate:"animate",variants:n,children:[O.jsx("h1",{className:"font-bold",children:"Presupuesto"}),O.jsx("div",{className:"w-full h-full flex justify-center",children:O.jsx(O9,{})})]}),O.jsxs(ki.div,{className:"overflow-hidden rounded-lg text-center bg-[#dcf5ff] row-span-2 col-span-2",initial:"initial",animate:"animate",variants:r,children:[O.jsx("h1",{className:"font-bold",children:"Ingresos"}),O.jsx("div",{className:"w-full h-full flex justify-center",children:O.jsx(Gw,{tipo:"ingresos",uidUsuario:e})})]}),O.jsxs(ki.div,{className:"overflow-hidden rounded-lg text-center bg-[#dcf5ff] row-span-2 col-span-2",initial:"initial",animate:"animate",variants:i,children:[O.jsx("h1",{children:"Egresos"}),O.jsx("div",{className:"w-full h-full flex justify-center",children:O.jsx(Gw,{tipo:"egresos",uidUsuario:e})})]}),O.jsxs(ki.div,{className:"overflow-hidden rounded-lg text-center bg-[#dcf5ff] row-span-2 col-span-2",initial:"initial",animate:"animate",variants:n,children:[O.jsx("h1",{children:"Archivo"}),O.jsx("div",{className:"w-full h-full flex justify-center",children:O.jsx(R9,{uidUsuario:e})})]}),O.jsxs(ki.div,{className:"overflow-hidden rounded-lg text-center bg-gradient-to-t from-slate-50 to-violet-300 row-span-3 col-span-3",initial:"initial",animate:"animate",variants:n,children:[O.jsx("h1",{className:"font-bold",children:"Grfico de Ingresos"}),O.jsx("div",{className:"w-full h-full flex justify-center",children:O.jsx(k9,{uidUsuario:e})})]})]})})]})}const sp=Ao(Zt),N9=hs(Zt);function L9(){const[t,e]=z.useState(""),[n,i]=z.useState(""),[r,s]=z.useState(!1),o=async l=>{if(l.preventDefault(),r){if(n.length<6){alert("La contrasea debe tener al menos 6 caracteres.");return}try{const h=(await q2(sp,t,n)).user,d=er(N9,"users",h.uid);await Zs(d,{email:h.email}),await Zs(er(Dn(d,"ingresos")),{}),await Zs(er(Dn(d,"egresos")),{}),await _I(sp),alert("Usuario registrado. Por favor, inicia sesin.")}catch(c){c.code==="auth/email-already-in-use"?alert("Este correo electrnico ya est registrado. Por favor, usa otro."):alert("Error al registrar el usuario. Intenta nuevamente.")}}else try{await G2(sp,t,n)}catch{alert("Error al iniciar sesin. Verifica tus credenciales.")}},a={initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"}};return O.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#07244C]",children:O.jsxs(ki.div,{className:"bg-[#E5EAF3] w-96 p-6 rounded-lg shadow-md",initial:"initial",animate:"animate",variants:a,children:[O.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:r?"Registro":"Inicio de sesin"}),O.jsxs("form",{onSubmit:o,className:"space-y-4",children:[O.jsx("input",{type:"email",value:t,onChange:l=>e(l.target.value),placeholder:"Email",required:!0,className:"w-full p-2 bg-[#D9D9D9] border-gray-300 rounded"}),O.jsx("input",{type:"password",value:n,onChange:l=>i(l.target.value),placeholder:"Contrasea",required:!0,className:"w-full p-2 bg-[#D9D9D9] border-gray-300 rounded"}),O.jsx("button",{type:"submit",className:"w-full bg-[#7671FA] text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:r?"Regstrate":"Iniciar sesin"})]}),O.jsxs("span",{className:"block text-center text-sm text-gray-600 mt-4",children:[r?"Ya tienes una cuenta?":"No tienes una cuenta?",O.jsx("button",{onClick:()=>s(!r),className:"text-blue-600 hover:underline ml-2",children:r?"Inicia sesin":"Regstrate"})]})]})})}const F9=Ao(Zt);function j9(){const[t,e]=z.useState(null);return z.useEffect(()=>{const n=vI(F9,i=>{e(i||null)});return()=>n()},[]),O.jsx(O.Fragment,{children:t?O.jsx(V9,{correoUsuario:t.email,uidUsuario:t.uid}):O.jsx(L9,{})})}O1(document.getElementById("root")).render(O.jsx(z.StrictMode,{children:O.jsx(j9,{})}));
